(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4728],{770:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});var a=r(34477);let n=(0,a.createServerReference)("7fee1bd9a2e2f599d30b7c300be51ba35287de70d9",a.callServer,void 0,a.findSourceMapURL,"destroySession")},4050:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var a=r(95155);r(12115);var n=r(55028),i=r(88646),s=r(35695),o=r(26715),c=r(5041),l=r(24848),u=r(76714);let d=(0,n.default)(()=>Promise.all([r.e(3743),r.e(7325),r.e(7845),r.e(2788),r.e(534),r.e(8220),r.e(9584),r.e(7110),r.e(2070),r.e(1506),r.e(5958),r.e(7379),r.e(5883)]).then(r.bind(r,56683)),{loadableGenerated:{webpack:()=>[56683]},ssr:!1,loading:()=>(0,a.jsx)("div",{children:(0,a.jsx)(i.A,{})})}),p=function(e){let{template:t}=e,r=(0,s.useRouter)(),n=(0,o.jE)(),[i,p]=(0,l.A)(),m=(0,c.n)({mutationFn:u.Tj,onError:()=>{i.error("Error while uploading templates/thumbnail!!!")}}),h=(0,c.n)({mutationFn:e=>(0,u.ub)(e,t.id),onError:()=>{i.error("Error while creating Template!!!")},onSuccess:()=>{i.success("Successfully created Template!!!"),n.invalidateQueries({queryKey:["userTemplates"]}),r.push("/admin/templates")}});return(0,a.jsxs)(a.Fragment,{children:[p,(0,a.jsx)(d,{loading:m.isPending||h.isPending,onSave:e=>{let t=new FormData;if(!e.title||!e.description){i.error("Please enter title and description correctly");return}if(e.height<=0||e.width<=0){i.error("Please enter height and width correctly");return}if(!e.background_image||!e.thumbnail_url){i.error("Please upload thumbnail and template background image before uploading");return}if(0===e.category_id){i.error("Please select a Template Type");return}e.background_image&&e.thumbnail_url&&(t.append("template",e.background_image),t.append("thumbnail",e.thumbnail_url),e.preview_images&&e.preview_images.length>0&&e.preview_images.forEach((e,r)=>{e.originFileObj&&t.append("preview_images[".concat(r,"]"),e.originFileObj)}),m.mutate(t,{onSuccess:t=>{var r;let a=(null===(r=t.preview_images)||void 0===r?void 0:r.map((t,r)=>{var a;return{filename:(null===(a=e.preview_images[r])||void 0===a?void 0:a.filename)||"image-".concat(r),file_url:t}}))||[],n={...e,refer_id:"".concat(new Date),thumbnail_url:t.thumbnail_url,file_url:t.template_url,preview_images:a};h.mutate(n)}}))},initialTemplate:t})]})}},34622:(e,t,r)=>{Promise.resolve().then(r.bind(r,35133)),Promise.resolve().then(r.bind(r,87626)),Promise.resolve().then(r.bind(r,45626)),Promise.resolve().then(r.bind(r,48882)),Promise.resolve().then(r.bind(r,4050))},35133:(e,t,r)=>{"use strict";r.d(t,{Card:()=>a.A});var a=r(6124)},42727:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var a=r(34477);let n=(0,a.createServerReference)("7ffd9cffc306d3cc4700af15a581e8279d0fc581d9",a.callServer,void 0,a.findSourceMapURL,"getSessionClient")},49561:(e,t,r)=>{"use strict";r.d(t,{f6:()=>o,y1:()=>c});var a=r(23464),n=r(42727),i=r(770);let s="https://backend.enimto.com/api/v1/",o=a.A.create({baseURL:s,headers:{"Content-Type":"application/json",accept:"application/json"}});o.interceptors.response.use(e=>e.data,e=>e.response?Promise.reject(e.response.data.detail):Promise.reject(e.message));let c=a.A.create({baseURL:s,headers:{"Content-Type":"application/json",accept:"application/json"}});c.interceptors.request.use(async e=>{let t=await (0,n.g)();return e.headers.Authorization="Bearer ".concat(t.access_token?t.access_token:"no_token"),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e.data,async e=>{if(!e.response)return Promise.reject(e.message);{let t=e.response.status,r=e.response.data.detail;return(403===t||401===t)&&await (0,i.l)(),Promise.reject(r)}})},76714:(e,t,r)=>{"use strict";r.d(t,{I7:()=>o,JW:()=>p,LZ:()=>l,Tj:()=>s,mn:()=>n,nt:()=>c,tA:()=>m,ub:()=>i,ul:()=>u,yW:()=>d});var a=r(49561);async function n(e){try{return await a.y1.post("templates/",e)}catch(e){throw Error(e)}}async function i(e,t){try{return await a.y1.put("templates/".concat(t),e)}catch(e){throw Error(e)}}async function s(e){try{return await a.y1.post("templates/upload-template-images/",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw Error(e)}}async function o(e){try{return await a.y1.delete("templates/".concat(e))}catch(e){throw Error(e)}}async function c(){try{return await a.y1.get("templates/?skip=0&limit=100")}catch(e){throw Error(e)}}async function l(){try{return await a.f6.get("categories/?skip=0&limit=100")}catch(e){throw Error(e)}}async function u(e){try{return await a.y1.delete("categories/".concat(e))}catch(e){throw Error(e)}}async function d(e){try{return await a.y1.post("categories/",e)}catch(e){throw Error(e)}}async function p(e){try{return await a.y1.put("categories/".concat(e.id),e)}catch(e){throw Error(e)}}async function m(e){try{return await a.y1.post("categories/upload-image",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw Error(e)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[4666,6449,6327,3876,3749,8646,8085,6124,6922,6874,9186,5144,3889,9237,4714,3419,8441,1684,7358],()=>t(34622)),_N_E=e.O()}]);