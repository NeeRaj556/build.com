(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8447],{10746:(e,t,s)=>{"use strict";s.d(t,{a:()=>r});let r="data:image/png;base64,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"},35133:(e,t,s)=>{"use strict";s.d(t,{Card:()=>r.A});var r=s(6124)},40795:(e,t,s)=>{"use strict";s.d(t,{default:()=>v});var r=s(95155),n=s(64778),a=s(52319),i=s(49561);async function l(e){try{return(await i.y1.get("users/search?query=".concat(e))).data}catch(e){throw Error(e)}}var o=s(86769),c=s(19373),A=s(5041),d=s(17238),u=s(20534),g=s(94326),h=s(46002),p=s(89584),m=s(31506),E=s(77325),j=s(87626),y=s(45964),x=s.n(y),Q=s(12115);let f=e=>{let{isOpen:t,onClose:s}=e,[n]=u.A.useForm(),[i,o]=(0,Q.useState)(""),{data:d=[],isLoading:j}=(0,c.I)({queryKey:["searchUsers",i],queryFn:()=>l(i),enabled:i.length>=2,staleTime:3e4}),{mutate:y,isPending:f}=(0,A.n)({mutationFn:a.aK,onSuccess:()=>{g.Ay.success("Credits transferred successfully"),n.resetFields(),s()},onError:e=>{g.Ay.error(e.message||"Failed to transfer credits")}}),v=x()(e=>{o(e)},500);return(0,r.jsx)(h.A,{title:"Transfer Credits",open:t,onCancel:s,footer:null,destroyOnClose:!0,children:(0,r.jsxs)(u.A,{form:n,layout:"vertical",onFinish:()=>{n.validateFields().then(e=>{y({userId:e.userId,amount:e.amount})})},preserve:!1,children:[(0,r.jsx)(u.A.Item,{name:"userId",label:"Select User",rules:[{required:!0,message:"Please select a user"}],children:(0,r.jsx)(p.A,{showSearch:!0,placeholder:"Search for users",filterOption:!1,onSearch:v,loading:j,style:{width:"100%"},options:d.map(e=>({value:e.id,label:"".concat(e.full_name," (").concat(e.email,")")}))})}),(0,r.jsx)(u.A.Item,{name:"amount",label:"Credit Amount",rules:[{required:!0,message:"Please enter credit amount"},{type:"number",min:1,message:"Amount must be greater than 0"}],children:(0,r.jsx)(m.A,{style:{width:"100%"},placeholder:"Enter credit amount",min:1})}),(0,r.jsxs)(u.A.Item,{style:{marginBottom:0,textAlign:"right"},children:[(0,r.jsx)(E.Ay,{onClick:s,style:{marginRight:8},children:"Cancel"}),(0,r.jsx)(E.Ay,{type:"primary",htmlType:"submit",loading:f,children:"Transfer Credits"})]})]})})},v=function(){let[e,t]=(0,Q.useState)(!1);return(0,r.jsxs)(d.A,{justify:"space-between",align:"start",wrap:"wrap",gap:10,children:[(0,r.jsx)(j.default,{level:3,children:"User Credit Requests"}),(0,r.jsx)(n.default,{type:"link",icon:(0,r.jsx)(o.A,{}),onClick:()=>t(!0),children:"Custom Credit Transfer"}),(0,r.jsx)(f,{isOpen:e,onClose:()=>t(!1)})]})}},49561:(e,t,s)=>{"use strict";s.d(t,{f6:()=>d,th:()=>g,y1:()=>u});var r=s(23464),n=s(66608),a=s(51210),i=s(72508),l=s(49509);let o=l.env.NEXT_PUBLIC_API_URL,c=o+"/api/v1/",A=o+"/api/v2/",d=r.A.create({baseURL:c,headers:{"Content-Type":"application/json",accept:"application/json"}}),u=r.A.create({baseURL:c,headers:{"Content-Type":"application/json",accept:"application/json"}}),g=r.A.create({baseURL:A,headers:{"Content-Type":"application/json",accept:"application/json"}}),h=[u,r.A.create({baseURL:A,headers:{"Content-Type":"application/json",accept:"application/json"}})];[d,g].forEach(e=>{e.interceptors.response.use(e=>e.data,e=>e.response?Promise.reject(e.response.data.detail):Promise.reject(e.message))}),h.forEach(e=>{e.interceptors.request.use(async e=>{let t=await (0,n.g)();return e.headers.Authorization="Bearer ".concat(t.access_token?t.access_token:"no_token"),e},e=>Promise.reject(e))});let p=!1,m=null,E=[],j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;E.forEach(s=>{let{resolve:r,reject:n,config:a}=s;e?n(e):(t&&(a.headers.Authorization="Bearer ".concat(t)),r(a))}),E=[]};h.forEach(e=>{e.interceptors.response.use(e=>e.data,async t=>{var s,r,i;let l=t.config;if((null===(s=t.response)||void 0===s?void 0:s.status)===401&&!l._retry){if(l._retry=!0,p)return new Promise((e,t)=>{E.push({resolve:e,reject:t,config:l})}).then(t=>e(t));m||(p=!0,m=y());try{if(!await m)return j("Session expired. Please login again."),await (0,a.l)(),Promise.reject("Session expired. Please login again.");{let t=await (0,n.g)();return l.headers.Authorization="Bearer ".concat(t.access_token),j(null,t.access_token),e(l)}}catch(e){return j("Authentication failed. Please login again."),await (0,a.l)(),Promise.reject("Authentication failed. Please login again.")}finally{setTimeout(()=>{m=null,p=!1},100)}}if(!t.response)return Promise.reject(t.message);{let e=t.response.status,s=(null===(r=t.response.data)||void 0===r?void 0:r.detail)||(null===(i=t.response.data)||void 0===i?void 0:i.message)||"An error occurred";return 403===e&&await (0,a.l)(),Promise.reject(s)}})});let y=async()=>{try{let e=await (0,n.g)();if(!(null==e?void 0:e.refresh_token))return await (0,a.l)(),!1;let t=l.env.NEXT_PUBLIC_API_URL;if(!t)throw Error("API URL is not defined");let s=await fetch("".concat(t,"/api/v1/refresh-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e.refresh_token}),cache:"no-store"});if(!s.ok)return await (0,a.l)(),!1;let r=await s.json(),o={...e,access_token:r.access_token,refresh_token:r.refresh_token||e.refresh_token};return await (0,i.N)(o),!0}catch(e){return console.error("Token refresh failed:",e),await (0,a.l)(),!1}}},51210:(e,t,s)=>{"use strict";s.d(t,{l:()=>n});var r=s(34477);let n=(0,r.createServerReference)("7f94a4f5be4bbe86ff28602338eb3b1e17757bda33",r.callServer,void 0,r.findSourceMapURL,"destroySession")},52319:(e,t,s)=>{"use strict";s.d(t,{Sd:()=>n,aK:()=>l,fu:()=>i,hJ:()=>a});var r=s(49561);async function n(){try{return(await r.y1.get("credit-requests/")).reverse()}catch(e){throw Error(e)}}async function a(e){try{return await r.y1.put("credit-requests/".concat(e.id),{...e.details,admin_response:e.admin_response})}catch(e){throw Error(e)}}async function i(e){try{return await r.y1.post("credit-requests/",e)}catch(e){throw Error(e)}}async function l(e){try{return await r.y1.post("credits/transfer",e)}catch(e){throw Error(e)}}},61860:e=>{e.exports={floatButton:"styles_floatButton__HeivV"}},64778:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(95155),n=s(70445),a=s(77325);s(12115);var i=s(61860),l=s.n(i);let o=function(e){let{onClick:t,icon:s,children:i,type:o,style:c}=e,{token:{colorBgBase:A}}=n.A.useToken();return(0,r.jsx)("div",{style:{...c,background:A},className:l().floatButton,onClick:t,children:(0,r.jsx)(a.Ay,{block:!0,size:"large",icon:s,type:o,children:i})})}},66608:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var r=s(34477);let n=(0,r.createServerReference)("7f6ef96e8b0ebd5011563da96c6f189e5e4212342a",r.callServer,void 0,r.findSourceMapURL,"getSessionClient")},72508:(e,t,s)=>{"use strict";s.d(t,{N:()=>n});var r=s(34477);let n=(0,r.createServerReference)("7f89c1213494ea9ff4952ae407cec9eb241e36637e",r.callServer,void 0,r.findSourceMapURL,"setSession")},77118:(e,t,s)=>{"use strict";s.d(t,{default:()=>T});var r=s(95155),n=s(52319),a=s(19373),i=s(94326),l=s(6124),o=s(16467),c=s(36768),A=s(31086),d=s(35125),u=s(12115),g=s(86917),h=s(50274),p=s(38919),m=s(97555),E=s(3231),j=s(92638),y=s(58587),x=s(79659),Q=s(26715),f=s(5041),v=s(72070),C=s(70445),B=s(85),S=s(17238),b=s(28562),k=s(97226),I=s(77325),w=s(46002),R=s(37974),N=s(89631),J=s(94600),z=s(31506),P=s(95891),U=s(87626);let{TextArea:K}=v.A,q=function(e){let{data:t}=e,s=(0,Q.jE)(),[a,o]=(0,u.useState)(!1),[c,A]=i.Ay.useMessage(),[d,v]=(0,u.useState)(t.admin_response||""),[q,T]=(0,u.useState)(t.requested_amount),[_,F]=(0,u.useState)(!1),{token:{colorTextTertiary:L,colorPrimary:Y}}=C.A.useToken(),M=(0,f.n)({mutationFn:n.hJ,onSuccess:()=>{c.success("Response updated successfully"),s.invalidateQueries({queryKey:["creditRequests"]}),s.invalidateQueries({queryKey:["userData"]}),o(!1)},onError:()=>c.error("Something went wrong")}),D=(e,s)=>{M.mutate({details:{status:s,requested_amount:"approved"===s?q:t.requested_amount},id:e,admin_response:d})};function H(e){let t=new Date(e);return{date:t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),time:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}}let Z=H(t.requested_at),G=t.responded_at?H(t.responded_at):null;return(0,r.jsxs)(r.Fragment,{children:[A,(0,r.jsxs)(B.A.Ribbon,{text:t.status.toUpperCase(),placement:"end",color:"approved"===t.status?"green":"rejected"===t.status?"red":"orange",children:[(0,r.jsx)(l.A,{size:"small",onClick:()=>o(!0),style:{margin:"16px 0",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",border:"1px solid ".concat("pending"===t.status?"#faad14":"approved"===t.status?"#52c41a":"#ff4d4f","30")},hoverable:!0,children:(0,r.jsxs)(S.A,{wrap:"wrap",gap:"small",justify:"space-between",align:"end",children:[(0,r.jsxs)(S.A,{align:"start",children:[(0,r.jsx)(b.A,{style:{marginRight:"16px",border:t.user.profile_picture_url?"none":"1px solid #d9d9d9"},size:60,src:t.user.profile_picture_url?t.user.profile_picture_url:"/user.png",icon:!t.user.profile_picture_url&&(0,r.jsx)(h.A,{})}),(0,r.jsxs)(S.A,{vertical:!0,gap:2,children:[(0,r.jsx)(P.A,{style:{fontSize:"16px",fontWeight:500},children:t.user.full_name}),(0,r.jsxs)(S.A,{align:"center",gap:4,children:[(0,r.jsx)(p.A,{style:{fontSize:"12px",color:L}}),(0,r.jsx)(P.A,{style:{fontSize:"12px",color:L},children:t.user.phone_number})]}),(0,r.jsxs)(S.A,{align:"center",gap:4,children:[(0,r.jsx)(m.A,{style:{fontSize:"12px",color:L}}),(0,r.jsx)(P.A,{style:{fontSize:"12px",color:L},children:t.user.email})]}),(0,r.jsxs)(S.A,{align:"center",gap:4,style:{marginTop:"4px"},children:[(0,r.jsx)(E.A,{style:{fontSize:"12px",color:L}}),(0,r.jsxs)(P.A,{style:{fontSize:"12px",color:L},children:["Requested: ",Z.date," at ",Z.time]})]})]})]}),(0,r.jsxs)(S.A,{vertical:!0,align:"end",style:{minWidth:"120px"},children:[(0,r.jsxs)(S.A,{gap:8,align:"center",children:[(0,r.jsx)(b.A,{src:"/credit-icon.png",size:24}),(0,r.jsx)(U.default,{level:3,style:{margin:0,color:Y},children:t.requested_amount})]}),"pending"===t.status&&(0,r.jsx)(k.A,{style:{marginTop:"12px"},children:(0,r.jsx)(I.Ay,{size:"small",type:"link",onClick:e=>{e.stopPropagation(),o(!0)},children:"View Details"})})]})]})}),(0,r.jsxs)(w.A,{open:a,onCancel:()=>o(!1),title:(0,r.jsxs)(S.A,{justify:"space-between",align:"center",children:[(0,r.jsx)("span",{children:"Credit Request Details"}),(0,r.jsx)(R.A,{color:(e=>{switch(e){case"approved":return"success";case"rejected":return"error";case"pending":return"warning"}})(t.status),style:{marginRight:20},children:t.status.toUpperCase()})]}),footer:"pending"===t.status?[(0,r.jsx)(I.Ay,{danger:!0,loading:M.isPending,onClick:()=>D(t.id,"rejected"),children:"Reject"},"reject"),(0,r.jsx)(I.Ay,{type:"primary",loading:M.isPending,onClick:()=>D(t.id,"approved"),children:"Approve"},"approve")]:[(0,r.jsx)(I.Ay,{onClick:()=>o(!1),children:"Close"},"close")],width:700,destroyOnClose:!0,centered:!0,children:[(0,r.jsxs)(N.A,{bordered:!0,column:1,size:"small",style:{marginTop:24},children:[(0,r.jsx)(N.A.Item,{label:"Requester",children:(0,r.jsxs)(S.A,{align:"center",gap:12,children:[(0,r.jsx)(b.A,{src:t.user.profile_picture_url||"/user.png",size:40}),(0,r.jsx)(P.A,{strong:!0,children:t.user.full_name})]})}),(0,r.jsx)(N.A.Item,{label:"Contact Information",children:(0,r.jsxs)(S.A,{vertical:!0,gap:4,children:[(0,r.jsxs)(P.A,{children:[(0,r.jsx)(p.A,{})," ",t.user.phone_number]}),(0,r.jsxs)(P.A,{children:[(0,r.jsx)(m.A,{})," ",t.user.email]})]})}),(0,r.jsx)(N.A.Item,{label:"Address",children:t.user.address||"Not provided"}),(0,r.jsx)(N.A.Item,{label:"Requested Amount",children:"pending"===t.status?(0,r.jsx)(S.A,{align:"center",justify:"space-between",style:{width:"100%"},children:_?(0,r.jsxs)(S.A,{align:"center",gap:8,children:[(0,r.jsx)(z.A,{min:1,value:q,onChange:e=>T(e||1),style:{width:300},addonAfter:"credits"}),(0,r.jsx)(I.Ay,{size:"small",type:"text",icon:(0,r.jsx)(j.A,{}),onClick:()=>F(!1),title:"Save"}),(0,r.jsx)(I.Ay,{size:"small",type:"text",danger:!0,icon:(0,r.jsx)(y.A,{}),onClick:()=>{T(t.requested_amount),F(!1)},title:"Cancel"})]}):(0,r.jsxs)(S.A,{align:"center",justify:"space-between",style:{width:"100%"},children:[(0,r.jsxs)(P.A,{strong:!0,style:{fontSize:"18px",color:Y},children:[q," credits"]}),(0,r.jsx)(I.Ay,{size:"small",type:"text",icon:(0,r.jsx)(x.A,{}),onClick:()=>F(!0),title:"Edit amount"})]})}):(0,r.jsxs)(P.A,{strong:!0,style:{fontSize:"18px",color:Y},children:[t.requested_amount," credits"]})}),(0,r.jsxs)(N.A.Item,{label:"Current Credit Balance",children:[t.user.credit," credits"]}),(0,r.jsx)(N.A.Item,{label:"Request Timeline",children:(0,r.jsxs)(S.A,{vertical:!0,children:[(0,r.jsxs)(P.A,{children:["Requested: ",Z.date," at ",Z.time]}),G&&(0,r.jsxs)(P.A,{children:["Responded: ",G.date," at ",G.time]})]})}),(0,r.jsx)(N.A.Item,{label:"Payment Voucher",children:(0,r.jsx)(g.A,{src:t.image_url,alt:"payment voucher",fallback:!0,style:{maxHeight:300,maxWidth:500}})}),"pending"!==t.status&&(0,r.jsx)(N.A.Item,{label:"Admin Response",children:t.admin_response||"No response provided"})]}),"pending"===t.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J.A,{orientation:"left",children:"Admin Response"}),(0,r.jsx)(K,{rows:4,value:d,onChange:e=>v(e.target.value),placeholder:"Provide additional information about this decision (optional)",style:{marginBottom:16}})]})]})]})]})},T=function(){let[e,t]=i.Ay.useMessage(),[s,g]=(0,u.useState)("all"),{data:h,isLoading:p,isError:m,isFetching:E,isSuccess:j,error:y}=(0,a.I)({queryKey:["creditRequests"],queryFn:n.Sd,retry:1});console.log(h),(0,u.useEffect)(()=>{m&&e.error(y.message)},[m]);let x=(h||[]).filter(e=>"all"===s||e.status===s),Q={all:(null==h?void 0:h.length)||0,pending:(null==h?void 0:h.filter(e=>"pending"===e.status).length)||0,approved:(null==h?void 0:h.filter(e=>"approved"===e.status).length)||0,rejected:(null==h?void 0:h.filter(e=>"rejected"===e.status).length)||0};return(0,r.jsxs)(r.Fragment,{children:[t,(0,r.jsx)(d.A,{activeKey:s,onChange:g,items:[{key:"all",label:"All Requests"},{key:"pending",label:"Pending"},{key:"approved",label:"Approved"},{key:"rejected",label:"Rejected"}].map(e=>({...e,label:"string"==typeof e.label?"".concat(e.label," (").concat(Q[e.key],")"):e.label})),size:"large",style:{marginBottom:16}}),p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{variant:"outlined",style:{margin:"20px 0",boxShadow:"none"},size:"small",loading:p}),(0,r.jsx)(l.A,{variant:"outlined",style:{margin:"20px 0",boxShadow:"none"},size:"small",loading:p}),(0,r.jsx)(l.A,{variant:"outlined",style:{margin:"20px 0",boxShadow:"none"},size:"small",loading:p})]}):j?(0,r.jsx)(o.A,{spinning:E,children:x.length>0?x.map(e=>(0,r.jsx)(q,{data:e},e.id)):(0,r.jsx)(c.A,{description:"No ".concat("all"!==s?s:""," credit requests found"),style:{marginTop:40}})}):m?(0,r.jsx)(A.Ay,{status:"error",title:y.message}):void 0]})}},86917:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(95155),n=s(66766),a=s(98617),i=s(10746);let l=e=>{let{src:t,alt:s,preview:l,fallback:o,style:c,className:A,wrapperStyle:d}=e;return(0,r.jsx)(a.A,{preview:l,src:t,alt:s,style:{...c},wrapperStyle:{...d},className:A,fallback:o?i.a:void 0,placeholder:(0,r.jsx)(n.default,{src:t,alt:s,fill:!0,style:{objectFit:"cover"}})})}},98954:(e,t,s)=>{Promise.resolve().then(s.bind(s,35133)),Promise.resolve().then(s.bind(s,40795)),Promise.resolve().then(s.bind(s,77118))}},e=>{var t=t=>e(e.s=t);e.O(0,[2027,4666,6449,6327,3876,3749,8646,8085,7325,6124,6922,1086,9186,7845,5144,2788,3889,9237,534,4714,3063,998,9584,6002,1506,1813,101,4702,8441,1684,7358],()=>t(98954)),_N_E=e.O()}]);