(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5495],{770:(e,t,a)=>{"use strict";a.d(t,{l:()=>i});var r=a(34477);let i=(0,r.createServerReference)("7fee1bd9a2e2f599d30b7c300be51ba35287de70d9",r.callServer,void 0,r.findSourceMapURL,"destroySession")},6642:(e,t,a)=>{"use strict";a.d(t,{default:()=>y});var r=a(95155),i=a(76714),s=a(26715),n=a(19373),o=a(5041),A=a(94326),c=a(17238),d=a(27212),l=a(77325),g=a(78073),u=a(31086),E=a(56170),m=a(79659),Q=a(28509),p=a(86917);let y=function(){let e=(0,s.jE)(),{setIsModalOpen:t,setEdit:a,setEditData:y}=(0,Q.d)(),[h,B]=A.Ay.useMessage(),{data:j,isSuccess:C,isLoading:I,isError:x,error:w}=(0,n.I)({queryKey:["categories"],queryFn:i.LZ}),f=(0,o.n)({mutationFn:i.ul,onSuccess:t=>{e.invalidateQueries({queryKey:["categories"]}),h.success("Category of id:".concat(t.id," deleted successfully"))},onError:e=>{h.error(e.message)}}),k=e=>{y({name:e.name,description:e.description,id:e.id,image_url:e.image_url}),a(!0),t(!0)},v=[{dataIndex:"id",key:"id",title:"ID",width:"5%",render:(e,t,a)=>a+1},{dataIndex:"name",key:"name",title:"Name",width:"6%",ellipsis:!0,fixed:!0},{dataIndex:"description",key:"description",title:"Description",ellipsis:!0,width:"20%"},{dataIndex:"image_url",key:"image_url",title:"Image",width:"20%",render:(e,t)=>(0,r.jsx)(p.A,{src:e,alt:t.name+" image",style:{width:"100px",height:"auto"},fallback:!0})},{dataIndex:"created_at",key:"created_at",title:"Create at",ellipsis:!0,width:"10%",render:e=>{var t;return(0,r.jsxs)(r.Fragment,{children:[null==e?void 0:e.split("T")[0]," : ",null==e?void 0:null===(t=e.split("T")[1])||void 0===t?void 0:t.split(".")[0]]})}},{dataIndex:"updated_at",key:"updated_at",ellipsis:!0,title:"Updated at",width:"10%",render:e=>{var t;return(0,r.jsxs)(r.Fragment,{children:[null==e?void 0:e.split("T")[0]," : ",null==e?void 0:null===(t=e.split("T")[1])||void 0===t?void 0:t.split(".")[0]]})}},{dataIndex:"actions",key:"actions",title:"Actions",width:"10%",fixed:"right",render:(e,t)=>(0,r.jsxs)(c.A,{justify:"space-between",gap:8,wrap:"wrap",children:[(0,r.jsx)(d.A,{title:"Delete category",description:(0,r.jsxs)(c.A,{vertical:!0,children:["Are you sure to delete this category?",(0,r.jsx)("div",{children:"If you delete this category then all the templates under this category wil also be deleted."})]}),onConfirm:()=>f.mutate(t.id),okButtonProps:{loading:f.isPending},okText:"Yes",cancelText:"No",children:(0,r.jsx)(l.Ay,{danger:!0,type:"primary",block:!0,icon:(0,r.jsx)(E.A,{}),children:"Delete"})}),(0,r.jsx)(l.Ay,{block:!0,onClick:()=>k(t),icon:(0,r.jsx)(m.A,{}),children:"Edit"})]})}];return I?(0,r.jsx)(g.A,{columns:v,rowKey:"id",loading:!0}):C?(0,r.jsxs)(r.Fragment,{children:[B,(0,r.jsx)(g.A,{dataSource:j,bordered:!0,columns:v,rowKey:"id",scroll:{x:1500}})]}):x?(h.error(w.message),(0,r.jsxs)(r.Fragment,{children:[B,(0,r.jsx)(u.Ay,{status:"500",subTitle:"Sorry, something went wrong.",extra:(0,r.jsx)(l.Ay,{type:"primary",children:"Back Home"})})]})):void 0}},10746:(e,t,a)=>{"use strict";a.d(t,{a:()=>r});let r="data:image/png;base64,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"},28509:(e,t,a)=>{"use strict";a.d(t,{d:()=>r});let r=(0,a(88693).vt)(e=>({edit:!1,setEdit:t=>e({edit:t}),editData:{name:"",description:"",id:0,image_url:""},setEditData:t=>e({editData:t}),isModalOpen:!1,setIsModalOpen:t=>e({isModalOpen:t})}))},34539:(e,t,a)=>{"use strict";a.d(t,{default:()=>C});var r=a(95155),i=a(94326),s=a(20534),n=a(17238),o=a(77325),A=a(46002),c=a(72070),d=a(98617),l=a(95891),g=a(46996),u=a(83387),E=a(12160),m=a(26715),Q=a(5041),p=a(76714),y=a(28509),h=a(12115),B=a(10746),j=a(87626);let C=function(){let{isModalOpen:e,setIsModalOpen:t,edit:a,setEdit:C,editData:I,setEditData:x}=(0,y.d)(),[w,f]=i.Ay.useMessage(),k=(0,m.jE)(),v=(0,Q.n)({mutationFn:p.tA,onError:e=>{w.error(e.message)}}),N=(0,Q.n)({mutationFn:p.yW,onSuccess:()=>{w.success("Category created succesfully"),k.invalidateQueries({queryKey:["categories"]}),J()},onError:e=>{w.error(e.message)}}),S=(0,Q.n)({mutationFn:p.JW,onSuccess:()=>{w.success("Category updated succesfully"),k.invalidateQueries({queryKey:["categories"]}),J()},onError:e=>{w.error(e.message)}}),J=()=>{x({name:"",description:"",id:0,image_url:""}),C(!1),t(!1),b.resetFields()},[b]=s.A.useForm();return(0,h.useEffect)(()=>{b.setFieldsValue({name:I.name,description:I.description})},[I,b]),(0,r.jsxs)(r.Fragment,{children:[f,(0,r.jsxs)(n.A,{justify:"space-between",children:[(0,r.jsx)(j.default,{level:3,children:"Template Categories"}),(0,r.jsx)(o.Ay,{onClick:()=>{x({name:"",description:"",id:0,image_url:""}),C(!1),t(!0)},icon:(0,r.jsx)(g.A,{}),type:"primary",children:"Add Categories"})]}),(0,r.jsx)(A.A,{title:a?"Edit Categories":"Add Categories",open:e,onOk:()=>{b.submit()},okText:a?"Update":"Add",destroyOnClose:!0,okButtonProps:{loading:v.isPending||N.isPending},onCancel:J,children:(0,r.jsxs)(s.A,{form:b,onFinish:e=>{if(a){if(e.image){let t=new FormData;t.append("image_in",e.image[0].originFileObj),v.mutate(t,{onSuccess:t=>{let a={name:e.name,description:e.description,image_url:t.icon_url,id:I.id};S.mutate(a)}})}else{let t={name:e.name,description:e.description,id:I.id};S.mutate(t)}}else{let t=new FormData;t.append("image_in",e.image[0].originFileObj),v.mutate(t,{onSuccess:t=>{let a={name:e.name,description:e.description,image_url:t.icon_url};N.mutate(a)}})}},layout:"vertical",children:[(0,r.jsx)(s.A.Item,{rules:[{required:!0,message:"Please enter category name"}],required:!0,name:"name",label:"Name",children:(0,r.jsx)(c.A,{})}),(0,r.jsx)(s.A.Item,{rules:[{required:!0,message:"Please enter category description"}],required:!0,name:"description",label:"Description",children:(0,r.jsx)(c.A.TextArea,{})}),a&&(0,r.jsxs)(n.A,{gap:10,wrap:"wrap",style:{marginBottom:"20px"},children:[(0,r.jsx)(l.A,{children:"Curent image: "}),(0,r.jsx)(d.A,{alt:"category image",src:I.image_url,width:100,fallback:B.a,style:{width:"100px",height:"auto"}})]}),(0,r.jsx)(s.A.Item,{rules:[{required:!a,message:"Please upload category image"}],required:!a,valuePropName:"fileList",name:"image",getValueFromEvent:e=>Array.isArray(e)?e:null==e?void 0:e.fileList,label:a?"Update Image":"Upload Image",children:(0,r.jsxs)(E.A,{customRequest:e=>{let{onSuccess:t}=e;return setTimeout(()=>{t("ok",null)},0)},accept:"image/*",name:"file",maxCount:1,action:void 0,fileList:void 0,children:[(0,r.jsx)("p",{className:"ant-upload-drag-icon",children:(0,r.jsx)(u.A,{})}),(0,r.jsx)("p",{className:"ant-upload-text",children:"Click or drag receipt image to this area to upload"})]})})]})})]})}},42727:(e,t,a)=>{"use strict";a.d(t,{g:()=>i});var r=a(34477);let i=(0,r.createServerReference)("7ffd9cffc306d3cc4700af15a581e8279d0fc581d9",r.callServer,void 0,r.findSourceMapURL,"getSessionClient")},48896:(e,t,a)=>{Promise.resolve().then(a.bind(a,95658)),Promise.resolve().then(a.bind(a,34539)),Promise.resolve().then(a.bind(a,6642))},49561:(e,t,a)=>{"use strict";a.d(t,{f6:()=>o,y1:()=>A});var r=a(23464),i=a(42727),s=a(770);let n="https://backend.enimto.com/api/v1/",o=r.A.create({baseURL:n,headers:{"Content-Type":"application/json",accept:"application/json"}});o.interceptors.response.use(e=>e.data,e=>e.response?Promise.reject(e.response.data.detail):Promise.reject(e.message));let A=r.A.create({baseURL:n,headers:{"Content-Type":"application/json",accept:"application/json"}});A.interceptors.request.use(async e=>{let t=await (0,i.g)();return e.headers.Authorization="Bearer ".concat(t.access_token?t.access_token:"no_token"),e},e=>Promise.reject(e)),A.interceptors.response.use(e=>e.data,async e=>{if(!e.response)return Promise.reject(e.message);{let t=e.response.status,a=e.response.data.detail;return(403===t||401===t)&&await (0,s.l)(),Promise.reject(a)}})},76714:(e,t,a)=>{"use strict";a.d(t,{I7:()=>o,JW:()=>g,LZ:()=>c,Tj:()=>n,mn:()=>i,nt:()=>A,tA:()=>u,ub:()=>s,ul:()=>d,yW:()=>l});var r=a(49561);async function i(e){try{return await r.y1.post("templates/",e)}catch(e){throw Error(e)}}async function s(e,t){try{return await r.y1.put("templates/".concat(t),e)}catch(e){throw Error(e)}}async function n(e){try{return await r.y1.post("templates/upload-template-images/",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw Error(e)}}async function o(e){try{return await r.y1.delete("templates/".concat(e))}catch(e){throw Error(e)}}async function A(){try{return await r.y1.get("templates/?skip=0&limit=100")}catch(e){throw Error(e)}}async function c(){try{return await r.f6.get("categories/?skip=0&limit=100")}catch(e){throw Error(e)}}async function d(e){try{return await r.y1.delete("categories/".concat(e))}catch(e){throw Error(e)}}async function l(e){try{return await r.y1.post("categories/",e)}catch(e){throw Error(e)}}async function g(e){try{return await r.y1.put("categories/".concat(e.id),e)}catch(e){throw Error(e)}}async function u(e){try{return await r.y1.post("categories/upload-image",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw Error(e)}}},86917:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(95155),i=a(66766),s=a(98617),n=a(10746);let o=e=>{let{src:t,alt:a,preview:o,fallback:A,style:c,className:d,wrapperStyle:l}=e;return(0,r.jsx)(s.A,{preview:o,src:t,alt:a,style:{...c},wrapperStyle:{...l},className:d,fallback:A?n.a:void 0,placeholder:(0,r.jsx)(i.default,{src:t,alt:a,fill:!0,style:{objectFit:"cover"}})})}},95658:(e,t,a)=>{"use strict";a.d(t,{Card:()=>r.A,Flex:()=>i.A});var r=a(6124),i=a(17238)}},e=>{var t=t=>e(e.s=t);e.O(0,[4666,6449,6327,3876,3749,8646,8085,7325,6124,6922,1086,9186,5144,7845,3889,9237,2788,4714,534,3063,8220,1105,8617,6002,9584,2343,7110,4616,8073,8745,4390,8441,1684,7358],()=>t(48896)),_N_E=e.O()}]);