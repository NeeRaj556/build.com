(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4920],{10746:(e,t,a)=>{"use strict";a.d(t,{a:()=>l});let l="data:image/png;base64,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"},12388:(e,t,a)=>{"use strict";a.d(t,{N_:()=>s,a8:()=>o,rd:()=>c});var l=a(47830),i=a(43089);let n=(0,l.o)({locales:["en","nep"],defaultLocale:"en"}),{Link:s,redirect:r,usePathname:o,useRouter:c,getPathname:d}=(0,i.xp)(n)},15543:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var l=a(95155),i=a(12115),n=a(52200),s=a(77325),r=a(46002),o=a(72070),c=a(92057);let d={width:"100%",height:"500px"};function u(e){let{centerCoords:t,markerState:a,setMarkerState:o,placeName:d,setPlaceName:u}=e,[g,A]=(0,i.useState)(t),[m,p]=(0,i.useState)(!1),x=(0,i.useMemo)(()=>t||{lat:27.63820799904629,lng:85.51344372504178},[t]),{isLoaded:y}=(0,n.KD)({id:"google-map-script",googleMapsApiKey:"AIzaSyAvI6vu7WINuMtM6qBzmHO2m9r3U3jZBCo",libraries:["places"]});return y?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Ay,{onClick:()=>{p(!0)},type:"link",icon:(0,l.jsx)(c.A,{}),size:"small",block:!1,style:{width:"max-content"},children:"Open Map"}),(0,l.jsxs)(r.A,{title:"Map",open:m,onOk:()=>{p(!1)},onCancel:()=>{p(!1),o(x)},style:{top:20},width:800,children:[(0,l.jsx)(h,{markerState:a,setMarkerState:o,center:g,setCenterState:A,setPlaceName:u}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Selected Place:"})," ",d]})]})]}):(0,l.jsx)("div",{children:"Map Loading...."})}function h(e){let{markerState:t,setMarkerState:a,center:s,setCenterState:r,setPlaceName:c}=e,u=(0,i.useRef)(null),h=async(e,t)=>{new window.google.maps.Geocoder().geocode({location:{lat:e,lng:t}},(e,t)=>{"OK"===t?e[0]?c(e[0].formatted_address):c("No results found"):c("Geocoder failed due to: "+t)})};return(0,l.jsxs)(n.u6,{zoom:18,mapContainerStyle:d,center:s,onClick:e=>{let t=e.latLng.lat(),l=e.latLng.lng();a({lat:t,lng:l}),h(t,l)},children:[(0,l.jsx)(n.dj,{onLoad:e=>u.current=e,onPlacesChanged:()=>{let e=u.current.getPlaces();if(0===e.length)return;let t=e[0],l=t.geometry.location;a({lat:l.lat(),lng:l.lng()}),r({lat:l.lat(),lng:l.lng()}),c(t.formatted_address+" "+t.name)},children:(0,l.jsx)(o.A,{type:"text",placeholder:"Search location",style:{boxSizing:"border-box",border:"1px solid transparent",width:"240px",height:"32px",padding:"0 12px",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",fontSize:"14px",outline:"none",textOverflow:"ellipses",position:"absolute",left:"50%",marginLeft:"-120px",top:"10px",zIndex:"10"}})}),(0,l.jsx)(n.X0,{position:t,onDragEnd:e=>{var t,l;let i=(null===(t=e.latLng)||void 0===t?void 0:t.lat())||0,n=(null===(l=e.latLng)||void 0===l?void 0:l.lng())||0;a({lat:i,lng:n}),h(i,n)},draggable:!0})]})}},28240:e=>{e.exports={categoriesContainer:"style_categoriesContainer___E9_d",templateImagesContainer:"style_templateImagesContainer__EJ_3q",uploadText:"style_uploadText__2UVRj",loadingOverlay:"style_loadingOverlay__ZBKn_",imageContainer:"style_imageContainer__aeYK_",image:"style_image__NjMeu",overlay:"style_overlay__ad28q",overlayText:"style_overlayText__ulTkK"}},36379:()=>{},39341:()=>{},49561:(e,t,a)=>{"use strict";a.d(t,{f6:()=>r,y1:()=>o});var l=a(23464),i=a(86774),n=a(98243);let s="https://backend.enimto.com/api/v1/",r=l.A.create({baseURL:s,headers:{"Content-Type":"application/json",accept:"application/json"}});r.interceptors.response.use(e=>e.data,e=>e.response?Promise.reject(e.response.data.detail):Promise.reject(e.message));let o=l.A.create({baseURL:s,headers:{"Content-Type":"application/json",accept:"application/json"}});o.interceptors.request.use(async e=>{let t=await (0,i.g)();return e.headers.Authorization="Bearer ".concat(t.access_token?t.access_token:"no_token"),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e.data,async e=>{if(!e.response)return Promise.reject(e.message);{let t=e.response.status,a=e.response.data.detail;return(403===t||401===t)&&await (0,n.l)(),Promise.reject(a)}})},56683:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>J});var l=a(95155),i=a(79659),n=a(67841),s=a(77325),r=a(85189),o=a(35440),c=a(12115),d=a(37579),u=a(36768);let h=(0,c.forwardRef)((e,t)=>{let{template:a,selectedElementIndex:i,setSelectedElementIndex:n,updateContent:s,readOnly:r=!1}=e,[o,h]=(0,c.useState)(null),g=(0,c.useRef)(null),A=(0,c.useRef)([]);(0,c.useImperativeHandle)(t,()=>({captureImage:()=>g.current?g.current.toDataURL({pixelRatio:2,mimeType:"image/jpeg",quality:.9}):null}));let m=(0,c.useMemo)(()=>(e,t,l,i)=>({x:Math.floor(Math.max(0,Math.min(e,a.width-l))),y:Math.floor(Math.max(0,Math.min(t,a.height-i)))}),[a.width,a.height]);(0,c.useEffect)(()=>{if(a.background_image){let e=new Image;if(e.crossOrigin="anonymous",e.onload=()=>{h(e)},e.onerror=e=>{console.error("Image load error:",e),h(null)},a.background_image instanceof File){let t=URL.createObjectURL(a.background_image);return e.src=t,()=>URL.revokeObjectURL(t)}if("string"==typeof a.background_image){let t=a.background_image.includes("?")?"&":"?";e.src="/api/image-proxy?url=".concat(encodeURIComponent(a.background_image)).concat(t,"cache=").concat(Date.now())}}else h(null)},[a.background_image]);let p=e=>{n(e)};return a?(0,l.jsx)("div",{className:"stage-container",children:(0,l.jsx)(d.BI,{width:a.width,height:a.height,ref:g,onClick:e=>{e.target===e.target.getStage()&&n(null)},style:{background:"rgb(236, 236, 236)",boxShadow:"0 0 10px rgba(104, 104, 104, 0.1)",margin:"0 auto",width:a.width,height:a.height},children:(0,l.jsxs)(d.Wd,{children:[o&&(0,l.jsx)(d._V,{image:o,width:a.width,height:a.height}),a.contents.map((e,t)=>{let a=i===t;return(0,l.jsxs)(c.Fragment,{children:[a&&A.current[t]&&(0,l.jsx)(d.rw,{x:e.x-4,y:e.y-4,width:A.current[t].width()+8,height:A.current[t].height()+8,stroke:"#1890ff",strokeWidth:2,dash:[5,5]}),(0,l.jsx)(d.EY,{ref:e=>{A.current[t]=e},text:e.value,x:e.x,y:e.y,align:"center",fontSize:e.font_size||e.size,fontFamily:e.font_family,fill:"#".concat(e.color),fontStyle:"".concat(e.is_bold?"bold":""," ").concat(e.is_italic?"italic":"").trim(),draggable:!r,onClick:()=>p(t),onDragMove:e=>{if(r)return;let a=A.current[t].width(),l=A.current[t].height(),i=m(e.target.x(),e.target.y(),a,l);e.target.x(i.x),e.target.y(i.y)},onDragEnd:e=>{if(r)return;let a=A.current[t].width(),l=A.current[t].height(),i=m(e.target.x(),e.target.y(),a,l);s(t,{x:i.x,y:i.y})},stroke:e.has_border?"black":void 0,strokeWidth:+!!e.has_border})]},t)})]})})}):(0,l.jsx)(u.A,{description:"No template selected"})});var g=a(76714),A=a(56170),m=a(13921),p=a(46996),x=a(65927),y=a(33943),j=a(20890),v=a(19558),f=a(19373),b=a(35125),E=a(20534),w=a(72070),C=a(97226),k=a(31506),S=a(66188),_=a(89584),Q=a(13324),I=a(46143),B=a(26922),N=a(94600),T=a(17238),R=a(37974);let U=["ABeeZee","Abel","Abhaya Libre","Tangerine","Aboreto","Abril Fatface","Abyssinica SIL","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akaya Kanadaka","Akaya Telivigala","Akronim","Akshar","Aladin","Alata","Alatsi","Albert Sans","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Aleo","Alex Brush","Alexandria","Alfa Slab One","Alice","Alike","Alike Angular","Alkalami","Allan","Allerta","Allerta Stencil","Allison","Allura","Almarai","Almendra","Almendra Display","Almendra SC","Alumni Sans","Alumni Sans Collegiate One","Alumni Sans Inline One","Alumni Sans Pinstripe","Amarante","Amaranth","Amatic SC","Amethysta","Amiko","Amiri","Amiri Quran","Amita","Anaheim","Andada Pro","Andika","Anek Bangla","Anek Devanagari","Anek Gujarati","Anek Gurmukhi","Anek Kannada","Anek Latin","Anek Malayalam","Anek Odia","Anek Tamil","Anek Telugu","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Antonio","Anybody","Arapey"],{Title:F,Text:P}=n.A,{TabPane:z}=b.A,L=e=>U.map(t=>({value:t,label:(0,l.jsx)("span",{style:{fontFamily:t},children:e})})),D=e=>{let{template:t,updateTemplate:a,selectedElementIndex:i,updateContent:n,selectedContent:r,addContent:o,removeContent:c,handleBackgroundUpload:d,handleSave:u,readOnly:h=!1,setSelectedElementIndex:U,handleThumbnailUpload:D,loading:M,isUser:K}=e,{data:J,isLoading:q}=(0,f.I)({queryKey:["categories"],queryFn:g.LZ}),H=(e,t)=>!!e.type.startsWith("image/")&&("background"===t&&d(e),"thumbnail"===t&&D(e),!1);return(0,l.jsxs)("div",{className:"control-panel-content",children:[(0,l.jsxs)(b.A,{defaultActiveKey:"canvas",className:"control-tabs",children:[!K&&(0,l.jsx)(z,{tab:"Canvas",children:(0,l.jsxs)(E.A,{layout:"vertical",children:[(0,l.jsx)(E.A.Item,{label:"Title",children:(0,l.jsx)(w.A,{value:t.title,onChange:e=>a("title",e.target.value),disabled:h})}),(0,l.jsx)(E.A.Item,{label:"Canvas Size",children:(0,l.jsxs)(C.A,{children:[(0,l.jsx)(k.A,{addonBefore:"Width",min:200,max:3e3,value:t.width,onChange:e=>a("width",e),disabled:h}),(0,l.jsx)(k.A,{addonBefore:"Height",min:200,max:3e3,value:t.height,onChange:e=>a("height",e),disabled:h})]})}),(0,l.jsx)(E.A.Item,{label:"Background",children:(0,l.jsx)(S.A,{name:"background",listType:"picture-card",showUploadList:!1,beforeUpload:e=>H(e,"background"),disabled:h,children:t.background_image?(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("img",{src:"string"==typeof t.background_image?t.background_image:URL.createObjectURL(t.background_image),alt:"Background",style:{width:"100%"}}),(0,l.jsx)("div",{style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.65)",color:"#fff",cursor:"pointer",padding:"4px"},onClick:e=>{e.stopPropagation(),a("background_image",null)},children:(0,l.jsx)(A.A,{})})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)(m.A,{}),(0,l.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,l.jsx)(E.A.Item,{label:"Thumbnail",children:(0,l.jsx)(S.A,{name:"thumbnail",listType:"picture-card",showUploadList:!1,beforeUpload:e=>H(e,"thumbnail"),disabled:h,children:t.thumbnail_url?(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("img",{src:"string"==typeof t.thumbnail_url?t.thumbnail_url:URL.createObjectURL(t.thumbnail_url),alt:"thumbnail",style:{width:"100%"}}),(0,l.jsx)("div",{style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.65)",color:"#fff",cursor:"pointer",padding:"4px"},onClick:e=>{e.stopPropagation(),a("thumbnail_url",null)},children:(0,l.jsx)(A.A,{})})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)(m.A,{}),(0,l.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,l.jsx)(E.A.Item,{label:"Template Type",children:(0,l.jsx)(_.A,{popupMatchSelectWidth:!1,loading:q,options:null==J?void 0:J.map(e=>({value:e.id,label:e.name})),onChange:e=>a("category_id",e)})}),(0,l.jsx)(E.A.Item,{label:"Description",children:(0,l.jsx)(w.A.TextArea,{value:t.description||"",onChange:e=>a("description",e.target.value),rows:3,disabled:h})}),(0,l.jsx)(E.A.Item,{children:(0,l.jsxs)(C.A,{children:[(0,l.jsx)(Q.A,{checked:t.is_public,onChange:e=>a("is_public",e),disabled:h}),(0,l.jsx)(P,{children:"Public"})]})}),(0,l.jsx)(E.A.Item,{children:(0,l.jsxs)(C.A,{children:[(0,l.jsx)(Q.A,{checked:t.is_premium,onChange:e=>a("is_premium",e),disabled:h}),(0,l.jsx)(P,{children:"Premium"})]})}),t.is_premium&&(0,l.jsx)(E.A.Item,{label:"Price in Credits",children:(0,l.jsx)(k.A,{min:0,value:t.price_in_credits,onChange:e=>a("price_in_credits",e),disabled:h,style:{width:"100%"}})})]})},"canvas"),(0,l.jsxs)(z,{tab:"Text Elements",children:[!K&&!h&&(0,l.jsx)(s.Ay,{type:"dashed",icon:(0,l.jsx)(p.A,{}),onClick:()=>o(),block:!0,style:{marginBottom:16},children:"Add Text"}),null!==i&&r&&(0,l.jsxs)(E.A,{layout:"vertical",children:[(0,l.jsx)(F,{level:5,children:"Edit Text Element"}),(0,l.jsx)(s.Ay,{style:{width:"100%",marginBottom:12},onClick:()=>U(null),children:"Remove selection"}),(0,l.jsx)(E.A.Item,{label:"Text Content",children:(0,l.jsx)(w.A.TextArea,{value:r.value,onChange:e=>n(i,{value:e.target.value}),rows:3,disabled:h})}),(0,l.jsx)(E.A.Item,{label:"Position",children:(0,l.jsxs)(C.A,{children:[(0,l.jsx)(k.A,{addonBefore:"X",value:r.x,onChange:e=>n(i,{x:e}),disabled:h}),(0,l.jsx)(k.A,{addonBefore:"Y",value:r.y,onChange:e=>n(i,{y:e}),disabled:h})]})}),(0,l.jsx)(E.A.Item,{label:"Font",children:(0,l.jsx)(_.A,{value:r.font_family,onChange:e=>n(i,{font_family:e}),disabled:h,style:{width:"100%"},options:L(r.value)})}),(0,l.jsx)(E.A.Item,{label:"Font Size",children:(0,l.jsx)(k.A,{min:8,max:120,value:r.font_size||r.size,onChange:e=>n(i,{font_size:e,size:e}),disabled:h,style:{width:"100%"}})}),(0,l.jsx)(E.A.Item,{label:"Color",children:(0,l.jsx)(I.A,{value:r.color,onChange:e=>n(i,{color:e.toHex()}),disabled:h})}),(0,l.jsx)(E.A.Item,{children:(0,l.jsxs)(C.A,{children:[(0,l.jsx)(B.A,{title:"Bold",children:(0,l.jsx)(s.Ay,{icon:(0,l.jsx)(x.A,{}),type:r.is_bold?"primary":"default",onClick:()=>n(i,{is_bold:!r.is_bold}),disabled:h})}),(0,l.jsx)(B.A,{title:"Italic",children:(0,l.jsx)(s.Ay,{icon:(0,l.jsx)(y.A,{}),type:r.is_italic?"primary":"default",onClick:()=>n(i,{is_italic:!r.is_italic}),disabled:h})}),(0,l.jsx)(B.A,{title:"Border",children:(0,l.jsx)(s.Ay,{icon:(0,l.jsx)(j.A,{}),type:r.has_border?"primary":"default",onClick:()=>n(i,{has_border:!r.has_border}),disabled:h})})]})}),!K&&!h&&(0,l.jsx)(s.Ay,{danger:!0,icon:(0,l.jsx)(A.A,{}),onClick:()=>c(i),block:!0,children:"Remove Element"})]}),null===i&&t.contents.length>0&&(0,l.jsxs)("div",{className:"elements-list",children:[(0,l.jsx)(F,{level:5,children:"Select Element to Edit"}),t.contents.map((e,t)=>(0,l.jsx)("div",{className:"element-item",onClick:()=>U(t),children:(0,l.jsx)(P,{ellipsis:!0,style:{width:"100%"},children:e.value||"Empty text"})},t))]})]},"elements")]}),(0,l.jsx)(N.A,{style:{margin:"12px 0"}}),K&&null!==i?(0,l.jsx)(T.A,{className:"warning-message",justify:"center",children:(0,l.jsx)(R.A,{color:"red",children:"Remove Selection to continue"})}):(0,l.jsx)(s.Ay,{type:"primary",icon:K?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(v.A,{}),onClick:u,block:!0,disabled:K&&null!==i,loading:M,children:K?"Next":h?"Use Template":"Save Template"})]})};a(39341);let{Title:M}=n.A,K={title:"",subtitle:"",description:"",category_id:0,height:600,width:800,contents:[],is_public:!1,is_premium:!1,is_active:!0,background_image:null,price_in_credits:0,template_type:"",id:0,user_id:0,created_at:"",preview_images:[]},J=(0,c.forwardRef)((e,t)=>{let{initialTemplate:a={},onSave:n=()=>{},readOnly:d=!1,isUser:u=!1,loading:g=!1}=e,[A,m]=(0,c.useState)({...K,...{...a,background_image:null==a?void 0:a.file_url}}),p=(0,c.useRef)(null);(0,c.useImperativeHandle)(t,()=>({captureImage:()=>p.current?p.current.captureImage():null}));let[x,y]=(0,c.useState)(null),[j,v]=(0,c.useState)(window.innerWidth),[f,b]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let e=()=>{v(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let E=(e,t)=>{m(a=>{let l=[...a.contents];return l[e]={...l[e],...t},{...a,contents:l}})},w=(0,l.jsx)(D,{isUser:u,handleThumbnailUpload:e=>{e&&m(t=>({...t,thumbnail_url:e}))},setSelectedElementIndex:y,template:A,updateTemplate:(e,t)=>{m(a=>({...a,[e]:t}))},selectedElementIndex:x,updateContent:E,selectedContent:null!==x?A.contents[x]:null,addContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={value:"New Text",x:50,y:50,font_family:"Arial",color:"#000000",size:16,is_bold:!1,is_italic:!1,has_border:!1,font_size:16,...e};m(e=>({...e,contents:[...e.contents,t]})),y(A.contents.length)},removeContent:e=>{m(t=>({...t,contents:t.contents.filter((t,a)=>a!==e)})),x===e&&y(null)},handleBackgroundUpload:e=>{e&&m(t=>({...t,background_image:e}))},handleSave:()=>{try{n(A)}catch(e){console.error("Failed to save template")}},readOnly:d,loading:g}),C=(0,l.jsx)(s.Ay,{type:"primary",shape:"circle",icon:(0,l.jsx)(i.A,{}),size:"large",onClick:()=>b(!0),style:{position:"fixed",bottom:180,right:24,zIndex:1e3,boxShadow:"0 3px 6px rgba(0,0,0,0.16)"}});return(0,l.jsx)(l.Fragment,{children:j<=768?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h,{ref:p,template:A,selectedElementIndex:x,setSelectedElementIndex:y,updateContent:E,readOnly:d}),(0,l.jsx)(r.A,{title:"Template Editor",placement:"right",onClose:()=>b(!1),open:f,width:320,children:w}),C]}):(0,l.jsxs)(o.A,{style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},children:[(0,l.jsx)(o.A.Panel,{min:"25%",children:(0,l.jsx)(h,{ref:p,template:A,selectedElementIndex:x,setSelectedElementIndex:y,updateContent:E,readOnly:d})}),(0,l.jsx)(o.A.Panel,{defaultSize:"25%",resizable:!1,collapsible:!0,max:"25%",className:"",children:(0,l.jsxs)("div",{style:{padding:"1rem",overflowY:"auto",height:A.height},children:[(0,l.jsx)(M,{style:{textAlign:"center"},level:4,children:"Customize your template"}),w]})})]})})})},63829:(e,t,a)=>{"use strict";a.d(t,{default:()=>ec});var l=a(95155);let i=(0,a(88693).vt)(e=>({current:0,setCurrent:t=>e({current:t}),uploadedImage:void 0,imageSize:{width:0,height:0},template:void 0,fullData:void 0,eventResources:new FormData,templateData:void 0,setTemplateData:t=>e({templateData:t}),setEventResources:t=>e({eventResources:t}),setFullData:t=>e({fullData:t}),setImageSize:t=>e({imageSize:t}),setTemplate:t=>e({template:t}),setUploadedImage:t=>e({uploadedImage:t})}));var n=a(20534),s=a(6124),r=a(77517),o=a(12115),c=a(94326),d=a(17238),u=a(77325),h=a(16467),g=a(36768),A=a(56683),m=a(66766),p=a(81730);let x=function(){let{template:e,uploadedImage:t,templateData:a,setTemplate:n,setTemplateData:s,setImageSize:r,setCurrent:x}=i(),y=(0,o.useRef)(null),[j,v]=c.Ay.useMessage(),[f,b]=(0,o.useState)(!1),E=async e=>{if(y.current){b(!0);try{let t=y.current.captureImage();if(!t)throw Error("Failed to capture template image");let l=(null==a?void 0:a.width)||600,i=(null==a?void 0:a.height)||800;r({width:l,height:i});let o=await fetch(t),c=await o.blob();n(c),s(e),x(2),j.success("Template saved successfully!")}catch(e){console.error(e),j.error("Error saving template. Please try again.")}finally{b(!1)}}};return t&&!a?(0,l.jsxs)(l.Fragment,{children:[v,(0,l.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,l.jsx)("h3",{children:"Your uploaded design"}),(0,l.jsx)(m.default,{src:URL.createObjectURL(t),alt:"Uploaded design",width:300,height:400,style:{objectFit:"contain",maxHeight:"500px"}})]})]}):a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.A,{justify:"space-between",children:(0,l.jsx)(u.Ay,{onClick:()=>{x(0)},icon:(0,l.jsx)(p.A,{}),type:"link",children:"Go back"})}),v,f&&(0,l.jsx)("div",{style:{textAlign:"center",margin:"10px 0"},children:(0,l.jsx)(h.A,{tip:"Saving template..."})}),(0,l.jsx)(A.default,{ref:y,isUser:!0,initialTemplate:a,onSave:E})]}):(0,l.jsx)(g.A,{description:"Please select a template or upload your own design first"})};var y=a(15543),j=a(93758),v=a(89233),f=a(19373),b=a(72070),E=a(19361),w=a(74947),C=a(76741),k=a(89584),S=a(13324),_=a(66188),Q=a(46002),I=a(29911),B=a(86491),N=a(34477);let T=(0,N.createServerReference)("408b24c059db9e62262aa3bb5a8ea39bb16dec9e05",N.callServer,void 0,N.findSourceMapURL,"postUserCsvs"),R=(0,N.createServerReference)("7f47a994a1b5493ced969ae648911cb91ed3d04004",N.callServer,void 0,N.findSourceMapURL,"fetchUserCSV"),{Dragger:U}=_.A,F=e=>{var t,a,i,n;let{form:s,selectedCsvIds:r,setSelectedCsvIds:d}=e,[h,g]=(0,o.useState)([]),[A,m]=(0,o.useState)(!1),[p,x]=(0,o.useState)(!1),y=e=>{d(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id]);let t=s.getFieldValue("csv_ids")||[];t.includes(e.id)?s.setFieldValue("csv_ids",t.filter(t=>t!==e.id)):s.setFieldValue("csv_ids",[...t,e.id])},j=async e=>{x(!0);let t=c.Ay.loading("Uploading file...",0);try{let t=new FormData;t.append("file",e),t.append("name",e.name);let a=await (0,B.K3)(t);if(!a||!a.file_url)throw Error("Upload failed - invalid response");let l={name:e.name,file_url:a.file_url,guest_count:0},i=await T(l);if(null==i?void 0:i.id){let e=s.getFieldValue("csv_ids")||[];e.includes(i.id)||(s.setFieldValue("csv_ids",[...e,i.id]),d(e=>[...e,i.id]))}c.Ay.success("".concat(e.name," uploaded successfully"));let n=await R();return g(n),!0}catch(e){return c.Ay.error("Upload failed: ".concat(e.message||"Unknown error")),!1}finally{t(),x(!1)}};return(0,o.useEffect)(()=>{A&&R().then(e=>g(e)).catch(e=>{console.error("Error fetching CSV data:",e),c.Ay.error("Failed to load CSV files")})},[A]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{style:{width:"50%"},onClick:()=>m(!0),loading:p,children:"Upload CSV file"}),(0,l.jsxs)(Q.A,{title:"CSV Files",open:A,onCancel:()=>m(!1),footer:[(0,l.jsx)(u.Ay,{type:"primary",onClick:()=>m(!1),children:"Done"},"done")],width:600,children:[(0,l.jsxs)(U,{accept:".csv",name:"file",multiple:!0,fileList:[],beforeUpload:async e=>(await j(e),!1),customRequest:e=>{let{onSuccess:t}=e;setTimeout(()=>t("ok",null),0)},disabled:p,children:[(0,l.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload CSV"}),p&&(0,l.jsx)("p",{children:"Uploading..."})]}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{style:{fontWeight:"600"},children:"Your CSV Files"}),(0,l.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:"Click to select multiple files"}),(0,l.jsx)("br",{}),(0,l.jsx)("div",{style:{width:"100%",overflowX:"auto",maxHeight:"300px",overflowY:"auto"},children:h&&h.length>0?(0,l.jsx)("div",{className:"csv-list",children:h.map(e=>(0,l.jsxs)("div",{className:"csv-item ".concat(r.includes(e.id)?"selected":""),onClick:()=>y(e),style:{padding:"10px 12px",margin:"6px 0",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",borderRadius:"6px",border:r.includes(e.id)?"1px solid #1890ff":"1px solid #f0f0f0",backgroundColor:r.includes(e.id)?"#e6f7ff":"transparent",transition:"all 0.2s"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(I.EHs,{color:"gray"}),"\xa0\xa0",e.name]}),r.includes(e.id)&&(0,l.jsx)(I.CMH,{color:"#1890ff"})]},e.id))}):(0,l.jsx)("p",{children:"No CSV files found. Upload one to see it here."})})]}),(null===(t=s.getFieldValue("csv_ids"))||void 0===t?void 0:t.length)>0&&(0,l.jsxs)("div",{style:{marginTop:"8px"},children:[(0,l.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Selected CSV Files:"}),(0,l.jsx)("div",{style:{marginTop:"8px",width:"100%"},children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#e6f7ff",padding:"6px 12px",borderRadius:"4px",border:"1px solid #91d5ff"},children:[(0,l.jsx)(I.EHs,{size:14,color:"#1890ff",style:{marginRight:"8px"}}),(0,l.jsxs)("span",{children:[(null===(a=s.getFieldValue("csv_ids"))||void 0===a?void 0:a.length)||0," ",(null===(i=s.getFieldValue("csv_ids"))||void 0===i?void 0:i.length)===1?"file":"files"," ","selected"]}),(null===(n=s.getFieldValue("csv_ids"))||void 0===n?void 0:n.length)>0&&(0,l.jsx)(u.Ay,{size:"small",type:"text",danger:!0,style:{marginLeft:"auto"},onClick:()=>{d([]),s.setFieldValue("csv_ids",[])},children:"Clear all"})]})})]})]})};a(36379);let{TextArea:P}=b.A,z=e=>{let{form:t,center:a,markerState:r,setMarkerState:c}=e,{setCurrent:h}=i(),[g,A]=(0,o.useState)(""),[m,x]=(0,o.useState)([]),{data:_,isLoading:Q}=(0,f.I)({queryKey:["groups"],queryFn:j.Wx});return(0,o.useEffect)(()=>{t.setFieldsValue({locName:g})},[g,t]),(0,o.useEffect)(()=>{t.getFieldValue("csv_ids")||t.setFieldValue("csv_ids",[])},[t]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.A,{justify:"space-between",className:"mb-3",children:(0,l.jsx)(u.Ay,{onClick:()=>h(1),icon:(0,l.jsx)(p.A,{}),type:"link",children:"Go back"})}),(0,l.jsxs)(E.A,{gutter:[16,16],justify:"space-between",children:[(0,l.jsx)(w.A,{xs:24,lg:12,children:(0,l.jsxs)(s.A,{size:"small",title:"Event Details",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.08)",height:"100%"},children:[(0,l.jsx)(n.A.Item,{name:"title",label:"Event Title",rules:[{required:!0,message:"Please enter event title"}],children:(0,l.jsx)(b.A,{placeholder:"Enter event title"})}),(0,l.jsxs)(E.A,{gutter:16,children:[(0,l.jsx)(w.A,{span:12,children:(0,l.jsx)(n.A.Item,{name:"event_date",label:"Event Date From",rules:[{required:!0,message:"Please select a date"}],children:(0,l.jsx)(v.A,{hideDefaultValue:!0,defaultDate:null,language:"en",className:"w-full",style:{width:"100%"}})})}),(0,l.jsx)(w.A,{span:12,children:(0,l.jsx)(n.A.Item,{name:"_time",label:"Event Time From",valuePropName:"value",rules:[{required:!0,message:"Please select a time"}],children:(0,l.jsx)(C.A,{style:{width:"100%"}})})})]}),(0,l.jsxs)(E.A,{gutter:16,children:[(0,l.jsx)(w.A,{span:12,children:(0,l.jsx)(n.A.Item,{name:"event_date_to",label:"Event Date To",rules:[{required:!0,message:"Please select a date"}],children:(0,l.jsx)(v.A,{hideDefaultValue:!0,defaultDate:null,language:"en",className:"w-full",style:{width:"100%"}})})}),(0,l.jsx)(w.A,{span:12,children:(0,l.jsx)(n.A.Item,{name:"_time_to",label:"Event Time To",valuePropName:"value",rules:[{required:!0,message:"Please select a time"}],children:(0,l.jsx)(C.A,{style:{width:"100%"}})})})]}),(0,l.jsxs)(E.A,{gutter:16,children:[(0,l.jsx)(w.A,{span:12,children:(0,l.jsx)(n.A.Item,{name:"venue",label:"Venue",rules:[{required:!1,message:"Please enter venue name"}],children:(0,l.jsx)(b.A,{placeholder:"Venue name (optional)"})})}),(0,l.jsxs)(w.A,{span:12,children:[(0,l.jsx)(n.A.Item,{name:"locName",label:"Location",style:{marginBottom:"5px"},rules:[{required:!0,message:"Please select a location"}],children:(0,l.jsx)(b.A,{disabled:!0,placeholder:"Select on map below"})}),(0,l.jsx)(y.A,{centerCoords:a,markerState:r,setMarkerState:c,placeName:g,setPlaceName:A})]})]})]})}),(0,l.jsx)(w.A,{xs:24,lg:12,children:(0,l.jsxs)(s.A,{size:"small",title:"Hosts & Invitees",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[(0,l.jsx)(n.A.Item,{name:"host",label:"Event Host",rules:[{required:!0,message:"Host name is required"}],children:(0,l.jsx)(b.A,{placeholder:"Main host name"})}),(0,l.jsx)(n.A.Item,{name:"coHosts",label:"Co-Hosts",rules:[{required:!0,message:"Co-host information is required"}],tooltip:"Enter co-host names separated by commas",children:(0,l.jsx)(b.A,{placeholder:"Co-host name(s)"})}),(0,l.jsx)(n.A.Item,{name:"csv_ids",label:"CSV of Invitees",valuePropName:"value",style:{width:"100%"},rules:[{validator:(e,a)=>{var l,i;let n=(null===(l=t.getFieldValue("group_ids"))||void 0===l?void 0:l.length)>0,s=(null===(i=t.getFieldValue("csv_ids"))||void 0===i?void 0:i.length)>0;return n||s?Promise.resolve():Promise.reject("Please select at least one group or upload a CSV file")}}],children:(0,l.jsx)(F,{form:t,selectedCsvIds:m,setSelectedCsvIds:x})}),(0,l.jsx)(n.A.Item,{name:"group_ids",label:"Select your groups",style:{width:"100%"},children:(0,l.jsx)(k.A,{style:{width:"100%"},loading:Q,mode:"multiple",maxTagCount:"responsive",placeholder:"Select groups to invite",options:null==_?void 0:_.map(e=>({value:e.id,label:e.name}))})})]})})]}),(0,l.jsx)(E.A,{className:"mt-3",children:(0,l.jsx)(w.A,{span:24,children:(0,l.jsxs)(s.A,{size:"small",title:"Description & Settings",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[(0,l.jsx)(n.A.Item,{name:"description",label:"Event Description",rules:[{required:!0,message:"Please provide an event description"}],children:(0,l.jsx)(P,{style:{height:100,resize:"none"},showCount:!0,maxLength:500,placeholder:"Event description"})}),(0,l.jsx)(n.A.Item,{name:"sms",label:"SMS Message",tooltip:"Optional SMS message to send with invitations",children:(0,l.jsx)(P,{style:{height:100,resize:"none"},showCount:!0,maxLength:160,placeholder:"SMS message (optional)"})}),(0,l.jsx)(n.A.Item,{initialValue:!1,label:"Make event public?",name:"is_public",tooltip:"Public events can be discovered by anyone",children:(0,l.jsx)(S.A,{})})]})})}),(0,l.jsx)(u.Ay,{size:"large",htmlType:"submit",block:!0,type:"primary",className:"mt-4",children:"Next"})]})},L=function(e){let{form:t}=e,{setEventResources:a,setFullData:s,templateData:r,template:c,uploadedImage:d,setCurrent:u}=i(),h={lat:27.63820799904629,lng:85.51344372504178},[g,A]=(0,o.useState)(h),m={hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},p=async e=>{var t;let l=new FormData,{_time:i,event_date:n,locName:o,csv:h,...A}=e,p=i.$d.toLocaleTimeString("en-US",m);h&&(null===(t=h[0])||void 0===t?void 0:t.originFileObj)&&l.append("csv_file",h[0].originFileObj,"csv.csv");let x=c||d;x&&l.append("template",x,"file.png"),a(l),s({...A,event_date:"".concat(n.adDate,"T").concat(p),category_id:null==r?void 0:r.category_id,template_id:null==r?void 0:r.id,status:"draft",csv_url:"",template_url:"",location:{name:o,latitude:g.lat,longitude:g.lng},isOwn:!r}),u(3)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.A,{style:{display:"flex",flexDirection:"column",gap:"10px"},size:"middle",layout:"vertical",onFinish:p,form:t,initialValues:{_date:null},children:(0,l.jsx)(z,{center:h,markerState:g,setMarkerState:A,form:t})})})};var D=a(95891),M=a(12388),K=a(86917),J=a(26715),q=a(5041),H=a(95759);let O=function(){var e;let t=(0,M.rd)(),a=(0,J.jE)(),{breakpoint:n}=(0,H.l)(),{fullData:r,imageSize:o,eventResources:h,template:A,uploadedImage:m,setCurrent:x}=i(),[y,j]=c.Ay.useMessage(),v=(0,q.n)({mutationFn:B.K3,onError:e=>{y.error(e.message)}}),f=(0,q.n)({mutationFn:B.lh,onError:e=>{y.error(e.message)},onSuccess:(e,l)=>{y.success("Nimto sent successfully"),t.push("/user/create-event/success?status=".concat(l.status)),a.invalidateQueries({queryKey:["userData"]})}});if(!r||!(m||A))return(0,l.jsx)(g.A,{description:"Please complete previous steps first"});let b=e=>{v.mutate(h,{onSuccess:t=>{let{category_id:a,template_id:l,isOwn:i,...n}=r,s={...n,status:e,csv_ids:[],template_url:t.template_path};f.mutate(i?s:{...s,category_id:a,template_id:l})}})},{width:E,height:w}=((e,t,a)=>{let l=e>a?a:e;return{width:l,height:t/e*l}})(r.isOwn?330:o.width,o.height,330),C=URL.createObjectURL(((null==r?void 0:r.isOwn)?m:A)||new Blob);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{onClick:()=>{x(2)},icon:(0,l.jsx)(p.A,{}),type:"link",children:"Go back"}),j,(0,l.jsx)(d.A,{justify:"center",children:(0,l.jsxs)(s.A,{size:"small",style:{width:"100%"},children:[(0,l.jsxs)(d.A,{vertical:n,gap:20,children:[(0,l.jsx)("div",{style:{overflowX:"auto",width:n?"330px":"auto",margin:"0 auto"},children:(0,l.jsx)(K.A,{alt:"Event image",src:C,fallback:!0,style:{width:n?330:E,height:r.isOwn?"auto":w}})}),(0,l.jsx)(d.A,{vertical:!0,gap:20,wrap:"wrap",children:[{label:"Title",value:r.title},{label:"Description",value:(0,l.jsx)("p",{children:r.description})},{label:"Date",value:r.event_date.split("T")[0]},{label:"Time",value:null===(e=r.event_date.split("T")[1])||void 0===e?void 0:e.split(".")[0]},{label:"Venue",value:r.venue}].map(e=>{let{label:t,value:a}=e;return(0,l.jsx)(s.A,{variant:"outlined",size:"small",type:"inner",children:(0,l.jsxs)(d.A,{gap:100*!n,wrap:"wrap",justify:"space-between",children:[(0,l.jsxs)(D.A,{children:[t," :"]}),(0,l.jsx)(D.A,{children:a})]})},t)})})]}),(0,l.jsx)("br",{}),(0,l.jsxs)(d.A,{justify:"space-between",gap:16,children:[(0,l.jsx)(u.Ay,{loading:f.isPending||v.isPending,onClick:()=>b("draft"),block:!0,children:"Save as Draft"}),(0,l.jsx)(u.Ay,{type:"primary",block:!0,onClick:()=>b("active"),loading:f.isPending||v.isPending,children:"Send Invitations"})]})]})})]})};var Y=a(70445),V=a(86446);let G=(0,N.createServerReference)("7f99286fd920717f281f87d1bd96546b9e4a937f37",N.callServer,void 0,N.findSourceMapURL,"getSession");var Z=a(98243);let W="https://backend.enimto.com",X={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},$=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;try{let a=await fetch(e,{...t,cache:t.cache?t.cache:"no-store"});if(!a.ok){let l=await a.text();throw console.log(a.status,e,t.method),Error(l||"Unknown error")}return await a.json()}catch(l){if(a>0)return console.log("Retrying fetch. Attempts left: ".concat(a)),$(e,t,a-1);throw l}},ee=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=await G();if(!W)throw Error("API URL is not defined");let i="".concat(W).concat(e),n={...t,headers:{...X,...a,...t.headers,Authorization:"Bearer ".concat(l.access_token?l.access_token:"no_token")}};try{return await $(i,n)}catch(t){let e=t.status;throw(403===e||401===e)&&await (0,Z.l)(),t}},et=async e=>ee("/api/v1/templates/".concat(e),{method:"GET",cache:"no-store"});var ea=a(28240),el=a.n(ea);let ei=function(e){let{templates:t,limit:a,catId:n}=e,{setTemplateData:s,setUploadedImage:r,setImageSize:u,setCurrent:h}=i(),[A,p]=(0,o.useState)(null),[x,y]=c.Ay.useMessage(),j=async e=>{try{p(e.id),r(void 0);let t=await et("".concat(e.id));s(t),u({width:t.width||600,height:t.height||800}),h(1),x.success("Template selected successfully!")}catch(e){console.error("Error fetching template:",e),x.error("Failed to load template details. Please try again.")}finally{p(null)}},v=a?t.slice(0,6):t;return(0,l.jsxs)("div",{className:el().templateImagesContainer,children:[y,(null==v?void 0:v.length)!==0?(0,l.jsx)(l.Fragment,{children:v.map(e=>(0,l.jsxs)("div",{className:el().imageContainer,onClick:()=>j(e),style:{cursor:"pointer",position:"relative"},children:[A===e.id&&(0,l.jsx)("div",{className:el().loadingOverlay,children:"Loading..."}),"string"==typeof(null==e?void 0:e.thumbnail_url)&&(e.thumbnail_url.includes("http://")||e.thumbnail_url.includes("https://"))&&(0,l.jsx)(m.default,{src:null==e?void 0:e.thumbnail_url,alt:"template image",height:250,width:200,style:{objectFit:"cover",objectPosition:"center"}}),(0,l.jsx)("div",{className:el().overlay,children:(0,l.jsx)("div",{className:el().overlayText,children:"Use Template"})})]},e.id))}):(0,l.jsx)(d.A,{style:{width:"100%"},justify:"center",children:(0,l.jsx)(g.A,{description:"No template found"})})]})},en=function(e){let{category:t,templates:a,searchParams:i}=e,{token:{colorPrimary:n}}=Y.A.useToken(),[s,r]=V.Ay.useNotification();(0,o.useEffect)(()=>{"selectTemplate"===i&&s.error({description:"Please select a template or upload one",message:"Template not found",duration:5})},[i,s]);let[c,h]=(0,o.useState)(!0);return console.log("Templates",a,t),(0,l.jsxs)(l.Fragment,{children:[r,(0,l.jsxs)(d.A,{align:"center",justify:"space-between",children:[(0,l.jsx)(D.A,{style:{fontSize:"2rem",borderBottom:"3px solid ".concat(n)},children:t.name}),(0,l.jsx)(u.Ay,{onClick:()=>h(e=>!e),type:"link",children:"View All"})]}),(0,l.jsx)(ei,{catId:t.id,limit:c,templates:a})]})};var es=a(12160);let er=function(){let{setUploadedImage:e,setTemplateData:t,setCurrent:a}=i();return(0,l.jsx)(es.A,{style:{background:"#fc5b3f1d"},customRequest:e=>{let{onSuccess:t}=e;return setTimeout(()=>{t("ok",null)},0)},accept:"image/*",name:"file",maxCount:1,action:void 0,fileList:void 0,onRemove(){},async beforeUpload(l){if("image/jpeg"!==l.type&&"image/png"!==l.type&&"image/jpg"!==l.type)return _.A.LIST_IGNORE;e(l),t();let n=new Image;return n.onload=()=>{i.getState().setImageSize({width:n.width,height:n.height}),a(1)},n.src=URL.createObjectURL(l),!1},children:(0,l.jsx)("span",{className:el().uploadText,children:"Upload Your Own Design or Photo"})})},eo=function(e){let{templates:t,categories:a}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{marginTop:24,marginBottom:24},children:(0,l.jsx)(er,{})}),(0,l.jsx)(d.A,{vertical:!0,gap:24,children:a.map(e=>{let a=t.filter(t=>t.category.id===e.id);return(0,l.jsx)(en,{templates:a,category:e},e.id)})})]})},ec=e=>{let{templates:t,categories:a}=e,{template:o,uploadedImage:c,fullData:d,current:u,setCurrent:h}=i(),[g]=n.A.useForm(),A=[{title:"Select Template",content:(0,l.jsx)(eo,{templates:t,categories:a})},{title:"Customize",content:(0,l.jsx)(x,{})},{title:"Event Details",content:(0,l.jsx)(L,{form:g})},{title:"Preview & Send",content:(0,l.jsx)(O,{})}];return(0,l.jsxs)(s.A,{children:[(0,l.jsx)(r.A,{current:u,items:A.map(e=>({title:e.title}))}),(0,l.jsx)("div",{style:{margin:"24px 0",minHeight:"300px"},children:A[u].content})]})}},76714:(e,t,a)=>{"use strict";a.d(t,{I7:()=>r,JW:()=>h,LZ:()=>c,Tj:()=>s,mn:()=>i,nt:()=>o,tA:()=>g,ub:()=>n,ul:()=>d,yW:()=>u});var l=a(49561);async function i(e){try{return await l.y1.post("templates/",e)}catch(e){throw Error(e)}}async function n(e,t){try{return await l.y1.put("templates/".concat(t),e)}catch(e){throw Error(e)}}async function s(e){try{return await l.y1.post("templates/upload-template-images/",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw Error(e)}}async function r(e){try{return await l.y1.delete("templates/".concat(e))}catch(e){throw Error(e)}}async function o(){try{return await l.y1.get("templates/?skip=0&limit=100")}catch(e){throw Error(e)}}async function c(){try{return await l.f6.get("categories/?skip=0&limit=100")}catch(e){throw Error(e)}}async function d(e){try{return await l.y1.delete("categories/".concat(e))}catch(e){throw Error(e)}}async function u(e){try{return await l.y1.post("categories/",e)}catch(e){throw Error(e)}}async function h(e){try{return await l.y1.put("categories/".concat(e.id),e)}catch(e){throw Error(e)}}async function g(e){try{return await l.y1.post("categories/upload-image",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw Error(e)}}},86491:(e,t,a)=>{"use strict";a.d(t,{K3:()=>i,W8:()=>s,lh:()=>n});var l=a(49561);async function i(e){let t=new FormData;Array.from(e.entries()).forEach(e=>{let[a,l]=e;"template"===a&&l instanceof File?t.append("file",l):t.append(a,l)}),Array.from(t.entries()).forEach(e=>{let[t,a]=e;console.log("".concat(t,":"),a)});try{return await l.y1.post("files/upload/",t,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw Error("API Error: ".concat(e.message))}}async function n(e){try{return await l.y1.post("events/",e)}catch(e){throw Error(e)}}async function s(e){try{return await l.y1.post("events/",e)}catch(e){throw Error(e)}}},86774:(e,t,a)=>{"use strict";a.d(t,{g:()=>i});var l=a(34477);let i=(0,l.createServerReference)("7f2a6a67a7d279a82b25025e99ca3a830397cdc38b",l.callServer,void 0,l.findSourceMapURL,"getSessionClient")},86917:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var l=a(95155),i=a(66766),n=a(98617),s=a(10746);let r=e=>{let{src:t,alt:a,preview:r,fallback:o,style:c,className:d,wrapperStyle:u}=e;return(0,l.jsx)(n.A,{preview:r,src:t,alt:a,style:{...c},wrapperStyle:{...u},className:d,fallback:o?s.a:void 0,placeholder:(0,l.jsx)(i.default,{src:t,alt:a,fill:!0,style:{objectFit:"cover"}})})}},93758:(e,t,a)=>{"use strict";a.d(t,{Ni:()=>r,Wx:()=>i,cj:()=>o,rM:()=>n,wj:()=>s});var l=a(49561);async function i(){try{return await l.y1.get("group/")}catch(e){throw Error(e)}}async function n(e){console.log("Data in sendGroupResources:",e);try{return await l.y1.post("group/upload-resources/",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw Error(e)}}async function s(e){console.log("Data in createGroup:",e);try{return await l.y1.post("group/",e)}catch(e){throw Error(e)}}async function r(e){try{return await l.y1.delete("group/".concat(e))}catch(e){throw Error(e)}}async function o(e){let{data:t,id:a}=e;try{return await l.y1.put("group/".concat(a),t)}catch(e){throw Error(e)}}},95759:(e,t,a)=>{"use strict";a.d(t,{l:()=>l});let l=(0,a(88693).vt)(e=>({collapsed:!1,setCollapsed:t=>e({collapsed:t}),breakpoint:!0,setBreakpoint:t=>e({breakpoint:t})}))},98243:(e,t,a)=>{"use strict";a.d(t,{l:()=>i});var l=a(34477);let i=(0,l.createServerReference)("7f1a247a9be4835b7241064d2136726da767e5e7e5",l.callServer,void 0,l.findSourceMapURL,"destroySession")},98662:(e,t,a)=>{Promise.resolve().then(a.bind(a,45626)),Promise.resolve().then(a.bind(a,48882)),Promise.resolve().then(a.bind(a,63829))}},e=>{var t=t=>e(e.s=t);e.O(0,[3743,1706,9787,6084,6711,4666,86,3876,3749,8646,8085,7325,6124,6922,6874,9186,5144,7845,3889,9237,2788,4714,534,3063,5201,8617,6002,9584,2160,4989,1506,3280,8418,5958,1931,2164,8441,1684,7358],()=>t(98662)),_N_E=e.O()}]);