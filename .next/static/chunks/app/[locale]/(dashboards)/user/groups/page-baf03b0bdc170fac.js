(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5837],{4601:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r(12115),s=r(5041),n=r(49561),l=r(23464);let o=async e=>{try{return await n.y1.post("files/b2/get-upload-url/",e)}catch(e){throw Error(e)}},i=async(e,t,r,a)=>{try{let s=l.A.create();s.defaults.transformRequest=[];let n=await s.put(e,t,{headers:{"Content-Type":r},validateStatus:()=>!0,onUploadProgress:a});if(n.status>=200&&n.status<300)return n.data;throw Error("Upload failed with status ".concat(n.status,": ").concat(JSON.stringify(n.data)))}catch(e){if(console.error("B2 Upload Error:",e),e.response)throw Error(JSON.stringify(e.response.data)||"Upload failed");throw Error(e.message||"Upload failed")}},c=async e=>{try{return await n.y1.post("files/b2/confirm-upload/",e)}catch(e){throw Error(e)}};function u(){let e=function(){let[e,t]=(0,a.useState)({}),r=(0,a.useRef)({}),[n,l]=(0,a.useState)(!1),u=(0,s.n)({mutationFn:o}),d=(0,s.n)({mutationFn:e=>{let{uploadUrl:a,file:s,contentType:n,fileId:l}=e;return i(a,s,n,e=>{var a,s,n,o;let i=Math.round(100*e.loaded/e.total);t(e=>({...e,[l]:{...e[l],progress:i}})),(null===(s=r.current[l])||void 0===s?void 0:null===(a=s.options)||void 0===a?void 0:a.onProgress)&&(null===(n=(o=r.current[l].options).onProgress)||void 0===n||n.call(o,l,i))})}}),A=(0,s.n)({mutationFn:c}),g=(0,a.useCallback)(()=>"file_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),[]),p=(0,a.useCallback)((e,a)=>{let s=g(),n={id:s,file:e,options:a,status:"queued",progress:0};return t(e=>({...e,[s]:n})),r.current[s]=n,!1!==a.autoUpload&&f(s).catch(console.error),s},[]),f=(0,a.useCallback)(async e=>{var a,s;let n=r.current[e];if(!n)throw Error("File with ID ".concat(e," not found in queue"));let{file:o,options:i}=n;t(t=>({...t,[e]:{...t[e],status:"uploading"}}));try{l(!0);let s=await u.mutateAsync({file_name:o.name,content_type:o.type,folder:i.folder||"",metadata:i.metadata||{},purpose:i.purpose,description:i.description});if((null==s?void 0:s.status)!=="success"||!(null==s?void 0:s.upload_url))throw Error("Failed to get upload URL");await d.mutateAsync({uploadUrl:s.upload_url,file:o,contentType:s.content_type,fileId:e});let n=await A.mutateAsync({file_name:s.file_name,storage_path:s.storage_path});if((null==n?void 0:n.status)!=="success")throw Error("Failed to confirm upload");let c={fileId:n.file_id,fileName:n.file_name,downloadUrl:n.download_url,publicUrl:n.public_url,status:"success"};return t(t=>({...t,[e]:{...t[e],status:"success",progress:100,result:c}})),r.current[e]={...r.current[e],status:"success",progress:100,result:c},null===(a=i.onSuccess)||void 0===a||a.call(i,n),c}catch(n){let a=n instanceof Error?n:Error(String(n));throw t(t=>({...t,[e]:{...t[e],status:"error",error:a}})),r.current[e]={...r.current[e],status:"error",error:a},null===(s=i.onError)||void 0===s||s.call(i,a),a}finally{Object.values(r.current).every(e=>"success"===e.status||"error"===e.status)&&l(!1)}},[]),h=(0,a.useCallback)(async()=>{let e=Object.keys(r.current).filter(e=>"queued"===r.current[e].status);return 0===e.length?[]:(await Promise.allSettled(e.map(e=>f(e)))).map((t,a)=>{var s;return"fulfilled"===t.status?t.value:{fileId:-1,fileName:(null===(s=r.current[e[a]])||void 0===s?void 0:s.file.name)||"unknown",downloadUrl:"",publicUrl:"",status:"error",error:t.reason}})},[f]),m=(0,a.useCallback)(async(e,t)=>f(p(e,{...t,autoUpload:!1})),[p,f]),E=(0,a.useCallback)(()=>{t({}),r.current={}},[]);return{files:e,queueFile:p,uploadFile:f,uploadAllFiles:h,uploadFileDirect:m,removeFile:(0,a.useCallback)(e=>{t(t=>{let r={...t};return delete r[e],r}),delete r.current[e]},[]),clearFiles:E,isUploading:n,errors:Object.values(e).filter(e=>"error"===e.status).map(e=>e.error)}}();return{...e,triggerUpload:e.uploadAllFiles}}},9077:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var a=r(95155),s=r(64778),n=r(86769),l=r(17238),o=r(12115),i=r(87626),c=r(41923);let u=function(e){let{hastitle:t=!0}=e,[r,u]=(0,o.useState)(!1);return(0,a.jsxs)(l.A,{justify:"space-between",children:[t&&(0,a.jsx)(i.default,{level:3,children:"Your Groups"}),(0,a.jsx)(s.default,{type:"link",onClick:()=>{u(!0)},icon:(0,a.jsx)(n.A,{}),children:"Create Group"}),(0,a.jsx)(c.A,{isModalOpen:r,handleCancel:()=>{u(!1)},handleOk:()=>{u(!1)},flag:"create"})]})}},10746:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});let a="data:image/png;base64,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"},12388:(e,t,r)=>{"use strict";r.d(t,{N_:()=>l,a8:()=>i,rd:()=>c});var a=r(47830),s=r(43089);let n=(0,a.o)({locales:["en","nep"],defaultLocale:"en"}),{Link:l,redirect:o,usePathname:i,useRouter:c,getPathname:u}=(0,s.xp)(n)},41923:(e,t,r)=>{"use strict";r.d(t,{A:()=>j});var a=r(95155),s=r(93758),n=r(4601),l=r(12388),o=r(26715),i=r(5041),c=r(94326),u=r(20534),d=r(46002),A=r(12115),g=r(86917),p=r(72070),f=r(17238),h=r(77325),m=r(95891),E=r(12160),y=r(29911);let Q=(0,A.forwardRef)((e,t)=>{let{form:r,onFinish:s,handleCancel:l,groupMutation:o,editMutation:i,flag:c,editData:Q}=e,[j,v]=(0,A.useState)(!1),[C,x]=(0,A.useState)([]),[k,B]=(0,A.useState)(null),{isUploading:S}=(0,n.Z)();(0,A.useImperativeHandle)(t,()=>({selectedFiles:C,imageFile:k}));let w=e=>{x(t=>t.find(t=>t.name===e.name)?t.filter(t=>t.name!==e.name):[...t,e])},b=e=>{x(t=>t.filter(t=>t.name!==e))},I=()=>{v(!1)},N={accept:"image/*",name:"file",maxCount:1,fileList:k?[{uid:"-1",name:k.name,status:"done",originFileObj:k}]:[],beforeUpload:e=>(B(e),!1),onRemove:()=>{B(null),r.setFieldValue("image",[])},customRequest:e=>{let{onSuccess:t}=e;setTimeout(()=>t("ok",null),0)}};return(0,A.useEffect)(()=>{Q&&r.setFieldsValue({name:Q.name,description:Q.description})},[Q,r]),(0,a.jsxs)(u.A,{form:r,onFinish:s,layout:"vertical",children:[(0,a.jsx)(u.A.Item,{name:"name",label:"Group Name",rules:[{required:!0,message:"Please write a group name."}],children:(0,a.jsx)(p.A,{})}),(null==Q?void 0:Q.image_url)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.A,{wrap:"wrap",gap:10,align:"flex-top",children:[(0,a.jsx)(m.A,{children:"Current Image:"}),(0,a.jsx)(g.A,{style:{height:"auto",width:150},alt:"group image",fallback:!0,src:Q.image_url})]}),(0,a.jsx)("br",{})]}),(0,a.jsx)(u.A.Item,{name:"image",label:"Group Image",children:(0,a.jsx)(E.A,{...N,children:(0,a.jsx)("p",{className:"ant-upload-text",children:"Click or drag image to this area to upload group image."})})}),(0,a.jsxs)(u.A.Item,{name:"csv_files",label:"CSV of Invitees",children:[(0,a.jsx)(h.Ay,{style:{width:"50%"},onClick:()=>{v(!0)},disabled:S,children:"Select CSV files"}),(0,a.jsx)(d.A,{title:"Select CSV Files",open:j,onCancel:I,footer:[(0,a.jsx)(h.Ay,{type:"primary",onClick:I,children:"Done"},"done")],width:600,children:(0,a.jsx)(E.A,{accept:".csv",name:"file",multiple:!0,fileList:[],beforeUpload:e=>(w(e),!1),customRequest:e=>{let{onSuccess:t}=e;setTimeout(()=>t("ok",null),0)},disabled:S,children:(0,a.jsx)("p",{className:"ant-upload-text",children:"Click or drag CSV files to this area to select them"})})}),C.length>0&&(0,a.jsxs)("div",{style:{marginTop:"8px"},children:[(0,a.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:"Selected CSV Files:"}),(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:C.map(e=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#e6f7ff",padding:"6px 12px",borderRadius:"4px",border:"1px solid #91d5ff"},children:[(0,a.jsx)(y.EHs,{size:14,color:"#1890ff",style:{marginRight:"8px"}}),(0,a.jsx)("span",{style:{flex:1},children:e.name}),(0,a.jsx)(h.Ay,{size:"small",type:"text",danger:!0,onClick:()=>b(e.name),children:"Remove"})]},e.name))}),(0,a.jsx)(h.Ay,{size:"small",type:"text",danger:!0,style:{marginTop:"8px"},onClick:()=>x([]),children:"Clear all"})]})]}),(0,a.jsx)(u.A.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please write a group description!"}],children:(0,a.jsx)(p.A.TextArea,{})}),(0,a.jsxs)(f.A,{justify:"space-between",wrap:"wrap",children:[(0,a.jsx)(h.Ay,{onClick:l,children:"Cancel"}),(0,a.jsx)(h.Ay,{loading:(null==o?void 0:o.isPending)||(null==i?void 0:i.isPending)||S,htmlType:"submit",type:"primary",children:"Send"})]})]})});Q.displayName="GroupForm";let j=function(e){let{isModalOpen:t,handleCancel:r,handleOk:g,flag:p,editData:f}=e,h=(0,l.rd)(),[m,E]=c.Ay.useMessage(),{uploadFileDirect:y}=(0,n.Z)(),j=(0,A.useRef)([]),v=(0,A.useRef)(null),C=(0,o.jE)(),x=(0,i.n)({mutationFn:s.wj,onError:e=>m.error(e.message),onSuccess:()=>{S.resetFields(),j.current=[],v.current=null,h.refresh(),C.invalidateQueries({queryKey:["groups"]}),m.success("Group created successfully!"),g()}}),k=(0,i.n)({mutationFn:s.cj,onError:e=>m.error(e.message),onSuccess:()=>{h.refresh(),S.resetFields(),j.current=[],v.current=null,m.success("Group edited successfully!"),g()}}),B=async e=>{try{let t=c.Ay.loading("Processing...",0),r=(null==f?void 0:f.image_file_id)||0,a=[];if(v.current)try{let t=await y(v.current,{purpose:"group_image",description:"Group image: ".concat(e.name),folder:"group-images"});if("success"===t.status)r=t.fileId;else throw Error("Image upload failed")}catch(e){t(),m.error("Failed to upload image");return}if(j.current.length>0)try{let t=j.current.map(t=>y(t,{purpose:"csv_import",description:"CSV file for group: ".concat(e.name),folder:"csv-files"}));if((a=(await Promise.all(t)).filter(e=>"success"===e.status).map(e=>e.fileId)).length!==j.current.length)throw Error("Some CSV files failed to upload")}catch(e){t(),m.error("Failed to upload CSV files");return}let s={name:e.name,description:e.description,image_url:(null==f?void 0:f.image_url)||"",image_file_id:r,csv_ids:a.length>0?a:(null==f?void 0:f.csv_ids)||[]};t(),"create"===p?x.mutate(s):"edit"===p&&k.mutate({data:s,id:(null==f?void 0:f.id)||0})}catch(e){m.error(e.message||"An error occurred")}},[S]=u.A.useForm();return(0,a.jsxs)(d.A,{title:"create"===p?"Create Group":"Edit Group",open:t,onOk:g,onCancel:r,footer:null,destroyOnClose:!0,children:[E,(0,a.jsx)(Q,{ref:e=>{e&&(j.current=e.selectedFiles||[],v.current=e.imageFile||null)},editData:f,flag:p,form:S,onFinish:B,handleCancel:r,groupMutation:x,editMutation:k})]})}},49078:(e,t,r)=>{"use strict";r.d(t,{Card:()=>a.A,Empty:()=>s.A});var a=r(6124),s=r(36768)},49561:(e,t,r)=>{"use strict";r.d(t,{f6:()=>d,th:()=>g,y1:()=>A});var a=r(23464),s=r(66608),n=r(51210),l=r(72508),o=r(49509);let i=o.env.NEXT_PUBLIC_API_URL,c=i+"/api/v1/",u=i+"/api/v2/",d=a.A.create({baseURL:c,headers:{"Content-Type":"application/json",accept:"application/json"}}),A=a.A.create({baseURL:c,headers:{"Content-Type":"application/json",accept:"application/json"}}),g=a.A.create({baseURL:u,headers:{"Content-Type":"application/json",accept:"application/json"}}),p=[A,a.A.create({baseURL:u,headers:{"Content-Type":"application/json",accept:"application/json"}})];[d,g].forEach(e=>{e.interceptors.response.use(e=>e.data,e=>e.response?Promise.reject(e.response.data.detail):Promise.reject(e.message))}),p.forEach(e=>{e.interceptors.request.use(async e=>{let t=await (0,s.g)();return e.headers.Authorization="Bearer ".concat(t.access_token?t.access_token:"no_token"),e},e=>Promise.reject(e))});let f=!1,h=null,m=[],E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;m.forEach(r=>{let{resolve:a,reject:s,config:n}=r;e?s(e):(t&&(n.headers.Authorization="Bearer ".concat(t)),a(n))}),m=[]};p.forEach(e=>{e.interceptors.response.use(e=>e.data,async t=>{var r,a,l;let o=t.config;if((null===(r=t.response)||void 0===r?void 0:r.status)===401&&!o._retry){if(o._retry=!0,f)return new Promise((e,t)=>{m.push({resolve:e,reject:t,config:o})}).then(t=>e(t));h||(f=!0,h=y());try{if(!await h)return E("Session expired. Please login again."),await (0,n.l)(),Promise.reject("Session expired. Please login again.");{let t=await (0,s.g)();return o.headers.Authorization="Bearer ".concat(t.access_token),E(null,t.access_token),e(o)}}catch(e){return E("Authentication failed. Please login again."),await (0,n.l)(),Promise.reject("Authentication failed. Please login again.")}finally{setTimeout(()=>{h=null,f=!1},100)}}if(!t.response)return Promise.reject(t.message);{let e=t.response.status,r=(null===(a=t.response.data)||void 0===a?void 0:a.detail)||(null===(l=t.response.data)||void 0===l?void 0:l.message)||"An error occurred";return 403===e&&await (0,n.l)(),Promise.reject(r)}})});let y=async()=>{try{let e=await (0,s.g)();if(!(null==e?void 0:e.refresh_token))return await (0,n.l)(),!1;let t=o.env.NEXT_PUBLIC_API_URL;if(!t)throw Error("API URL is not defined");let r=await fetch("".concat(t,"/api/v1/refresh-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e.refresh_token}),cache:"no-store"});if(!r.ok)return await (0,n.l)(),!1;let a=await r.json(),i={...e,access_token:a.access_token,refresh_token:a.refresh_token||e.refresh_token};return await (0,l.N)(i),!0}catch(e){return console.error("Token refresh failed:",e),await (0,n.l)(),!1}}},50369:(e,t,r)=>{Promise.resolve().then(r.bind(r,49078)),Promise.resolve().then(r.bind(r,45626)),Promise.resolve().then(r.bind(r,48882)),Promise.resolve().then(r.bind(r,9077)),Promise.resolve().then(r.bind(r,62020))},51210:(e,t,r)=>{"use strict";r.d(t,{l:()=>s});var a=r(34477);let s=(0,a.createServerReference)("7f94a4f5be4bbe86ff28602338eb3b1e17757bda33",a.callServer,void 0,a.findSourceMapURL,"destroySession")},61860:e=>{e.exports={floatButton:"styles_floatButton__HeivV"}},62020:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var a=r(95155),s=r(12115),n=r(70445),l=r(94326),o=r(6124),i=r(17238),c=r(28562),u=r(77325),d=r(27212),A=r(46002),g=r(86917),p=r(95891),f=r(96097),h=r(52092),m=r(79659),E=r(56170),y=r(87626),Q=r(5041),j=r(93758),v=r(12388),C=r(41923);let x=function(e){var t,r;let{data:A}=e,y=(0,v.rd)(),{token:{colorSuccess:x,colorError:B,colorWarning:S}}=n.A.useToken(),[w,b]=l.Ay.useMessage(),[I,N]=(0,s.useState)(!1),[R,U]=(0,s.useState)(!1),[J,P]=(0,s.useState)(!1),F=(0,Q.n)({mutationFn:j.Ni,onSuccess:e=>{P(!1),w.success("Group ".concat(e.name," deleted successfully!")),y.refresh()},onError:e=>{w.error("Failed to delete group.")}});return console.log(null===(t=A.image_file)||void 0===t?void 0:t.presigned_url),(0,a.jsxs)("div",{style:{padding:"5px 0"},children:[b,(0,a.jsxs)(o.A,{hoverable:!0,size:"small",children:[(0,a.jsxs)(i.A,{justify:"space-between",children:[(0,a.jsxs)(i.A,{gap:15,children:[(0,a.jsx)(c.A,{style:{border:"none"},size:45,icon:A.image_url?(0,a.jsx)(g.A,{alt:"group image",fallback:!0,src:(null==A?void 0:null===(r=A.image_file)||void 0===r?void 0:r.presigned_url)||A.image_url}):(0,a.jsx)(f.A,{})}),(0,a.jsx)(p.A,{style:{paddingTop:"5px"},children:A.name})]}),(0,a.jsxs)(i.A,{gap:15,children:[(0,a.jsx)(u.Ay,{onClick:()=>{N(!0)},type:"link",icon:(0,a.jsx)(h.A,{style:{color:x,fontSize:20}})}),(0,a.jsx)(u.Ay,{type:"link",onClick:()=>U(!0),icon:(0,a.jsx)(m.A,{style:{color:S,fontSize:20}})}),(0,a.jsx)(d.A,{title:"Delete the group",description:"Are you sure to delete this group?",open:J,onConfirm:()=>{F.mutate(A.id)},okButtonProps:{loading:F.isPending},okText:"Yes",cancelText:"No",children:(0,a.jsx)(u.Ay,{type:"link",onClick:()=>P(!0),icon:(0,a.jsx)(E.A,{style:{color:B,fontSize:20}}),danger:!0})})]})]}),(0,a.jsx)(k,{isModalOpen:I,handleOk:()=>{N(!1)},handleCancel:()=>{N(!1)},data:A}),(0,a.jsx)(C.A,{editData:A,isModalOpen:R,handleCancel:()=>{U(!1)},handleOk:()=>{U(!1)},flag:"edit"})]})]})};function k(e){let{isModalOpen:t,handleOk:r,handleCancel:s,data:n}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(A.A,{title:"View Group Details",open:t,onCancel:s,footer:null,children:[(0,a.jsxs)(i.A,{gap:8,children:[n.image_url?(0,a.jsx)(g.A,{alt:"group image",style:{height:100,width:150},fallback:!0,src:n.image_url}):(0,a.jsx)(c.A,{size:60,icon:(0,a.jsx)(f.A,{})}),(0,a.jsx)(y.default,{level:2,children:n.name})]}),(0,a.jsx)("br",{}),(0,a.jsx)(o.A,{size:"small",children:n.description})]})})}},64778:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(95155),s=r(70445),n=r(77325);r(12115);var l=r(61860),o=r.n(l);let i=function(e){let{onClick:t,icon:r,children:l,type:i,style:c}=e,{token:{colorBgBase:u}}=s.A.useToken();return(0,a.jsx)("div",{style:{...c,background:u},className:o().floatButton,onClick:t,children:(0,a.jsx)(n.Ay,{block:!0,size:"large",icon:r,type:i,children:l})})}},66608:(e,t,r)=>{"use strict";r.d(t,{g:()=>s});var a=r(34477);let s=(0,a.createServerReference)("7f6ef96e8b0ebd5011563da96c6f189e5e4212342a",a.callServer,void 0,a.findSourceMapURL,"getSessionClient")},72508:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});var a=r(34477);let s=(0,a.createServerReference)("7f89c1213494ea9ff4952ae407cec9eb241e36637e",a.callServer,void 0,a.findSourceMapURL,"setSession")},86917:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(95155),s=r(66766),n=r(98617),l=r(10746);let o=e=>{let{src:t,alt:r,preview:o,fallback:i,style:c,className:u,wrapperStyle:d}=e;return(0,a.jsx)(n.A,{preview:o,src:t,alt:r,style:{...c},wrapperStyle:{...d},className:u,fallback:i?l.a:void 0,placeholder:(0,a.jsx)(s.default,{src:t,alt:r,fill:!0,style:{objectFit:"cover"}})})}},93758:(e,t,r)=>{"use strict";r.d(t,{Ni:()=>l,Wx:()=>s,cj:()=>o,wj:()=>n});var a=r(49561);async function s(){try{return await a.y1.get("group/")}catch(e){throw Error(e)}}async function n(e){console.log("Data in createGroup:",e);try{return await a.y1.post("group/",e)}catch(e){throw Error(e)}}async function l(e){try{return await a.y1.delete("group/".concat(e))}catch(e){throw Error(e)}}async function o(e){let{data:t,id:r}=e;try{return await a.y1.put("group/".concat(r),t)}catch(e){throw Error(e)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2027,6711,4666,6449,6327,3876,3749,8646,8085,7325,6124,6922,6874,9186,7845,5144,2788,3889,9237,534,4714,3063,998,6002,7110,8745,3741,6358,8441,1684,7358],()=>t(50369)),_N_E=e.O()}]);