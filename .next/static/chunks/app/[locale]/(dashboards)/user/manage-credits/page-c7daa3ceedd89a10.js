(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5189],{4601:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r(12115),n=r(5041),s=r(49561),l=r(23464);let o=async e=>{try{return await s.y1.post("files/b2/get-upload-url/",e)}catch(e){throw Error(e)}},i=async(e,t,r,a)=>{try{let n=l.A.create();n.defaults.transformRequest=[];let s=await n.put(e,t,{headers:{"Content-Type":r},validateStatus:()=>!0,onUploadProgress:a});if(s.status>=200&&s.status<300)return s.data;throw Error("Upload failed with status ".concat(s.status,": ").concat(JSON.stringify(s.data)))}catch(e){if(console.error("B2 Upload Error:",e),e.response)throw Error(JSON.stringify(e.response.data)||"Upload failed");throw Error(e.message||"Upload failed")}},c=async e=>{try{return await s.y1.post("files/b2/confirm-upload/",e)}catch(e){throw Error(e)}};function d(){let e=function(){let[e,t]=(0,a.useState)({}),r=(0,a.useRef)({}),[s,l]=(0,a.useState)(!1),d=(0,n.n)({mutationFn:o}),u=(0,n.n)({mutationFn:e=>{let{uploadUrl:a,file:n,contentType:s,fileId:l}=e;return i(a,n,s,e=>{var a,n,s,o;let i=Math.round(100*e.loaded/e.total);t(e=>({...e,[l]:{...e[l],progress:i}})),(null===(n=r.current[l])||void 0===n?void 0:null===(a=n.options)||void 0===a?void 0:a.onProgress)&&(null===(s=(o=r.current[l].options).onProgress)||void 0===s||s.call(o,l,i))})}}),A=(0,n.n)({mutationFn:c}),g=(0,a.useCallback)(()=>"file_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),[]),p=(0,a.useCallback)((e,a)=>{let n=g(),s={id:n,file:e,options:a,status:"queued",progress:0};return t(e=>({...e,[n]:s})),r.current[n]=s,!1!==a.autoUpload&&h(n).catch(console.error),n},[]),h=(0,a.useCallback)(async e=>{var a,n;let s=r.current[e];if(!s)throw Error("File with ID ".concat(e," not found in queue"));let{file:o,options:i}=s;t(t=>({...t,[e]:{...t[e],status:"uploading"}}));try{l(!0);let n=await d.mutateAsync({file_name:o.name,content_type:o.type,folder:i.folder||"",metadata:i.metadata||{},purpose:i.purpose,description:i.description});if((null==n?void 0:n.status)!=="success"||!(null==n?void 0:n.upload_url))throw Error("Failed to get upload URL");await u.mutateAsync({uploadUrl:n.upload_url,file:o,contentType:n.content_type,fileId:e});let s=await A.mutateAsync({file_name:n.file_name,storage_path:n.storage_path});if((null==s?void 0:s.status)!=="success")throw Error("Failed to confirm upload");let c={fileId:s.file_id,fileName:s.file_name,downloadUrl:s.download_url,publicUrl:s.public_url,status:"success"};return t(t=>({...t,[e]:{...t[e],status:"success",progress:100,result:c}})),r.current[e]={...r.current[e],status:"success",progress:100,result:c},null===(a=i.onSuccess)||void 0===a||a.call(i,s),c}catch(s){let a=s instanceof Error?s:Error(String(s));throw t(t=>({...t,[e]:{...t[e],status:"error",error:a}})),r.current[e]={...r.current[e],status:"error",error:a},null===(n=i.onError)||void 0===n||n.call(i,a),a}finally{Object.values(r.current).every(e=>"success"===e.status||"error"===e.status)&&l(!1)}},[]),m=(0,a.useCallback)(async()=>{let e=Object.keys(r.current).filter(e=>"queued"===r.current[e].status);return 0===e.length?[]:(await Promise.allSettled(e.map(e=>h(e)))).map((t,a)=>{var n;return"fulfilled"===t.status?t.value:{fileId:-1,fileName:(null===(n=r.current[e[a]])||void 0===n?void 0:n.file.name)||"unknown",downloadUrl:"",publicUrl:"",status:"error",error:t.reason}})},[h]),f=(0,a.useCallback)(async(e,t)=>h(p(e,{...t,autoUpload:!1})),[p,h]),E=(0,a.useCallback)(()=>{t({}),r.current={}},[]);return{files:e,queueFile:p,uploadFile:h,uploadAllFiles:m,uploadFileDirect:f,removeFile:(0,a.useCallback)(e=>{t(t=>{let r={...t};return delete r[e],r}),delete r.current[e]},[]),clearFiles:E,isUploading:s,errors:Object.values(e).filter(e=>"error"===e.status).map(e=>e.error)}}();return{...e,triggerUpload:e.uploadAllFiles}}},10055:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});var a=r(34477);let n=(0,a.createServerReference)("7fef4df98f8100d06e751157b15c80f945dc54bf85",a.callServer,void 0,a.findSourceMapURL,"destroySession")},12133:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(79630),n=r(12115);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};var l=r(62764);let o=n.forwardRef(function(e,t){return n.createElement(l.default,(0,a.A)({},e,{ref:t,icon:s}))})},13921:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(79630),n=r(12115);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var l=r(62764);let o=n.forwardRef(function(e,t){return n.createElement(l.default,(0,a.A)({},e,{ref:t,icon:s}))})},19373:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var a=r(34477);let n=(0,a.createServerReference)("7f7177a3269b8d8c2c9a6ecaeea5051add2a3581c1",a.callServer,void 0,a.findSourceMapURL,"getSessionClient")},24073:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(79630),n=r(12115);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"};var l=r(62764);let o=n.forwardRef(function(e,t){return n.createElement(l.default,(0,a.A)({},e,{ref:t,icon:s}))})},31776:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,U:()=>o});var a=r(12115),n=r(48804),s=r(57845),l=r(15982);function o(e){return t=>a.createElement(s.Ay,{theme:{token:{motion:!1,zIndexPopupBase:0}}},a.createElement(e,Object.assign({},t)))}let i=(e,t,r,s,i)=>o(o=>{let{prefixCls:c,style:d}=o,u=a.useRef(null),[A,g]=a.useState(0),[p,h]=a.useState(0),[m,f]=(0,n.A)(!1,{value:o.open}),{getPrefixCls:E}=a.useContext(l.QO),v=E(s||"select",c);a.useEffect(()=>{if(f(!0),"undefined"!=typeof ResizeObserver){let e=new ResizeObserver(e=>{let t=e[0].target;g(t.offsetHeight+8),h(t.offsetWidth)}),t=setInterval(()=>{var r;let a=i?".".concat(i(v)):".".concat(v,"-dropdown"),n=null===(r=u.current)||void 0===r?void 0:r.querySelector(a);n&&(clearInterval(t),e.observe(n))},10);return()=>{clearInterval(t),e.disconnect()}}},[]);let y=Object.assign(Object.assign({},o),{style:Object.assign(Object.assign({},d),{margin:0}),open:m,visible:m,getPopupContainer:()=>u.current});return r&&(y=r(y)),t&&Object.assign(y,{[t]:{overflow:{adjustX:!1,adjustY:!1}}}),a.createElement("div",{ref:u,style:{paddingBottom:A,position:"relative",minWidth:p}},a.createElement(e,Object.assign({},y)))})},36768:(e,t,r)=>{"use strict";r.d(t,{A:()=>E});var a=r(12115),n=r(29300),s=r.n(n),l=r(8530),o=r(34162),i=r(70042),c=r(45431),d=r(61388);let u=e=>{let{componentCls:t,margin:r,marginXS:a,marginXL:n,fontSize:s,lineHeight:l}=e;return{[t]:{marginInline:a,fontSize:s,lineHeight:l,textAlign:"center",["".concat(t,"-image")]:{height:e.emptyImgHeight,marginBottom:a,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},["".concat(t,"-description")]:{color:e.colorTextDescription},["".concat(t,"-footer")]:{marginTop:r},"&-normal":{marginBlock:n,color:e.colorTextDescription,["".concat(t,"-description")]:{color:e.colorTextDescription},["".concat(t,"-image")]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:a,color:e.colorTextDescription,["".concat(t,"-image")]:{height:e.emptyImgHeightSM}}}}},A=(0,c.OF)("Empty",e=>{let{componentCls:t,controlHeightLG:r,calc:a}=e;return[u((0,d.oX)(e,{emptyImgCls:"".concat(t,"-img"),emptyImgHeight:a(r).mul(2.5).equal(),emptyImgHeightMD:r,emptyImgHeightSM:a(r).mul(.875).equal()}))]});var g=r(15982),p=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};let h=a.createElement(()=>{let[,e]=(0,i.Ay)(),[t]=(0,l.A)("Empty"),r=new o.Y(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return a.createElement("svg",{style:r,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},a.createElement("title",null,(null==t?void 0:t.description)||"Empty"),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("g",{transform:"translate(24 31.67)"},a.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),a.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),a.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),a.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),a.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),a.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),a.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},a.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),a.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},null),m=a.createElement(()=>{let[,e]=(0,i.Ay)(),[t]=(0,l.A)("Empty"),{colorFill:r,colorFillTertiary:n,colorFillQuaternary:s,colorBgContainer:c}=e,{borderColor:d,shadowColor:u,contentColor:A}=(0,a.useMemo)(()=>({borderColor:new o.Y(r).onBackground(c).toHexString(),shadowColor:new o.Y(n).onBackground(c).toHexString(),contentColor:new o.Y(s).onBackground(c).toHexString()}),[r,n,s,c]);return a.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},a.createElement("title",null,(null==t?void 0:t.description)||"Empty"),a.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},a.createElement("ellipse",{fill:u,cx:"32",cy:"33",rx:"32",ry:"7"}),a.createElement("g",{fillRule:"nonzero",stroke:d},a.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),a.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:A}))))},null),f=e=>{let{className:t,rootClassName:r,prefixCls:n,image:o=h,description:i,children:c,imageStyle:d,style:u,classNames:f,styles:E}=e,v=p(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:y,direction:j,className:b,style:x,classNames:Q,styles:w}=(0,g.TP)("empty"),C=y("empty",n),[B,S,I]=A(C),[k]=(0,l.A)("Empty"),R=void 0!==i?i:null==k?void 0:k.description,N=null;return N="string"==typeof o?a.createElement("img",{alt:"string"==typeof R?R:"empty",src:o}):o,B(a.createElement("div",Object.assign({className:s()(S,I,C,b,{["".concat(C,"-normal")]:o===m,["".concat(C,"-rtl")]:"rtl"===j},t,r,Q.root,null==f?void 0:f.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},w.root),x),null==E?void 0:E.root),u)},v),a.createElement("div",{className:s()("".concat(C,"-image"),Q.image,null==f?void 0:f.image),style:Object.assign(Object.assign(Object.assign({},d),w.image),null==E?void 0:E.image)},N),R&&a.createElement("div",{className:s()("".concat(C,"-description"),Q.description,null==f?void 0:f.description),style:Object.assign(Object.assign({},w.description),null==E?void 0:E.description)},R),c&&a.createElement("div",{className:s()("".concat(C,"-footer"),Q.footer,null==f?void 0:f.footer),style:Object.assign(Object.assign({},w.footer),null==E?void 0:E.footer)},c)))};f.PRESENTED_IMAGE_DEFAULT=h,f.PRESENTED_IMAGE_SIMPLE=m;let E=f},49561:(e,t,r)=>{"use strict";r.d(t,{f6:()=>u,th:()=>g,y1:()=>A});var a=r(23464),n=r(19373),s=r(10055),l=r(74227),o=r(49509);let i=o.env.NEXT_PUBLIC_API_URL,c=i+"/api/v1/",d=i+"/api/v2/",u=a.A.create({baseURL:c,headers:{"Content-Type":"application/json",accept:"application/json"}}),A=a.A.create({baseURL:c,headers:{"Content-Type":"application/json",accept:"application/json"}}),g=a.A.create({baseURL:d,headers:{"Content-Type":"application/json",accept:"application/json"}}),p=[A,a.A.create({baseURL:d,headers:{"Content-Type":"application/json",accept:"application/json"}})];[u,g].forEach(e=>{e.interceptors.response.use(e=>e.data,e=>e.response?Promise.reject(e.response.data.detail):Promise.reject(e.message))}),p.forEach(e=>{e.interceptors.request.use(async e=>{let t=await (0,n.g)();return e.headers.Authorization="Bearer ".concat(t.access_token?t.access_token:"no_token"),e},e=>Promise.reject(e))});let h=!1,m=null,f=[],E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;f.forEach(r=>{let{resolve:a,reject:n,config:s}=r;e?n(e):(t&&(s.headers.Authorization="Bearer ".concat(t)),a(s))}),f=[]};p.forEach(e=>{e.interceptors.response.use(e=>e.data,async t=>{var r,a,l;let o=t.config;if((null===(r=t.response)||void 0===r?void 0:r.status)===401&&!o._retry){if(o._retry=!0,h)return new Promise((e,t)=>{f.push({resolve:e,reject:t,config:o})}).then(t=>e(t));m||(h=!0,m=v());try{if(!await m)return E("Session expired. Please login again."),await (0,s.l)(),Promise.reject("Session expired. Please login again.");{let t=await (0,n.g)();return o.headers.Authorization="Bearer ".concat(t.access_token),E(null,t.access_token),e(o)}}catch(e){return E("Authentication failed. Please login again."),await (0,s.l)(),Promise.reject("Authentication failed. Please login again.")}finally{setTimeout(()=>{m=null,h=!1},100)}}if(!t.response)return Promise.reject(t.message);{let e=t.response.status,r=(null===(a=t.response.data)||void 0===a?void 0:a.detail)||(null===(l=t.response.data)||void 0===l?void 0:l.message)||"An error occurred";return 403===e&&await (0,s.l)(),Promise.reject(r)}})});let v=async()=>{try{let e=await (0,n.g)();if(!(null==e?void 0:e.refresh_token))return await (0,s.l)(),!1;let t=o.env.NEXT_PUBLIC_API_URL;if(!t)throw Error("API URL is not defined");let r=await fetch("".concat(t,"/api/v1/refresh-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e.refresh_token}),cache:"no-store"});if(!r.ok)return await (0,s.l)(),!1;let a=await r.json(),i={...e,access_token:a.access_token,refresh_token:a.refresh_token||e.refresh_token};return await (0,l.N)(i),!0}catch(e){return console.error("Token refresh failed:",e),await (0,s.l)(),!1}}},52319:(e,t,r)=>{"use strict";r.d(t,{Sd:()=>n,aK:()=>o,fu:()=>l,hJ:()=>s});var a=r(49561);async function n(){try{return(await a.y1.get("credit-requests/")).reverse()}catch(e){throw Error(e)}}async function s(e){try{return await a.y1.put("credit-requests/".concat(e.id),{...e.details,admin_response:e.admin_response})}catch(e){throw Error(e)}}async function l(e){try{return await a.y1.post("credit-requests/",e)}catch(e){throw Error(e)}}async function o(e){try{return await a.y1.post("credits/transfer",e)}catch(e){throw Error(e)}}},61860:e=>{e.exports={floatButton:"styles_floatButton__HeivV"}},64778:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(95155),n=r(70445),s=r(77325);r(12115);var l=r(61860),o=r.n(l);let i=function(e){let{onClick:t,icon:r,children:l,type:i,style:c}=e,{token:{colorBgBase:d}}=n.A.useToken();return(0,a.jsx)("div",{style:{...c,background:d},className:o().floatButton,onClick:t,children:(0,a.jsx)(s.Ay,{block:!0,size:"large",icon:r,type:i,children:l})})}},66188:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(12160),n=r(66012);let s=n.A;s.Dragger=a.A,s.LIST_IGNORE=n.s;let l=s},74227:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});var a=r(34477);let n=(0,a.createServerReference)("7fbd64ebe47753c9152c4e6b30624382d1a35ef8f3",a.callServer,void 0,a.findSourceMapURL,"setSession")},74985:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var a=r(95155),n=r(64778),s=r(12115),l=r(94326),o=r(66188);let i=e=>["image/jpeg","image/png","image/gif","application/pdf"].includes(e.type)?e.size>5242880?{valid:!1,error:"File size exceeds 5MB."}:{valid:!0}:{valid:!1,error:"File type ".concat(e.type," not supported.")},c=e=>{let{purpose:t,description:r,maxCount:n=1,accept:s,value:c,onChange:d,uploadImmediately:u=!0,queueFile:A,removeFile:g,children:p}=e,h=async e=>{let a=i(e);if(!a.valid)return l.Ay.error(a.error),o.A.LIST_IGNORE;let s={uid:A(e,{purpose:t,description:r,autoUpload:u}),name:e.name,status:"done",originFileObj:e,url:void 0};return d&&d([...c||[],s].slice(-n)),!1};return(0,a.jsx)(o.A,{fileList:c,beforeUpload:h,onRemove:e=>(g(e.uid),d&&d((c||[]).filter(t=>t.uid!==e.uid)),!0),maxCount:n,accept:s,listType:"picture-card",customRequest:e=>{let{onSuccess:t}=e;return t&&t({})},onChange:e=>d&&d(e.fileList),children:p})};var d=r(52319),u=r(4601),A=r(86769),g=r(12133),p=r(13921),h=r(26715),m=r(5041),f=r(20534),E=r(46002),v=r(26922),y=r(77325),j=r(31506),b=r(17238);let x=function(){let[e,t]=(0,s.useState)(!1),[r,o]=l.Ay.useMessage(),i=(0,h.jE)(),[x]=f.A.useForm(),{triggerUpload:Q,queueFile:w,removeFile:C}=(0,u.Z)(),[B,S]=(0,s.useState)(!1),[I,k]=(0,s.useState)([]);(0,s.useEffect)(()=>{e||(x.resetFields(),k([]))},[e,x]);let R=(0,m.n)({mutationFn:d.fu,onSuccess:()=>{r.success("Credits Requested Successfully"),t(!1),x.resetFields(),k([]),i.invalidateQueries({queryKey:["creditRequests"]})},onError:e=>{r.error(e.message)}}),N=async e=>{try{if(0===I.length){r.error("Please upload a receipt image");return}S(!0);let t=(await Q()).find(e=>"success"===e.status);if(!t)throw Error("Upload failed");await R.mutateAsync({image_file_id:t.fileId,requested_amount:e.requested_amount})}catch(e){r.error("Submission failed: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{S(!1)}},z=()=>{t(!1),x.resetFields(),k([])};return(0,a.jsxs)("div",{children:[o,(0,a.jsxs)(n.default,{type:"link",onClick:()=>t(!0),icon:(0,a.jsx)(A.A,{}),children:["New credit request"," "]}),(0,a.jsx)(E.A,{title:(0,a.jsxs)(a.Fragment,{children:["Request Credits",(0,a.jsx)(v.A,{title:"You need to transfer money to our esewa account then upload its statement in order to get credits.",color:"#f50",children:(0,a.jsx)(y.Ay,{type:"link",icon:(0,a.jsx)(g.A,{})})})]}),open:e,onOk:()=>t(!1),onCancel:z,footer:null,children:(0,a.jsxs)(f.A,{form:x,layout:"vertical",onFinish:N,children:[(0,a.jsx)(f.A.Item,{name:"requested_amount",required:!0,rules:[{required:!0,message:"Please enter your requested amount"}],label:"Enter your requested amount",children:(0,a.jsx)(j.A,{min:0})}),(0,a.jsx)(f.A.Item,{name:"receipt_image",required:!0,label:"Receipt image",rules:[{validator:async()=>0===I.length?Promise.reject(Error("Please upload a receipt image")):Promise.resolve()}],children:(0,a.jsx)(c,{purpose:"credit_request",description:"Credit request receipt",accept:"image/*",maxCount:1,uploadImmediately:!1,onChange:e=>{k(e),x.setFieldsValue({receipt_image:e})},value:I,queueFile:w,removeFile:C,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(p.A,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Upload Receipt"})]})})}),(0,a.jsx)("br",{}),(0,a.jsxs)(b.A,{justify:"space-between",children:[(0,a.jsx)(y.Ay,{onClick:z,type:"primary",danger:!0,children:"Cancel"}),(0,a.jsx)(y.Ay,{htmlType:"submit",loading:B||R.isPending,type:"primary",children:"Submit"})]})]})})]})}},81535:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(12115),n=r(89237),s=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};let l=a.forwardRef((e,t)=>{var{ellipsis:r,rel:l}=e,o=s(e,["ellipsis","rel"]);let i=Object.assign(Object.assign({},o),{rel:void 0===l&&"_blank"===o.target?"noopener noreferrer":l});return delete i.navigate,a.createElement(n.A,Object.assign({},i,{ref:t,ellipsis:!!r,component:"a"}))}),o=a.forwardRef((e,t)=>a.createElement(n.A,Object.assign({ref:t},e,{component:"div"})));var i=r(95891),c=r(87626);let d=r(64793).A;d.Text=i.A,d.Link=l,d.Title=c.default,d.Paragraph=o;let u=d},85359:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(79630),n=r(12115);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};var l=r(62764);let o=n.forwardRef(function(e,t){return n.createElement(l.default,(0,a.A)({},e,{ref:t,icon:s}))})},89123:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(79630),n=r(12115);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};var l=r(62764);let o=n.forwardRef(function(e,t){return n.createElement(l.default,(0,a.A)({},e,{ref:t,icon:s}))})},90765:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(79630),n=r(12115);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var l=r(62764);let o=n.forwardRef(function(e,t){return n.createElement(l.default,(0,a.A)({},e,{ref:t,icon:s}))})},90946:(e,t,r)=>{Promise.resolve().then(r.bind(r,95658)),Promise.resolve().then(r.bind(r,87626)),Promise.resolve().then(r.bind(r,74985)),Promise.resolve().then(r.bind(r,92835))},92835:(e,t,r)=>{"use strict";r.d(t,{default:()=>R});var a=r(95155),n=r(52319),s=r(41754),l=r(31086),o=r(6124),i=r(35125),c=r(36768),d=r(12115),u=r(90765),A=r(79630);let g={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var p=r(62764),h=d.forwardRef(function(e,t){return d.createElement(p.default,(0,A.A)({},e,{ref:t,icon:g}))}),m=r(3231),f=r(24073),E=r(89123),v=r(81535),y=r(85),j=r(17238),b=r(97226),x=r(46002),Q=r(37974),w=r(89631),C=r(98617);let{Text:B,Title:S}=v.A,I=function(e){let{request:t}=e,[r,n]=(0,d.useState)(!1),s=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",l=()=>{switch(t.status){case"approved":return(0,a.jsx)(u.A,{style:{color:"#52c41a"}});case"rejected":return(0,a.jsx)(h,{style:{color:"#f5222d"}});case"pending":return(0,a.jsx)(m.A,{style:{color:"#faad14"}})}},i=()=>{switch(t.status){case"approved":return"green";case"rejected":return"red";case"pending":return"orange"}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A.Ribbon,{text:t.status.toUpperCase(),color:i(),children:(0,a.jsx)(o.A,{size:"small",hoverable:!0,onClick:()=>n(!0),style:{borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",borderLeft:"3px solid ".concat("approved"===t.status?"#52c41a":"rejected"===t.status?"#f5222d":"#faad14")},children:(0,a.jsxs)(j.A,{justify:"space-between",align:"center",children:[(0,a.jsxs)(b.A,{direction:"vertical",size:"small",children:[(0,a.jsxs)(j.A,{align:"center",gap:8,children:[l(),(0,a.jsxs)(S,{level:4,style:{margin:0},children:[t.requested_amount," Credits"]})]}),(0,a.jsxs)(b.A,{children:[(0,a.jsx)(f.A,{style:{color:"#8c8c8c"}}),(0,a.jsxs)(B,{type:"secondary",children:["Requested: ",s(t.requested_at)]})]}),t.responded_at&&(0,a.jsxs)(b.A,{children:[(0,a.jsx)(f.A,{style:{color:"#8c8c8c"}}),(0,a.jsxs)(B,{type:"secondary",children:["Response: ",s(t.responded_at)]})]})]}),(0,a.jsxs)(j.A,{vertical:!0,gap:10,style:{paddingTop:30},align:"end",justify:"end",children:[(0,a.jsx)(E.A,{style:{fontSize:"24px",color:"#1890ff"}}),(0,a.jsx)(B,{type:"secondary",children:"View Details"})]})]})})}),(0,a.jsx)(x.A,{title:(0,a.jsxs)(j.A,{align:"center",gap:8,children:[(0,a.jsx)("span",{children:"Credit Request Details"}),(0,a.jsx)(Q.A,{color:i(),children:t.status.toUpperCase()})]}),open:r,onCancel:()=>n(!1),footer:null,width:700,children:(0,a.jsxs)(w.A,{bordered:!0,column:1,style:{marginTop:"20px"},children:[(0,a.jsx)(w.A.Item,{label:"Amount Requested",children:(0,a.jsxs)(B,{strong:!0,style:{fontSize:"18px"},children:[t.requested_amount," Credits"]})}),(0,a.jsx)(w.A.Item,{label:"Status",children:(0,a.jsx)(Q.A,{color:i(),icon:l(),children:t.status.toUpperCase()})}),(0,a.jsx)(w.A.Item,{label:"Request Date",children:s(t.requested_at)}),t.responded_at&&(0,a.jsx)(w.A.Item,{label:"Response Date",children:s(t.responded_at)}),t.admin_response&&""!==t.admin_response&&(0,a.jsx)(w.A.Item,{label:"Admin Response",children:t.admin_response}),(0,a.jsx)(w.A.Item,{label:"Payment Voucher",children:(0,a.jsx)(C.A,{src:t.image_url,alt:"Payment Voucher",style:{maxWidth:"100%"},fallback:"data:image/png;base64,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"})})]})})]})};function k(e){let{requests:t,filter:r}=e,n="all"===r?t:t.filter(e=>e.status===r);return 0===n.length?(0,a.jsx)(c.A,{description:"No ".concat("all"!==r?r:""," credit requests found")}):(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:n.map(e=>(0,a.jsx)(I,{request:e},e.id))})}let R=function(){let{data:e,isLoading:t,isError:r,isSuccess:c}=(0,s.I)({queryKey:["creditRequests"],queryFn:n.Sd,retry:4}),[u,A]=(0,d.useState)("1");if(r)return(0,a.jsx)(l.Ay,{title:"Error getting results",status:"error"});if(t)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{size:"small",loading:!0}),(0,a.jsx)(o.A,{size:"small",loading:!0})]});if(c){let t=[{label:"All (".concat(e.length,")"),key:"1",children:(0,a.jsx)(k,{requests:e,filter:"all"})},{label:"Approved (".concat(e.filter(e=>"approved"===e.status).length,")"),key:"2",children:(0,a.jsx)(k,{requests:e,filter:"approved"})},{label:"Pending (".concat(e.filter(e=>"pending"===e.status).length,")"),key:"3",children:(0,a.jsx)(k,{requests:e,filter:"pending"})},{label:"Rejected (".concat(e.filter(e=>"rejected"===e.status).length,")"),key:"4",children:(0,a.jsx)(k,{requests:e,filter:"rejected"})}];return(0,a.jsx)(o.A,{style:{border:"1px solid rgba(0,0,0,0)"},size:"small",children:(0,a.jsx)(i.A,{items:t,activeKey:u,onChange:A})})}return null}},95658:(e,t,r)=>{"use strict";r.d(t,{Card:()=>a.A,Flex:()=>n.A});var a=r(6124),n=r(17238)}},e=>{var t=t=>e(e.s=t);e.O(0,[2027,4666,6449,6327,3876,3749,8646,8085,7325,6124,6922,1086,9186,7845,5144,2788,3889,9237,534,4714,998,6002,7110,1506,1813,101,8441,1684,7358],()=>t(90946)),_N_E=e.O()}]);