(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5928,6683],{871:(e,t,a)=>{"use strict";a.d(t,{_:()=>i});var n=a(52200),l=a(49509);let r=["places"],i=()=>{let{isLoaded:e,loadError:t}=(0,n.KD)({id:"google-map-script",googleMapsApiKey:l.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY||"AIzaSyAvI6vu7WINuMtM6qBzmHO2m9r3U3jZBCo",libraries:r});return{isLoaded:e,loadError:t}}},884:(e,t,a)=>{"use strict";a.d(t,{cp:()=>h,dO:()=>g,jx:()=>m});var n=a(34477);n.callServer,n.findSourceMapURL;var l=a(19373);let r=(0,n.createServerReference)("7fb48ee3012ff32e5aaaa4e7fae4bb23519d82e2a5",n.callServer,void 0,n.findSourceMapURL,"refreshAccessToken");var i=a(10055);let s=a(49509).env.NEXT_PUBLIC_API_URL,o={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},c=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;try{let a=await fetch(e,{...t,cache:t.cache?t.cache:"no-store"});if(!a.ok){let e=await a.text();if(401===a.status)throw Error("Unauthorized access. Please log in again.");throw Error(e||"Unknown error")}return await a.json()}catch(n){if(a>0)return c(e,t,a-1);throw n}},d=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!s)throw Error("API URL is not defined");return c("".concat(s).concat(e),{...t,headers:{...o,...a,...t.headers}})},u=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=await (0,l.g)();if(!s)throw Error("API URL is not defined");let d="".concat(s).concat(e),u={...t,headers:{...o,...a,...t.headers,Authorization:"Bearer ".concat(n.access_token?n.access_token:"no_token")}};try{return await c(d,u)}catch(e){if("Unauthorized access. Please log in again."===e.message&&await r()){n=await (0,l.g)();let e={...u,headers:{...u.headers,Authorization:"Bearer ".concat(n.access_token)}};return await c(d,e)}throw(403===e.status||401===e.status)&&await (0,i.l)(),e}},m=async()=>d("/api/v1/templates/all/",{method:"GET",cache:"no-store"}),h=async()=>d("/api/v1/categories/?skip=0&limit=100",{method:"GET",cache:"no-store"}),g=async e=>u("/api/v1/templates/".concat(e),{method:"GET",cache:"no-store"})},4601:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n=a(12115),l=a(5041),r=a(49561),i=a(23464);let s=async e=>{try{return await r.y1.post("files/b2/get-upload-url/",e)}catch(e){throw Error(e)}},o=async(e,t,a,n)=>{try{let l=i.A.create();l.defaults.transformRequest=[];let r=await l.put(e,t,{headers:{"Content-Type":a},validateStatus:()=>!0,onUploadProgress:n});if(r.status>=200&&r.status<300)return r.data;throw Error("Upload failed with status ".concat(r.status,": ").concat(JSON.stringify(r.data)))}catch(e){if(console.error("B2 Upload Error:",e),e.response)throw Error(JSON.stringify(e.response.data)||"Upload failed");throw Error(e.message||"Upload failed")}},c=async e=>{try{return await r.y1.post("files/b2/confirm-upload/",e)}catch(e){throw Error(e)}};function d(){let e=function(){let[e,t]=(0,n.useState)({}),a=(0,n.useRef)({}),[r,i]=(0,n.useState)(!1),d=(0,l.n)({mutationFn:s}),u=(0,l.n)({mutationFn:e=>{let{uploadUrl:n,file:l,contentType:r,fileId:i}=e;return o(n,l,r,e=>{var n,l,r,s;let o=Math.round(100*e.loaded/e.total);t(e=>({...e,[i]:{...e[i],progress:o}})),(null===(l=a.current[i])||void 0===l?void 0:null===(n=l.options)||void 0===n?void 0:n.onProgress)&&(null===(r=(s=a.current[i].options).onProgress)||void 0===r||r.call(s,i,o))})}}),m=(0,l.n)({mutationFn:c}),h=(0,n.useCallback)(()=>"file_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),[]),g=(0,n.useCallback)((e,n)=>{let l=h(),r={id:l,file:e,options:n,status:"queued",progress:0};return t(e=>({...e,[l]:r})),a.current[l]=r,!1!==n.autoUpload&&p(l).catch(console.error),l},[]),p=(0,n.useCallback)(async e=>{var n,l;let r=a.current[e];if(!r)throw Error("File with ID ".concat(e," not found in queue"));let{file:s,options:o}=r;t(t=>({...t,[e]:{...t[e],status:"uploading"}}));try{i(!0);let l=await d.mutateAsync({file_name:s.name,content_type:s.type,folder:o.folder||"",metadata:o.metadata||{},purpose:o.purpose,description:o.description});if((null==l?void 0:l.status)!=="success"||!(null==l?void 0:l.upload_url))throw Error("Failed to get upload URL");await u.mutateAsync({uploadUrl:l.upload_url,file:s,contentType:l.content_type,fileId:e});let r=await m.mutateAsync({file_name:l.file_name,storage_path:l.storage_path});if((null==r?void 0:r.status)!=="success")throw Error("Failed to confirm upload");let c={fileId:r.file_id,fileName:r.file_name,downloadUrl:r.download_url,publicUrl:r.public_url,status:"success"};return t(t=>({...t,[e]:{...t[e],status:"success",progress:100,result:c}})),a.current[e]={...a.current[e],status:"success",progress:100,result:c},null===(n=o.onSuccess)||void 0===n||n.call(o,r),c}catch(r){let n=r instanceof Error?r:Error(String(r));throw t(t=>({...t,[e]:{...t[e],status:"error",error:n}})),a.current[e]={...a.current[e],status:"error",error:n},null===(l=o.onError)||void 0===l||l.call(o,n),n}finally{Object.values(a.current).every(e=>"success"===e.status||"error"===e.status)&&i(!1)}},[]),A=(0,n.useCallback)(async()=>{let e=Object.keys(a.current).filter(e=>"queued"===a.current[e].status);return 0===e.length?[]:(await Promise.allSettled(e.map(e=>p(e)))).map((t,n)=>{var l;return"fulfilled"===t.status?t.value:{fileId:-1,fileName:(null===(l=a.current[e[n]])||void 0===l?void 0:l.file.name)||"unknown",downloadUrl:"",publicUrl:"",status:"error",error:t.reason}})},[p]),x=(0,n.useCallback)(async(e,t)=>p(g(e,{...t,autoUpload:!1})),[g,p]),y=(0,n.useCallback)(()=>{t({}),a.current={}},[]);return{files:e,queueFile:g,uploadFile:p,uploadAllFiles:A,uploadFileDirect:x,removeFile:(0,n.useCallback)(e=>{t(t=>{let a={...t};return delete a[e],a}),delete a.current[e]},[]),clearFiles:y,isUploading:r,errors:Object.values(e).filter(e=>"error"===e.status).map(e=>e.error)}}();return{...e,triggerUpload:e.uploadAllFiles}}},6658:(e,t,a)=>{"use strict";a.d(t,{A:()=>v});var n=a(95155),l=a(17238),r=a(12115),i=a(95891),s=a(70445),o=a(86446),c=a(77325),d=a(884),u=a(15825),m=a(94326),h=a(36768),g=a(66766),p=a(28240),A=a.n(p);let x=function(e){let{templates:t,limit:a,catId:i}=e,{setTemplateData:s,setUploadedImage:o,setImageSize:c,setCurrent:p}=(0,u.h)(),[x,y]=(0,r.useState)(null),[f,v]=m.Ay.useMessage(),j=async e=>{try{y(e.id),o(void 0);let t=await (0,d.dO)("".concat(e.id));s(t),c({width:t.width||600,height:t.height||800}),p(1),f.success("Template selected successfully!")}catch(e){console.error("Error fetching template:",e),f.error("Failed to load template details. Please try again.")}finally{y(null)}},b=a?t.slice(0,6):t;return(0,n.jsxs)("div",{className:A().templateImagesContainer,children:[v,(null==b?void 0:b.length)!==0?(0,n.jsx)(n.Fragment,{children:b.map(e=>(0,n.jsxs)("div",{className:A().imageContainer,onClick:()=>j(e),style:{cursor:"pointer",position:"relative"},children:[x===e.id&&(0,n.jsx)("div",{className:A().loadingOverlay,children:"Loading..."}),"string"==typeof(null==e?void 0:e.thumbnail_url)&&(e.thumbnail_url.includes("http://")||e.thumbnail_url.includes("https://"))&&(0,n.jsx)(g.default,{src:null==e?void 0:e.thumbnail_url,alt:"template image",height:250,width:200,style:{objectFit:"cover",objectPosition:"center"}}),(0,n.jsx)("div",{className:A().overlay,children:(0,n.jsx)("div",{className:A().overlayText,children:"Use Template"})})]},e.id))}):(0,n.jsx)(l.A,{style:{width:"100%"},justify:"center",children:(0,n.jsx)(h.A,{description:"No template found"})})]})},y=function(e){let{category:t,templates:a,searchParams:d}=e,{token:{colorPrimary:u}}=s.A.useToken(),[m,h]=o.Ay.useNotification();(0,r.useEffect)(()=>{"selectTemplate"===d&&m.error({description:"Please select a template or upload one",message:"Template not found",duration:5})},[d,m]);let[g,p]=(0,r.useState)(!0);return(0,n.jsxs)(n.Fragment,{children:[h,(0,n.jsxs)(l.A,{align:"center",justify:"space-between",children:[(0,n.jsx)(i.A,{style:{fontSize:"2rem",borderBottom:"3px solid ".concat(u)},children:t.name}),(0,n.jsx)(c.Ay,{onClick:()=>p(e=>!e),type:"link",children:"View All"})]}),(0,n.jsx)(x,{catId:t.id,limit:g,templates:a})]})};var f=a(11126);let v=function(e){let{templates:t,categories:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{marginTop:24,marginBottom:24},children:(0,n.jsx)(f.A,{})}),(0,n.jsx)(l.A,{vertical:!0,gap:24,children:a.map(e=>{let a=t.filter(t=>t.category.id===e.id);return(0,n.jsx)(y,{templates:a,category:e},e.id)})})]})}},9077:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var n=a(95155),l=a(64778),r=a(86769),i=a(17238),s=a(12115),o=a(87626),c=a(41923);let d=function(e){let{hastitle:t=!0}=e,[a,d]=(0,s.useState)(!1);return(0,n.jsxs)(i.A,{justify:"space-between",children:[t&&(0,n.jsx)(o.default,{level:3,children:"Your Groups"}),(0,n.jsx)(l.default,{type:"link",onClick:()=>{d(!0)},icon:(0,n.jsx)(r.A,{}),children:"Create Group"}),(0,n.jsx)(c.A,{isModalOpen:a,handleCancel:()=>{d(!1)},handleOk:()=>{d(!1)},flag:"create"})]})}},10055:(e,t,a)=>{"use strict";a.d(t,{l:()=>l});var n=a(34477);let l=(0,n.createServerReference)("7fef4df98f8100d06e751157b15c80f945dc54bf85",n.callServer,void 0,n.findSourceMapURL,"destroySession")},10746:(e,t,a)=>{"use strict";a.d(t,{a:()=>n});let n="data:image/png;base64,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"},11126:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var n=a(95155),l=a(12115),r=a(28240),i=a.n(r),s=a(94326),o=a(66188),c=a(72070),d=a(77325),u=a(46002),m=a(35125),h=a(12160),g=a(15825),p=a(13921),A=a(21121);let x=function(){let{setUploadedImage:e,setTemplateData:t,setCurrent:a,setYoutubeLink:r,setMediaType:x}=(0,g.h)(),[y,f]=(0,l.useState)(!1),[v,j]=(0,l.useState)(""),b=[{key:"image",label:(0,n.jsxs)("span",{children:[(0,n.jsx)(p.A,{})," Upload Image"]}),children:(0,n.jsx)(h.A,{style:{background:"#fc5b3f1d"},customRequest:e=>{let{onSuccess:t}=e;return setTimeout(()=>{t("ok",null)},0)},accept:"image/*",name:"file",maxCount:1,action:void 0,fileList:void 0,onRemove(){},async beforeUpload(n){if("image/jpeg"!==n.type&&"image/png"!==n.type&&"image/jpg"!==n.type)return o.A.LIST_IGNORE;e(n),x("image"),t();let l=new Image;return l.onload=()=>{g.h.getState().setImageSize({width:l.width,height:l.height}),a(1)},l.src=URL.createObjectURL(n),f(!1),!1},children:(0,n.jsx)("span",{className:i().uploadText,children:"Upload Your Own Design or Photo"})})},{key:"youtube",label:(0,n.jsxs)("span",{children:[(0,n.jsx)(A.A,{})," YouTube Link"]}),children:(0,n.jsxs)("div",{className:i().youtubeContainer,children:[(0,n.jsx)("p",{children:"Enter YouTube video URL:"}),(0,n.jsx)(c.A,{placeholder:"https://www.youtube.com/watch?v=...",value:v,onChange:e=>j(e.target.value),style:{marginBottom:16}}),(0,n.jsx)(d.Ay,{type:"primary",onClick:()=>{if(!/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+$/.test(v)){s.Ay.error("Please enter a valid YouTube URL");return}r(v),x("youtube"),t(),a(1),f(!1)},children:"Submit"})]})}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Ay,{onClick:()=>{f(!0)},type:"primary",style:{fontSize:"24px",width:"100%",height:"120px",padding:"16px",background:"#fc5b3f1d",color:"#333",border:"dotted 1px #fc5b3f"},children:"Upload Your Own Media (Image or YouTube)"}),(0,n.jsx)(u.A,{title:"Choose Media Type",open:y,onCancel:()=>{f(!1)},footer:null,width:600,children:(0,n.jsx)(m.A,{defaultActiveKey:"image",items:b})})]})}},12388:(e,t,a)=>{"use strict";a.d(t,{N_:()=>i,a8:()=>o,rd:()=>c});var n=a(47830),l=a(43089);let r=(0,n.o)({locales:["en","nep"],defaultLocale:"en"}),{Link:i,redirect:s,usePathname:o,useRouter:c,getPathname:d}=(0,l.xp)(r)},15543:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var n=a(95155),l=a(12115),r=a(52200),i=a(94326),s=a(77325),o=a(46002),c=a(72070),d=a(92057),u=a(871);let m={width:"100%",height:"500px"};function h(e){let{centerCoords:t,markerState:a,setMarkerState:r,placeName:c,setPlaceName:m}=e,[h,p]=(0,l.useState)(t),[A,x]=(0,l.useState)(!1),[y,f]=(0,l.useState)(!1),v=(0,l.useMemo)(()=>t||{lat:27.63820799904629,lng:85.51344372504178},[t]),[j,b]=(0,l.useState)(v),_=async()=>{f(!0);try{await new Promise((e,t)=>{if(!navigator.geolocation){t(Error("Geolocation not supported"));return}navigator.geolocation.getCurrentPosition(t=>{let n={lat:t.coords.latitude,lng:t.coords.longitude};b(n),p(n),a.lat===v.lat&&a.lng===v.lng&&r(n),i.Ay.success("Location detected successfully"),e(t)},t,{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e5})})}catch(e){try{let e=await fetch("https://ipapi.co/json/"),t=await e.json();if(t.latitude&&t.longitude){let e={lat:t.latitude,lng:t.longitude};b(e),p(e),a.lat===v.lat&&a.lng===v.lng&&r(e)}else throw Error("IP location failed")}catch(e){i.Ay.warning("Could not detect location. Using default location (Kathmandu)."),b(v),p(v),a.lat===v.lat&&(a.lng,v.lng)}}finally{f(!1)}};(0,l.useEffect)(()=>{_()},[]);let w=()=>{x(!1)},C=()=>{x(!1),r(j)},E=async(e,t)=>{new window.google.maps.Geocoder().geocode({location:{lat:e,lng:t}},(e,t)=>{"OK"===t?e[0]?m(e[0].formatted_address):m("No results found"):m("Geocoder failed due to: "+t)})},{isLoaded:k}=(0,u._)();return k?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Ay,{onClick:()=>{x(!0)},type:"link",icon:(0,n.jsx)(d.A,{}),size:"small",block:!1,style:{width:"max-content"},loading:y,children:y?"Getting Location...":"Open Map"}),(0,n.jsxs)(o.A,{title:"Map",open:A,onOk:w,onCancel:C,style:{top:20},width:800,footer:[(0,n.jsx)(s.Ay,{onClick:C,children:"Cancel"},"cancel"),(0,n.jsx)(s.Ay,{onClick:_,loading:y,children:"Retry Location"},"retry"),(0,n.jsx)(s.Ay,{type:"primary",onClick:w,children:"OK"},"ok")],children:[(0,n.jsx)(g,{markerState:a,setMarkerState:r,center:h,setCenterState:p,setPlaceName:m,geocodeLatLng:E}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Selected Place:"})," ",c]})]})]}):(0,n.jsx)("div",{children:"Map Loading...."})}function g(e){let{markerState:t,setMarkerState:a,center:i,setCenterState:s,setPlaceName:o,geocodeLatLng:d}=e,u=(0,l.useRef)(null);return(0,n.jsxs)(r.u6,{zoom:18,mapContainerStyle:m,center:i,onClick:e=>{let t=e.latLng.lat(),n=e.latLng.lng();a({lat:t,lng:n}),d(t,n)},children:[(0,n.jsx)(r.dj,{onLoad:e=>u.current=e,onPlacesChanged:()=>{let e=u.current.getPlaces();if(0===e.length)return;let t=e[0],n=t.geometry.location;a({lat:n.lat(),lng:n.lng()}),s({lat:n.lat(),lng:n.lng()}),o(t.formatted_address+" "+t.name)},children:(0,n.jsx)(c.A,{type:"text",placeholder:"Search location",style:{boxSizing:"border-box",border:"1px solid transparent",width:"240px",height:"32px",padding:"0 12px",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",fontSize:"14px",outline:"none",textOverflow:"ellipses",position:"absolute",left:"50%",marginLeft:"-120px",top:"10px",zIndex:"10"}})}),(0,n.jsx)(r.X0,{position:t,onDragEnd:e=>{var t,n;let l=(null===(t=e.latLng)||void 0===t?void 0:t.lat())||0,r=(null===(n=e.latLng)||void 0===n?void 0:n.lng())||0;a({lat:l,lng:r}),d(l,r)},draggable:!0})]})}},15825:(e,t,a)=>{"use strict";a.d(t,{h:()=>i});var n=a(88693),l=a(62846);let r={lat:27.63820799904629,lng:85.51344372504178},i=(0,n.vt)((e,t)=>({current:0,youtubeLink:null,cohosts:[],invitees:[],mediaType:"image",markerState:r,placeName:"",formData:{},userLocation:null,setCurrent:t=>e({current:t}),setYoutubeLink:t=>e({youtubeLink:t}),setCohosts:t=>e({cohosts:t}),setInvitees:t=>e({invitees:t}),setMediaType:t=>e({mediaType:t}),setMarkerState:t=>e({markerState:t}),setPlaceName:t=>e({placeName:t}),setFormData:t=>e({formData:t}),updateFormField:(a,n)=>{let r=t().formData;("event_date"===a||"event_date_to"===a)&&(n=(0,l.Ym)(n)),("event_start_time"===a||"event_end_time"===a)&&(n=(0,l.Tk)(n)),e({formData:{...r,[a]:n}})},setUserLocation:a=>{e({userLocation:a});let n=t();a&&n.markerState.lat===r.lat&&n.markerState.lng===r.lng&&e({markerState:a})},uploadedImage:void 0,imageSize:{width:0,height:0},template:void 0,fullData:void 0,eventResources:new FormData,templateData:void 0,setTemplateData:t=>e({templateData:t}),setEventResources:t=>e({eventResources:t}),setFullData:t=>e({fullData:t}),setImageSize:t=>e({imageSize:t}),setTemplate:t=>e({template:t}),setUploadedImage:t=>e({uploadedImage:t}),reset:()=>e({current:0,youtubeLink:null,cohosts:[],invitees:[],mediaType:"image",markerState:t().userLocation||r,placeName:"",formData:{},uploadedImage:void 0,template:void 0,imageSize:{width:0,height:0},templateData:void 0,fullData:void 0,eventResources:new FormData})}))},19373:(e,t,a)=>{"use strict";a.d(t,{g:()=>l});var n=a(34477);let l=(0,n.createServerReference)("7f7177a3269b8d8c2c9a6ecaeea5051add2a3581c1",n.callServer,void 0,n.findSourceMapURL,"getSessionClient")},28240:e=>{e.exports={categoriesContainer:"style_categoriesContainer___E9_d",templateImagesContainer:"style_templateImagesContainer__EJ_3q",uploadText:"style_uploadText__2UVRj",loadingOverlay:"style_loadingOverlay__ZBKn_",imageContainer:"style_imageContainer__aeYK_",image:"style_image__NjMeu",overlay:"style_overlay__ad28q",overlayText:"style_overlayText__ulTkK"}},36379:()=>{},39341:()=>{},4e4:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var n=a(95155),l=a(56683),r=a(88077),i=a(15825),s=a(81730),o=a(94326),c=a(17238),d=a(77325),u=a(16467),m=a(36768),h=a(66766),g=a(12115);let p=function(){let{template:e,uploadedImage:t,youtubeLink:a,templateData:p,setTemplate:A,setTemplateData:x,setImageSize:y,setCurrent:f,setUploadedImage:v,setYoutubeLink:j}=(0,i.h)(),b=(0,g.useRef)(null),[_,w]=o.Ay.useMessage(),[C,E]=(0,g.useState)(!1),k=async e=>{if(b.current){E(!0);try{let t=b.current.captureImage();if(!t)throw Error("Failed to capture template image");let a=(null==p?void 0:p.width)||600,n=(null==p?void 0:p.height)||800;y({width:a,height:n});let l=await fetch(t),r=await l.blob();A(r),x(e),f(2),_.success("Template saved successfully!")}catch(e){console.error(e),_.error("Error saving template. Please try again.")}finally{E(!1)}}},S=()=>{f(2)},I=()=>{j(null),v(void 0),f(0)};return a&&!p?(0,n.jsxs)(n.Fragment,{children:[w,(0,n.jsx)(c.A,{justify:"space-between",className:"mb-3",children:(0,n.jsx)(d.Ay,{onClick:I,icon:(0,n.jsx)(s.A,{}),type:"link",children:"Go back"})}),(0,n.jsxs)(c.A,{vertical:!0,align:"center",gap:20,style:{padding:"20px"},children:[(0,n.jsx)("h3",{children:"Your YouTube Video"}),(0,n.jsx)(r.A,{url:a,width:560,height:315}),(0,n.jsx)(d.Ay,{type:"primary",onClick:S,children:"Continue to Event Details"})]})]}):t&&!p?(0,n.jsxs)(n.Fragment,{children:[w,(0,n.jsx)(c.A,{justify:"space-between",className:"mb-3",children:(0,n.jsx)(d.Ay,{onClick:I,icon:(0,n.jsx)(s.A,{}),type:"link",children:"Go back"})}),(0,n.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,n.jsx)("h3",{children:"Your uploaded design"}),(0,n.jsx)(h.default,{src:URL.createObjectURL(t),alt:"Uploaded design",width:300,height:400,style:{objectFit:"contain",maxHeight:"500px"}}),(0,n.jsx)("div",{style:{marginTop:"20px"},children:(0,n.jsx)(d.Ay,{type:"primary",onClick:S,children:"Continue to Event Details"})})]})]}):p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.A,{justify:"space-between",children:(0,n.jsx)(d.Ay,{onClick:I,icon:(0,n.jsx)(s.A,{}),type:"link",children:"Go back"})}),w,C&&(0,n.jsx)("div",{style:{textAlign:"center",margin:"10px 0"},children:(0,n.jsx)(u.A,{})}),(0,n.jsx)(l.default,{ref:b,isUser:!0,initialTemplate:p,onSave:k})]}):(0,n.jsx)(m.A,{description:"Please select a template or upload your own design first"})}},41923:(e,t,a)=>{"use strict";a.d(t,{A:()=>j});var n=a(95155),l=a(93758),r=a(4601),i=a(12388),s=a(26715),o=a(5041),c=a(94326),d=a(20534),u=a(46002),m=a(12115),h=a(86917),g=a(72070),p=a(17238),A=a(77325),x=a(95891),y=a(12160),f=a(29911);let v=(0,m.forwardRef)((e,t)=>{let{form:a,onFinish:l,handleCancel:i,groupMutation:s,editMutation:o,flag:c,editData:v}=e,[j,b]=(0,m.useState)(!1),[_,w]=(0,m.useState)([]),[C,E]=(0,m.useState)(null),{isUploading:k}=(0,r.Z)();(0,m.useImperativeHandle)(t,()=>({selectedFiles:_,imageFile:C}));let S=e=>{w(t=>t.find(t=>t.name===e.name)?t.filter(t=>t.name!==e.name):[...t,e])},I=e=>{w(t=>t.filter(t=>t.name!==e))},B=()=>{b(!1)},Q={accept:"image/*",name:"file",maxCount:1,fileList:C?[{uid:"-1",name:C.name,status:"done",originFileObj:C}]:[],beforeUpload:e=>(E(e),!1),onRemove:()=>{E(null),a.setFieldValue("image",[])},customRequest:e=>{let{onSuccess:t}=e;setTimeout(()=>t("ok",null),0)}};return(0,m.useEffect)(()=>{v&&a.setFieldsValue({name:v.name,description:v.description})},[v,a]),(0,n.jsxs)(d.A,{form:a,onFinish:l,layout:"vertical",children:[(0,n.jsx)(d.A.Item,{name:"name",label:"Group Name",rules:[{required:!0,message:"Please write a group name."}],children:(0,n.jsx)(g.A,{})}),(null==v?void 0:v.image_url)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.A,{wrap:"wrap",gap:10,align:"flex-top",children:[(0,n.jsx)(x.A,{children:"Current Image:"}),(0,n.jsx)(h.A,{style:{height:"auto",width:150},alt:"group image",fallback:!0,src:v.image_url})]}),(0,n.jsx)("br",{})]}),(0,n.jsx)(d.A.Item,{name:"image",label:"Group Image",children:(0,n.jsx)(y.A,{...Q,children:(0,n.jsx)("p",{className:"ant-upload-text",children:"Click or drag image to this area to upload group image."})})}),(0,n.jsxs)(d.A.Item,{name:"csv_files",label:"CSV of Invitees",children:[(0,n.jsx)(A.Ay,{style:{width:"50%"},onClick:()=>{b(!0)},disabled:k,children:"Select CSV files"}),(0,n.jsx)(u.A,{title:"Select CSV Files",open:j,onCancel:B,footer:[(0,n.jsx)(A.Ay,{type:"primary",onClick:B,children:"Done"},"done")],width:600,children:(0,n.jsx)(y.A,{accept:".csv",name:"file",multiple:!0,fileList:[],beforeUpload:e=>(S(e),!1),customRequest:e=>{let{onSuccess:t}=e;setTimeout(()=>t("ok",null),0)},disabled:k,children:(0,n.jsx)("p",{className:"ant-upload-text",children:"Click or drag CSV files to this area to select them"})})}),_.length>0&&(0,n.jsxs)("div",{style:{marginTop:"8px"},children:[(0,n.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:"Selected CSV Files:"}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:_.map(e=>(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#e6f7ff",padding:"6px 12px",borderRadius:"4px",border:"1px solid #91d5ff"},children:[(0,n.jsx)(f.EHs,{size:14,color:"#1890ff",style:{marginRight:"8px"}}),(0,n.jsx)("span",{style:{flex:1},children:e.name}),(0,n.jsx)(A.Ay,{size:"small",type:"text",danger:!0,onClick:()=>I(e.name),children:"Remove"})]},e.name))}),(0,n.jsx)(A.Ay,{size:"small",type:"text",danger:!0,style:{marginTop:"8px"},onClick:()=>w([]),children:"Clear all"})]})]}),(0,n.jsx)(d.A.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please write a group description!"}],children:(0,n.jsx)(g.A.TextArea,{})}),(0,n.jsxs)(p.A,{justify:"space-between",wrap:"wrap",children:[(0,n.jsx)(A.Ay,{onClick:i,children:"Cancel"}),(0,n.jsx)(A.Ay,{loading:(null==s?void 0:s.isPending)||(null==o?void 0:o.isPending)||k,htmlType:"submit",type:"primary",children:"Send"})]})]})});v.displayName="GroupForm";let j=function(e){let{isModalOpen:t,handleCancel:a,handleOk:h,flag:g,editData:p}=e,A=(0,i.rd)(),[x,y]=c.Ay.useMessage(),{uploadFileDirect:f}=(0,r.Z)(),j=(0,m.useRef)([]),b=(0,m.useRef)(null),_=(0,s.jE)(),w=(0,o.n)({mutationFn:l.wj,onError:e=>x.error(e.message),onSuccess:()=>{k.resetFields(),j.current=[],b.current=null,A.refresh(),_.invalidateQueries({queryKey:["groups"]}),x.success("Group created successfully!"),h()}}),C=(0,o.n)({mutationFn:l.cj,onError:e=>x.error(e.message),onSuccess:()=>{A.refresh(),k.resetFields(),j.current=[],b.current=null,x.success("Group edited successfully!"),h()}}),E=async e=>{try{let t=c.Ay.loading("Processing...",0),a=(null==p?void 0:p.image_file_id)||0,n=[];if(b.current)try{let t=await f(b.current,{purpose:"group_image",description:"Group image: ".concat(e.name),folder:"group-images"});if("success"===t.status)a=t.fileId;else throw Error("Image upload failed")}catch(e){t(),x.error("Failed to upload image");return}if(j.current.length>0)try{let t=j.current.map(t=>f(t,{purpose:"csv_import",description:"CSV file for group: ".concat(e.name),folder:"csv-files"}));if((n=(await Promise.all(t)).filter(e=>"success"===e.status).map(e=>e.fileId)).length!==j.current.length)throw Error("Some CSV files failed to upload")}catch(e){t(),x.error("Failed to upload CSV files");return}let l={name:e.name,description:e.description,image_url:(null==p?void 0:p.image_url)||"",image_file_id:a,csv_ids:n.length>0?n:(null==p?void 0:p.csv_ids)||[]};t(),"create"===g?w.mutate(l):"edit"===g&&C.mutate({data:l,id:(null==p?void 0:p.id)||0})}catch(e){x.error(e.message||"An error occurred")}},[k]=d.A.useForm();return(0,n.jsxs)(u.A,{title:"create"===g?"Create Group":"Edit Group",open:t,onOk:h,onCancel:a,footer:null,destroyOnClose:!0,children:[y,(0,n.jsx)(v,{ref:e=>{e&&(j.current=e.selectedFiles||[],b.current=e.imageFile||null)},editData:p,flag:g,form:k,onFinish:E,handleCancel:a,groupMutation:w,editMutation:C})]})}},49561:(e,t,a)=>{"use strict";a.d(t,{f6:()=>u,th:()=>h,y1:()=>m});var n=a(23464),l=a(19373),r=a(10055),i=a(74227),s=a(49509);let o=s.env.NEXT_PUBLIC_API_URL,c=o+"/api/v1/",d=o+"/api/v2/",u=n.A.create({baseURL:c,headers:{"Content-Type":"application/json",accept:"application/json"}}),m=n.A.create({baseURL:c,headers:{"Content-Type":"application/json",accept:"application/json"}}),h=n.A.create({baseURL:d,headers:{"Content-Type":"application/json",accept:"application/json"}}),g=[m,n.A.create({baseURL:d,headers:{"Content-Type":"application/json",accept:"application/json"}})];[u,h].forEach(e=>{e.interceptors.response.use(e=>e.data,e=>e.response?Promise.reject(e.response.data.detail):Promise.reject(e.message))}),g.forEach(e=>{e.interceptors.request.use(async e=>{let t=await (0,l.g)();return e.headers.Authorization="Bearer ".concat(t.access_token?t.access_token:"no_token"),e},e=>Promise.reject(e))});let p=!1,A=null,x=[],y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;x.forEach(a=>{let{resolve:n,reject:l,config:r}=a;e?l(e):(t&&(r.headers.Authorization="Bearer ".concat(t)),n(r))}),x=[]};g.forEach(e=>{e.interceptors.response.use(e=>e.data,async t=>{var a,n,i;let s=t.config;if((null===(a=t.response)||void 0===a?void 0:a.status)===401&&!s._retry){if(s._retry=!0,p)return new Promise((e,t)=>{x.push({resolve:e,reject:t,config:s})}).then(t=>e(t));A||(p=!0,A=f());try{if(!await A)return y("Session expired. Please login again."),await (0,r.l)(),Promise.reject("Session expired. Please login again.");{let t=await (0,l.g)();return s.headers.Authorization="Bearer ".concat(t.access_token),y(null,t.access_token),e(s)}}catch(e){return y("Authentication failed. Please login again."),await (0,r.l)(),Promise.reject("Authentication failed. Please login again.")}finally{setTimeout(()=>{A=null,p=!1},100)}}if(!t.response)return Promise.reject(t.message);{let e=t.response.status,a=(null===(n=t.response.data)||void 0===n?void 0:n.detail)||(null===(i=t.response.data)||void 0===i?void 0:i.message)||"An error occurred";return 403===e&&await (0,r.l)(),Promise.reject(a)}})});let f=async()=>{try{let e=await (0,l.g)();if(!(null==e?void 0:e.refresh_token))return await (0,r.l)(),!1;let t=s.env.NEXT_PUBLIC_API_URL;if(!t)throw Error("API URL is not defined");let a=await fetch("".concat(t,"/api/v1/refresh-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e.refresh_token}),cache:"no-store"});if(!a.ok)return await (0,r.l)(),!1;let n=await a.json(),o={...e,access_token:n.access_token,refresh_token:n.refresh_token||e.refresh_token};return await (0,i.N)(o),!0}catch(e){return console.error("Token refresh failed:",e),await (0,r.l)(),!1}}},56683:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>V});var n=a(95155),l=a(79659),r=a(81535),i=a(77325),s=a(85189),o=a(35440),c=a(12115),d=a(37579),u=a(36768);let m=(0,c.forwardRef)((e,t)=>{let{template:a,selectedElementIndex:l,setSelectedElementIndex:r,updateContent:i,readOnly:s=!1}=e,[o,m]=(0,c.useState)(null),[h,g]=(0,c.useState)(!1),p=(0,c.useRef)(null),A=(0,c.useRef)([]),x=(0,c.useRef)(null);(0,c.useEffect)(()=>{A.current=A.current.slice(0,a.contents.length)},[a.contents.length]),(0,c.useImperativeHandle)(t,()=>({captureImage:()=>p.current?p.current.toDataURL({pixelRatio:2,mimeType:"image/jpeg",quality:.9}):null}));let y=(0,c.useCallback)((e,t,n,l)=>({x:Math.floor(Math.max(0,Math.min(e,a.width-n))),y:Math.floor(Math.max(0,Math.min(t,a.height-l)))}),[a.width,a.height]);(0,c.useEffect)(()=>{if(a.background_image){let e=new Image;if(e.crossOrigin="anonymous",e.onload=()=>m(e),e.onerror=e=>{console.error("Image load error:",e),m(null)},a.background_image instanceof File){let t=URL.createObjectURL(a.background_image);return e.src=t,()=>URL.revokeObjectURL(t)}if("string"==typeof a.background_image){let t=a.background_image.includes("?")?"&":"?";e.src="/api/image-proxy?url=".concat(encodeURIComponent(a.background_image)).concat(t,"cache=").concat(Date.now())}}else m(null)},[a.background_image]);let f=(0,c.useCallback)(e=>{let t=e.target;"Stage"!==t.getType()&&t!==x.current||h||r(null)},[h,r]),v=(0,c.useCallback)((e,t)=>{console.log("Text clicked:",t),e.cancelBubble=!0,e.evt&&(e.evt.preventDefault(),e.evt.stopPropagation()),s||r(t)},[s,r]),j=(0,c.useCallback)((e,t)=>{var a;if(s)return;console.log("Drag start:",t),g(!0),r(t);let n=null===(a=e.target.getStage())||void 0===a?void 0:a.container();n&&(n.style.cursor="grabbing")},[s,r]),b=(0,c.useCallback)(e=>{if(s)return;let t=e.target,a=t.width(),n=t.height(),l=y(t.x(),t.y(),a,n);t.x(l.x),t.y(l.y)},[s,y]),_=(0,c.useCallback)((e,t)=>{var a;if(s)return;console.log("Drag end:",t);let n=e.target,l=n.width(),r=n.height(),o=y(n.x(),n.y(),l,r);i(t,{x:o.x,y:o.y}),setTimeout(()=>{g(!1)},50);let c=null===(a=e.target.getStage())||void 0===a?void 0:a.container();c&&(c.style.cursor="default")},[s,y,i]),w=(0,c.useCallback)((e,t)=>{var a;if(s)return;let n=null===(a=e.target.getStage())||void 0===a?void 0:a.container();n&&!h&&(n.style.cursor=l===t?"grab":"pointer")},[s,h,l]),C=(0,c.useCallback)(e=>{var t;let a=null===(t=e.target.getStage())||void 0===t?void 0:t.container();a&&!h&&(a.style.cursor="default")},[h]);return a?(0,n.jsx)("div",{className:"stage-container",children:(0,n.jsx)(d.BI,{width:a.width,height:a.height,ref:p,onMouseDown:f,onTouchStart:f,style:{background:"rgb(236, 236, 236)",boxShadow:"0 0 10px rgba(104, 104, 104, 0.1)",margin:"0 auto",width:a.width,height:a.height},children:(0,n.jsxs)(d.Wd,{ref:x,children:[o&&(0,n.jsx)(d._V,{image:o,width:a.width,height:a.height,listening:!1}),a.contents.map((e,t)=>{var a;let i=A.current[t];return(0,n.jsxs)(c.Fragment,{children:[(0,n.jsx)(d.EY,{ref:e=>{e&&(A.current[t]=e)},text:e.value||"Text",x:e.x||0,y:e.y||0,fontSize:e.font_size||e.size||16,fontFamily:e.font_family||"Arial",fill:(null===(a=e.color)||void 0===a?void 0:a.startsWith("#"))?e.color:"#".concat(e.color||"000000"),fontStyle:"".concat(e.is_bold?"bold":""," ").concat(e.is_italic?"italic":"").trim()||"normal",stroke:e.has_border?"#000000":void 0,strokeWidth:+!!e.has_border,draggable:!s,listening:!0,onMouseDown:e=>v(e,t),onTouchStart:e=>v(e,t),onClick:e=>{e.cancelBubble=!0,s||h||r(t)},onTap:e=>{e.cancelBubble=!0,s||h||r(t)},onDragStart:e=>j(e,t),onDragMove:b,onDragEnd:e=>_(e,t),onMouseEnter:e=>w(e,t),onMouseLeave:C,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1}),l===t&&i&&(0,n.jsx)(d.rw,{x:(e.x||0)-5,y:(e.y||0)-5,width:i.width()+10,height:i.height()+10,stroke:"#1890ff",strokeWidth:2,dash:[4,4],listening:!1,cornerRadius:3})]},"text-element-".concat(t,"-").concat(e.value))})]})})}):(0,n.jsx)(u.A,{description:"No template selected"})});m.displayName="CanvasEditor";var h=a(76714),g=a(56170),p=a(13921),A=a(46996),x=a(65927),y=a(33943),f=a(20890),v=a(19558),j=a(41754),b=a(35125),_=a(20534),w=a(72070),C=a(97226),E=a(31506),k=a(66188),S=a(89584),I=a(13324),B=a(82164),Q=a(26922),N=a(94600),T=a(17238),F=a(37974);let U=["ABeeZee","Abel","Abhaya Libre","Tangerine","Aboreto","Abril Fatface","Abyssinica SIL","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akaya Kanadaka","Akaya Telivigala","Akronim","Akshar","Aladin","Alata","Alatsi","Albert Sans","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Aleo","Alex Brush","Alexandria","Alfa Slab One","Alice","Alike","Alike Angular","Alkalami","Allan","Allerta","Allerta Stencil","Allison","Allura","Almarai","Almendra","Almendra Display","Almendra SC","Alumni Sans","Alumni Sans Collegiate One","Alumni Sans Inline One","Alumni Sans Pinstripe","Amarante","Amaranth","Amatic SC","Amethysta","Amiko","Amiri","Amiri Quran","Amita","Anaheim","Andada Pro","Andika","Anek Bangla","Anek Devanagari","Anek Gujarati","Anek Gurmukhi","Anek Kannada","Anek Latin","Anek Malayalam","Anek Odia","Anek Tamil","Anek Telugu","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Antonio","Anybody","Arapey"],{Title:R,Text:P}=r.A,{TabPane:D}=b.A,L=e=>U.map(t=>({value:t,label:(0,n.jsx)("span",{style:{fontFamily:t},children:e})})),z=e=>{let{template:t,updateTemplate:a,selectedElementIndex:l,updateContent:r,selectedContent:s,addContent:o,removeContent:c,handleBackgroundUpload:d,handleSave:u,readOnly:m=!1,setSelectedElementIndex:U,handleThumbnailUpload:z,loading:M,isUser:Y}=e,{data:V,isLoading:K}=(0,j.I)({queryKey:["categories"],queryFn:h.LZ}),O=(e,t)=>!!e.type.startsWith("image/")&&("background"===t&&d(e),"thumbnail"===t&&z(e),!1);return(0,n.jsxs)("div",{className:"control-panel-content",children:[(0,n.jsxs)(b.A,{defaultActiveKey:"canvas",className:"control-tabs",children:[!Y&&(0,n.jsx)(D,{tab:"Canvas",children:(0,n.jsxs)(_.A,{layout:"vertical",children:[(0,n.jsx)(_.A.Item,{label:"Title",children:(0,n.jsx)(w.A,{value:t.title,onChange:e=>a("title",e.target.value),disabled:m})}),(0,n.jsx)(_.A.Item,{label:"Canvas Size",children:(0,n.jsxs)(C.A,{children:[(0,n.jsx)(E.A,{addonBefore:"Width",min:200,max:3e3,value:t.width,onChange:e=>a("width",e),disabled:m}),(0,n.jsx)(E.A,{addonBefore:"Height",min:200,max:3e3,value:t.height,onChange:e=>a("height",e),disabled:m})]})}),(0,n.jsx)(_.A.Item,{label:"Background",children:(0,n.jsx)(k.A,{name:"background",listType:"picture-card",showUploadList:!1,beforeUpload:e=>O(e,"background"),disabled:m,children:t.background_image?(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("img",{src:"string"==typeof t.background_image?t.background_image:URL.createObjectURL(t.background_image),alt:"Background",style:{width:"100%"}}),(0,n.jsx)("div",{style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.65)",color:"#fff",cursor:"pointer",padding:"4px"},onClick:e=>{e.stopPropagation(),a("background_image",null)},children:(0,n.jsx)(g.A,{})})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)(p.A,{}),(0,n.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,n.jsx)(_.A.Item,{label:"Thumbnail",children:(0,n.jsx)(k.A,{name:"thumbnail",listType:"picture-card",showUploadList:!1,beforeUpload:e=>O(e,"thumbnail"),disabled:m,children:t.thumbnail_url?(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("img",{src:"string"==typeof t.thumbnail_url?t.thumbnail_url:URL.createObjectURL(t.thumbnail_url),alt:"thumbnail",style:{width:"100%"}}),(0,n.jsx)("div",{style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.65)",color:"#fff",cursor:"pointer",padding:"4px"},onClick:e=>{e.stopPropagation(),a("thumbnail_url",null)},children:(0,n.jsx)(g.A,{})})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)(p.A,{}),(0,n.jsx)("div",{style:{marginTop:8},children:"Upload"})]})})}),(0,n.jsx)(_.A.Item,{label:"Template Type",children:(0,n.jsx)(S.A,{popupMatchSelectWidth:!1,loading:K,options:null==V?void 0:V.map(e=>({value:e.id,label:e.name})),onChange:e=>a("category_id",e)})}),(0,n.jsx)(_.A.Item,{label:"Description",children:(0,n.jsx)(w.A.TextArea,{value:t.description||"",onChange:e=>a("description",e.target.value),rows:3,disabled:m})}),(0,n.jsx)(_.A.Item,{children:(0,n.jsxs)(C.A,{children:[(0,n.jsx)(I.A,{checked:t.is_public,onChange:e=>a("is_public",e),disabled:m}),(0,n.jsx)(P,{children:"Public"})]})}),(0,n.jsx)(_.A.Item,{children:(0,n.jsxs)(C.A,{children:[(0,n.jsx)(I.A,{checked:t.is_premium,onChange:e=>a("is_premium",e),disabled:m}),(0,n.jsx)(P,{children:"Premium"})]})}),t.is_premium&&(0,n.jsx)(_.A.Item,{label:"Price in Credits",children:(0,n.jsx)(E.A,{min:0,value:t.price_in_credits,onChange:e=>a("price_in_credits",e),disabled:m,style:{width:"100%"}})})]})},"canvas"),(0,n.jsxs)(D,{tab:"Text Elements",children:[!Y&&!m&&(0,n.jsx)(i.Ay,{type:"dashed",icon:(0,n.jsx)(A.A,{}),onClick:()=>o(),block:!0,style:{marginBottom:16},children:"Add Text"}),null!==l&&s&&(0,n.jsxs)(_.A,{layout:"vertical",children:[(0,n.jsx)(R,{level:5,children:"Edit Text Element"}),(0,n.jsx)(i.Ay,{style:{width:"100%",marginBottom:12},onClick:()=>U(null),children:"Remove selection"}),(0,n.jsx)(_.A.Item,{label:"Text Content",children:(0,n.jsx)(w.A.TextArea,{value:s.value,onChange:e=>r(l,{value:e.target.value}),rows:3,disabled:m})}),(0,n.jsx)(_.A.Item,{label:"Position",children:(0,n.jsxs)(C.A,{children:[(0,n.jsx)(E.A,{addonBefore:"X",value:s.x,onChange:e=>r(l,{x:e}),disabled:m}),(0,n.jsx)(E.A,{addonBefore:"Y",value:s.y,onChange:e=>r(l,{y:e}),disabled:m})]})}),(0,n.jsx)(_.A.Item,{label:"Font",children:(0,n.jsx)(S.A,{value:s.font_family,onChange:e=>r(l,{font_family:e}),disabled:m,style:{width:"100%"},options:L(s.value)})}),(0,n.jsx)(_.A.Item,{label:"Font Size",children:(0,n.jsx)(E.A,{min:8,max:120,value:s.font_size||s.size,onChange:e=>r(l,{font_size:e,size:e}),disabled:m,style:{width:"100%"}})}),(0,n.jsx)(_.A.Item,{label:"Color",children:(0,n.jsx)(B.A,{value:s.color,onChange:e=>r(l,{color:e.toHex()}),disabled:m})}),(0,n.jsx)(_.A.Item,{children:(0,n.jsxs)(C.A,{children:[(0,n.jsx)(Q.A,{title:"Bold",children:(0,n.jsx)(i.Ay,{icon:(0,n.jsx)(x.A,{}),type:s.is_bold?"primary":"default",onClick:()=>r(l,{is_bold:!s.is_bold}),disabled:m})}),(0,n.jsx)(Q.A,{title:"Italic",children:(0,n.jsx)(i.Ay,{icon:(0,n.jsx)(y.A,{}),type:s.is_italic?"primary":"default",onClick:()=>r(l,{is_italic:!s.is_italic}),disabled:m})}),(0,n.jsx)(Q.A,{title:"Border",children:(0,n.jsx)(i.Ay,{icon:(0,n.jsx)(f.A,{}),type:s.has_border?"primary":"default",onClick:()=>r(l,{has_border:!s.has_border}),disabled:m})})]})}),!Y&&!m&&(0,n.jsx)(i.Ay,{danger:!0,icon:(0,n.jsx)(g.A,{}),onClick:()=>c(l),block:!0,children:"Remove Element"})]}),null===l&&t.contents.length>0&&(0,n.jsxs)("div",{className:"elements-list",children:[(0,n.jsx)(R,{level:5,children:"Select Element to Edit"}),t.contents.map((e,t)=>(0,n.jsx)("div",{className:"element-item",onClick:()=>U(t),children:(0,n.jsx)(P,{ellipsis:!0,style:{width:"100%"},children:e.value||"Empty text"})},t))]})]},"elements")]}),(0,n.jsx)(N.A,{style:{margin:"12px 0"}}),Y&&null!==l?(0,n.jsx)(T.A,{className:"warning-message",justify:"center",children:(0,n.jsx)(F.A,{color:"red",children:"Remove Selection to continue"})}):(0,n.jsx)(i.Ay,{type:"primary",icon:Y?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(v.A,{}),onClick:u,block:!0,disabled:Y&&null!==l,loading:M,children:Y?"Next":m?"Use Template":"Save Template"})]})};a(39341);let{Title:M}=r.A,Y={title:"",subtitle:"",description:"",category_id:0,height:600,width:800,contents:[],is_public:!1,is_premium:!1,is_active:!0,background_image:null,price_in_credits:0,template_type:"",id:0,user_id:0,created_at:"",preview_images:[]},V=(0,c.forwardRef)((e,t)=>{let{initialTemplate:a={},onSave:r=()=>{},readOnly:d=!1,isUser:u=!1,loading:h=!1}=e,[g,p]=(0,c.useState)({...Y,...{...a,background_image:null==a?void 0:a.file_url}}),A=(0,c.useRef)(null);(0,c.useImperativeHandle)(t,()=>({captureImage:()=>A.current?A.current.captureImage():null}));let[x,y]=(0,c.useState)(null),[f,v]=(0,c.useState)(window.innerWidth),[j,b]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let e=()=>{v(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let _=(e,t)=>{p(a=>{let n=[...a.contents];return n[e]={...n[e],...t},{...a,contents:n}})},w=(0,n.jsx)(z,{isUser:u,handleThumbnailUpload:e=>{e&&p(t=>({...t,thumbnail_url:e}))},setSelectedElementIndex:y,template:g,updateTemplate:(e,t)=>{p(a=>({...a,[e]:t}))},selectedElementIndex:x,updateContent:_,selectedContent:null!==x?g.contents[x]:null,addContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={value:"New Text",x:50,y:50,font_family:"Arial",color:"#000000",size:16,is_bold:!1,is_italic:!1,has_border:!1,font_size:16,...e};p(e=>({...e,contents:[...e.contents,t]})),y(g.contents.length)},removeContent:e=>{p(t=>({...t,contents:t.contents.filter((t,a)=>a!==e)})),x===e&&y(null)},handleBackgroundUpload:e=>{e&&p(t=>({...t,background_image:e}))},handleSave:()=>{try{r(g)}catch(e){console.error("Failed to save template")}},readOnly:d,loading:h}),C=(0,n.jsx)(i.Ay,{type:"primary",shape:"circle",icon:(0,n.jsx)(l.A,{}),size:"large",onClick:()=>b(!0),style:{position:"fixed",bottom:180,right:24,zIndex:1e3,boxShadow:"0 3px 6px rgba(0,0,0,0.16)"}});return(0,n.jsx)(n.Fragment,{children:f<=768?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{ref:A,template:g,selectedElementIndex:x,setSelectedElementIndex:y,updateContent:_,readOnly:d}),(0,n.jsx)(s.A,{title:"Template Editor",placement:"right",onClose:()=>b(!1),open:j,width:320,children:w}),C]}):(0,n.jsxs)(o.A,{style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsx)(o.A.Panel,{min:"25%",children:(0,n.jsx)(m,{ref:A,template:g,selectedElementIndex:x,setSelectedElementIndex:y,updateContent:_,readOnly:d})}),(0,n.jsx)(o.A.Panel,{defaultSize:"25%",resizable:!1,collapsible:!0,max:"25%",className:"",children:(0,n.jsxs)("div",{style:{padding:"1rem",overflowY:"auto",height:g.height},children:[(0,n.jsx)(M,{style:{textAlign:"center"},level:4,children:"Customize your template"}),w]})})]})})})},61860:e=>{e.exports={floatButton:"styles_floatButton__HeivV"}},62846:(e,t,a)=>{"use strict";a.d(t,{Tk:()=>i,Ue:()=>o,Ym:()=>r,p9:()=>s,tj:()=>c});var n=a(30832),l=a.n(n);let r=e=>e?"string"==typeof e?e:e.format?e.format("YYYY-MM-DD"):e.$d?l()(e.$d).format("YYYY-MM-DD"):e instanceof Date?l()(e).format("YYYY-MM-DD"):null:null,i=e=>e?"string"==typeof e?e:e.format?e.format("HH:mm:ss"):e.$d?l()(e.$d).format("HH:mm:ss"):e instanceof Date?l()(e).format("HH:mm:ss"):null:null,s=e=>e?l()(e):null,o=e=>e?l()(e,"HH:mm:ss"):null,c=(e,t)=>{if(!e)return new Date().toISOString();let a=l()(e);if(t){let e=l()(t,"HH:mm:ss");return a.hour(e.hour()).minute(e.minute()).second(e.second()).toISOString()}return a.toISOString()}},64778:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var n=a(95155),l=a(70445),r=a(77325);a(12115);var i=a(61860),s=a.n(i);let o=function(e){let{onClick:t,icon:a,children:i,type:o,style:c}=e,{token:{colorBgBase:d}}=l.A.useToken();return(0,n.jsx)("div",{style:{...c,background:d},className:s().floatButton,onClick:t,children:(0,n.jsx)(r.Ay,{block:!0,size:"large",icon:a,type:o,children:i})})}},74227:(e,t,a)=>{"use strict";a.d(t,{N:()=>l});var n=a(34477);let l=(0,n.createServerReference)("7fbd64ebe47753c9152c4e6b30624382d1a35ef8f3",n.callServer,void 0,n.findSourceMapURL,"setSession")},76714:(e,t,a)=>{"use strict";a.d(t,{I7:()=>s,JW:()=>m,LZ:()=>c,Tj:()=>i,mn:()=>l,nt:()=>o,tA:()=>h,ub:()=>r,ul:()=>d,yW:()=>u});var n=a(49561);async function l(e){try{return await n.y1.post("templates/",e)}catch(e){throw Error(e)}}async function r(e,t){try{return await n.y1.put("templates/".concat(t),e)}catch(e){throw Error(e)}}async function i(e){try{return await n.y1.post("templates/upload-template-images/",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw Error(e)}}async function s(e){try{return await n.y1.delete("templates/".concat(e))}catch(e){throw Error(e)}}async function o(){try{return await n.y1.get("templates/?skip=0&limit=100")}catch(e){throw Error(e)}}async function c(){try{return await n.f6.get("categories/?skip=0&limit=100")}catch(e){throw Error(e)}}async function d(e){try{return await n.y1.delete("categories/".concat(e))}catch(e){throw Error(e)}}async function u(e){try{return await n.y1.post("categories/",e)}catch(e){throw Error(e)}}async function m(e){try{return await n.y1.put("categories/".concat(e.id),e)}catch(e){throw Error(e)}}async function h(e){try{return await n.y1.post("categories/upload-image",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw Error(e)}}},80664:(e,t,a)=>{"use strict";a.d(t,{A:()=>er});var n=a(95155),l=a(12115),r=a(20534),i=a(15825),s=a(62846),o=a(15543),c=a(93758);let d=a(17847),u=e=>e?new d(new Date(e)).format("YYYY-MM-DD"):null;var m=a(81730),h=a(24073),g=a(58735),p=a(96097),A=a(65803),x=a(67678),y=a(50274),f=a(79659),v=a(89233),j=a(41754),b=a(72070),_=a(81535),w=a(17238),C=a(77325),E=a(19361),k=a(74947),S=a(6124),I=a(17994),B=a(97226),Q=a(21103),N=a(13324),T=a(95108),F=a(89584),U=a(3795),R=a(55028);a(47703);var P=a(9077),D=a(66188),L=a(94326),z=a(46002),M=a(29911),Y=a(49561);let V=async()=>{try{return await Y.y1.get("csvs/")}catch(e){throw console.error("Error fetching CSV data:",e),Error(e)}};async function K(e){try{let t=await Y.y1.post("csvs/",e,{headers:{"Content-Type":"application/json"}});return console.log("CSV post response:",t),t}catch(e){throw console.error("Error posting CSV data:",e),Error(e.message||"Failed to upload CSV")}}var O=a(4601);let{Dragger:J}=D.A,H=e=>{var t,a,r,i;let{form:s,selectedCsvIds:o,setSelectedCsvIds:c}=e,[d,u]=(0,l.useState)([]),[m,h]=(0,l.useState)(!1),[g,p]=(0,l.useState)(!1),{uploadFileDirect:A}=(0,O.Z)(),x=e=>{c(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id]);let t=s.getFieldValue("csv_ids")||[];t.includes(e.id)?s.setFieldValue("csv_ids",t.filter(t=>t!==e.id)):s.setFieldValue("csv_ids",[...t,e.id])},y=async e=>{p(!0);let t=L.Ay.loading("Uploading file...",0);try{let t=await A(e,{purpose:"csv_import",description:"CSV file for guest list: ".concat(e.name),folder:"csv-files"});if("success"!==t.status)throw Error("Upload failed");let a={name:e.name,file_id:t.fileId,guest_count:0},n=await K(a);if(null==n?void 0:n.id){let e=s.getFieldValue("csv_ids")||[];e.includes(n.id)||(s.setFieldValue("csv_ids",[...e,n.id]),c(e=>[...e,n.id]))}L.Ay.success("".concat(e.name," uploaded successfully"));let l=await V();return u(l),!0}catch(e){return L.Ay.error("Upload failed: ".concat(e.message||"Unknown error")),!1}finally{t(),p(!1)}};return(0,l.useEffect)(()=>{m&&V().then(e=>u(e)).catch(e=>{console.error("Error fetching CSV data:",e),L.Ay.error("Failed to load CSV files")})},[m]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Ay,{style:{width:"50%"},onClick:()=>h(!0),loading:g,children:"Upload CSV file"}),(0,n.jsxs)(z.A,{title:"CSV Files",open:m,onCancel:()=>h(!1),footer:[(0,n.jsx)(C.Ay,{type:"primary",onClick:()=>h(!1),children:"Done"},"done")],width:600,children:[(0,n.jsxs)(J,{accept:".csv",name:"file",multiple:!0,fileList:[],beforeUpload:async e=>(await y(e),!1),customRequest:e=>{let{onSuccess:t}=e;setTimeout(()=>t("ok",null),0)},disabled:g,children:[(0,n.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload CSV"}),g&&(0,n.jsx)("p",{children:"Uploading..."})]}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{style:{fontWeight:"600"},children:"Your CSV Files"}),(0,n.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:"Click to select multiple files"}),(0,n.jsx)("br",{}),(0,n.jsx)("div",{style:{width:"100%",overflowX:"auto",maxHeight:"300px",overflowY:"auto"},children:d&&d.length>0?(0,n.jsx)("div",{className:"csv-list",children:d.map(e=>(0,n.jsxs)("div",{className:"csv-item ".concat(o.includes(e.id)?"selected":""),onClick:()=>x(e),style:{padding:"10px 12px",margin:"6px 0",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",borderRadius:"6px",border:o.includes(e.id)?"1px solid #1890ff":"1px solid #f0f0f0",backgroundColor:o.includes(e.id)?"#e6f7ff":"transparent",transition:"all 0.2s"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(M.EHs,{color:"gray"}),"\xa0\xa0",e.name]}),o.includes(e.id)&&(0,n.jsx)(M.CMH,{color:"#1890ff"})]},e.id))}):(0,n.jsx)("p",{children:"No CSV files found. Upload one to see it here."})})]}),(null===(t=s.getFieldValue("csv_ids"))||void 0===t?void 0:t.length)>0&&(0,n.jsxs)("div",{style:{marginTop:"8px"},children:[(0,n.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Selected CSV Files:"}),(0,n.jsx)("div",{style:{marginTop:"8px",width:"100%"},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#e6f7ff",padding:"6px 12px",borderRadius:"4px",border:"1px solid #91d5ff"},children:[(0,n.jsx)(M.EHs,{size:14,color:"#1890ff",style:{marginRight:"8px"}}),(0,n.jsxs)("span",{children:[(null===(a=s.getFieldValue("csv_ids"))||void 0===a?void 0:a.length)||0," ",(null===(r=s.getFieldValue("csv_ids"))||void 0===r?void 0:r.length)===1?"file":"files"," ","selected"]}),(null===(i=s.getFieldValue("csv_ids"))||void 0===i?void 0:i.length)>0&&(0,n.jsx)(C.Ay,{size:"small",type:"text",danger:!0,style:{marginLeft:"auto"},onClick:()=>{c([]),s.setFieldValue("csv_ids",[])},children:"Clear all"})]})})]})]})};a(36379);var G=a(94600),q=a(25702),Z=a(38919),W=a(46996),X=a(56170);let $=e=>{let{visible:t,onCancel:a,type:s}=e,{invitees:o,setInvitees:c,cohosts:d,setCohosts:u}=(0,i.h)(),[m]=r.A.useForm(),h="invitee"===s,g=h?o:d,p=h?c:u,[A,x]=(0,l.useState)([]);(0,l.useEffect)(()=>{t&&x(g||[])},[t,g]);let f=h?"invitee":"cohost",v=e=>{let t=[...A];t.splice(e,1),x(t)},j=()=>{m.resetFields(),x(g||[]),a()};return(0,n.jsxs)(z.A,{title:h?"Manage Invitees":"Manage Cohosts",open:t,onCancel:j,footer:[(0,n.jsx)(C.Ay,{onClick:j,children:"Cancel"},"cancel"),(0,n.jsx)(C.Ay,{type:"primary",onClick:()=>{m.validateFields().then(e=>{e.name&&e.phone_number?p([...A,{name:e.name,phone_number:e.phone_number}]):p(A),m.resetFields(),a()}).catch(()=>{p(A),a()})},children:h?"Save Invitees":"Save Cohosts"},"save")],width:600,children:[(0,n.jsxs)(_.A.Paragraph,{children:["Add ",h?"invitees":"co-hosts"," to your event. Each ",f," needs a name and phone number."]}),(0,n.jsxs)(r.A,{form:m,layout:"vertical",name:"".concat(f,"Form"),children:[(0,n.jsxs)(B.A,{style:{display:"flex",width:"100%"},size:"middle",children:[(0,n.jsx)(r.A.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter ".concat(f," name")}],style:{flex:1},children:(0,n.jsx)(b.A,{placeholder:"Enter name",prefix:(0,n.jsx)(y.A,{})})}),(0,n.jsx)(r.A.Item,{name:"phone_number",label:"Phone Number",rules:[{required:!0,message:"Please enter phone number"},{pattern:/^[0-9+\-\s]+$/,message:"Please enter a valid phone number"}],style:{flex:1},children:(0,n.jsx)(b.A,{placeholder:"Enter phone number",prefix:(0,n.jsx)(Z.A,{})})})]}),(0,n.jsx)(r.A.Item,{children:(0,n.jsx)(C.Ay,{type:"dashed",onClick:()=>{m.validateFields().then(e=>{x([...A,{name:e.name,phone_number:e.phone_number}]),m.resetFields()}).catch(e=>{console.log("Validate Failed:",e)})},icon:(0,n.jsx)(W.A,{}),block:!0,children:h?"Add Invitee":"Add Cohost"})})]}),A.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.A,{orientation:"left",children:h?"Current Invitees":"Current Cohosts"}),(0,n.jsx)(q.A,{size:"small",bordered:!0,dataSource:A,renderItem:(e,t)=>(0,n.jsx)(q.A.Item,{actions:[(0,n.jsx)(C.Ay,{type:"text",danger:!0,icon:(0,n.jsx)(X.A,{}),onClick:()=>v(t)},"delete")],children:(0,n.jsx)(q.A.Item.Meta,{title:e.name,description:e.phone_number})})})]})]})},ee=(0,R.default)(()=>a.e(7232).then(a.bind(a,27232)),{loadableGenerated:{webpack:()=>[27232]},ssr:!1}),{TextArea:et}=b.A,{Title:ea,Text:en}=_.A,el=e=>{let{form:t}=e,{setCurrent:a,cohosts:d,invitees:_,markerState:R,setMarkerState:D,placeName:L,setPlaceName:z,formData:M,updateFormField:Y,userLocation:V}=(0,i.h)(),[K,O]=(0,l.useState)(!0),[J,G]=(0,l.useState)([]),[q,Z]=(0,l.useState)(!1),[W,X]=(0,l.useState)(!1),[ea,el]=(0,l.useState)("contact"),[er,ei]=(0,l.useState)(!1),{data:es,isLoading:eo}=(0,j.I)({queryKey:["groups"],queryFn:c.Wx});(0,l.useEffect)(()=>{if(M&&Object.keys(M).length>0){let e={...M};M.event_date&&(e.event_date=(0,s.p9)(M.event_date)),M.event_date_to&&(e.event_date_to=(0,s.p9)(M.event_date_to)),M.event_start_time&&(e.event_start_time=(0,s.Ue)(M.event_start_time)),M.event_end_time&&(e.event_end_time=(0,s.Ue)(M.event_end_time)),t.setFieldsValue(e),M.name_source&&el(M.name_source),M.event_date_to&&ei(!0),M.csv_ids&&G(M.csv_ids)}},[t]);let ec=e=>t=>{Y(e,t)},ed=e=>a=>{t.setFieldValue(e,a),Y(e,a)};(0,l.useEffect)(()=>{if(K){O(!1);return}L&&(t.setFieldValue("locName",L),Y("locName",L))},[L,t]),(0,l.useEffect)(()=>{t.getFieldValue("csv_ids")||(t.setFieldValue("csv_ids",[]),Y("csv_ids",[]))},[t]);let eu=e=>{el(e),t.setFieldValue("name_source",e),Y("name_source",e)},em=()=>{var e,a;let n=(null===(e=t.getFieldValue("group_ids"))||void 0===e?void 0:e.length)>0,l=(null===(a=t.getFieldValue("csv_ids"))||void 0===a?void 0:a.length)>0,r=_&&_.length>0;return n||l||r},eh=e=>{ei(e),e||(t.setFieldValue("event_date_to",void 0),Y("event_date_to",null))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.A,{justify:"space-between",className:"mb-3",children:(0,n.jsx)(C.Ay,{onClick:()=>a(1),icon:(0,n.jsx)(m.A,{}),type:"link",children:"Go back"})}),(0,n.jsxs)(E.A,{justify:"center",gutter:[16,16],children:[(0,n.jsx)(k.A,{xs:24,lg:20,children:(0,n.jsxs)(S.A,{size:"small",title:(0,n.jsxs)(w.A,{align:"center",gap:8,children:[(0,n.jsx)(h.A,{}),(0,n.jsx)("span",{children:"Event Details"})]}),style:{boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:16},children:[(0,n.jsx)(r.A.Item,{name:"title",label:"Event Title",rules:[{required:!0,message:"Please enter event title"}],children:(0,n.jsx)(b.A,{placeholder:"Enter event title",onChange:e=>ec("title")(e.target.value)})}),(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)(en,{strong:!0,style:{fontSize:14,marginBottom:12,display:"block"},children:"Event Date & Time"}),(0,n.jsx)(r.A.Item,{name:"event_date",label:"Event Date",rules:[{required:!0,message:"Please select event date"}],style:{marginBottom:16},children:(0,n.jsx)(v.A,{hideDefaultValue:!M.event_date,defaultDate:u(M.event_date||""),language:"en",className:"w-full",style:{width:"100%"},placeholder:"Select event date",onChange:e=>{let a=(null==e?void 0:e.adDate)||null;t.setFieldValue("event_date",a),Y("event_date",a);let n=t.getFieldValue("event_date_to");n&&a&&new Date(a)>new Date(n)&&(t.setFieldValue("event_date_to",null),Y("event_date_to",null))}})}),(0,n.jsxs)(E.A,{gutter:16,children:[(0,n.jsx)(k.A,{span:12,children:(0,n.jsx)(r.A.Item,{name:"event_start_time",label:"Start Time",rules:[{required:!0,message:"Please select start time"}],children:(0,n.jsx)(I.A,{showNow:!1,format:"HH:mm",style:{width:"100%"},placeholder:"Select start time",onChange:ed("event_start_time")})})}),(0,n.jsx)(k.A,{span:12,children:(0,n.jsx)(r.A.Item,{name:"event_end_time",label:"End Time",dependencies:["event_start_time"],rules:[e=>{let{getFieldValue:t}=e;return{validator(e,a){let n=t("event_start_time");return a&&n&&a.isBefore(n)?Promise.reject("End time must be after start time"):Promise.resolve()}}}],children:(0,n.jsx)(I.A,{format:"HH:mm",showNow:!1,style:{width:"100%"},placeholder:"Select end time (optional)",onChange:ed("event_end_time")})})})]}),(0,n.jsx)(B.A,{direction:"vertical",style:{width:"100%",marginBottom:16},children:(0,n.jsx)(Q.A,{checked:er,onChange:e=>eh(e.target.checked),children:(0,n.jsxs)(w.A,{align:"center",gap:4,children:[(0,n.jsx)(h.A,{}),(0,n.jsx)("span",{children:"Multi-day event"})]})})}),er&&(0,n.jsx)("div",{style:{backgroundColor:"#f8f9fa",padding:16,borderRadius:8,border:"1px solid #e9ecef"},children:(0,n.jsx)(r.A.Item,{name:"event_date_to",label:"End Date",dependencies:["event_date"],rules:[{required:er,message:"Please select end date"},e=>{let{getFieldValue:t}=e;return{validator(e,a){let n=t("event_date");return a&&n&&new Date(a)<new Date(n)?Promise.reject("End date must be after start date"):Promise.resolve()}}}],children:(0,n.jsx)(v.A,{hideDefaultValue:!0,defaultDate:u(M.event_date_to||""),language:"en",className:"w-full",style:{width:"100%"},placeholder:"Select end date",onChange:e=>{let a=(null==e?void 0:e.adDate)||null;t.setFieldValue("event_date_to",a),Y("event_date_to",a)}})})})]}),(0,n.jsxs)(E.A,{gutter:16,children:[(0,n.jsx)(k.A,{span:12,children:(0,n.jsx)(r.A.Item,{name:"venue",label:"Venue",rules:[{required:!1,message:"Please enter venue name"}],children:(0,n.jsx)(b.A,{placeholder:"Venue name (optional)",onChange:e=>ec("venue")(e.target.value)})})}),(0,n.jsxs)(k.A,{span:12,children:[(0,n.jsx)(r.A.Item,{name:"locName",label:"Location",style:{marginBottom:"5px"},rules:[{required:!0,message:"Please select a location"}],children:(0,n.jsx)(b.A,{disabled:!0,placeholder:"Select on map below"})}),(0,n.jsx)(o.A,{centerCoords:V||{lat:27.63820799904629,lng:85.51344372504178},markerState:R,setMarkerState:D,placeName:L,setPlaceName:z})]})]}),(0,n.jsx)(r.A.Item,{name:"is_public",label:"Event Visibility",valuePropName:"checked",children:(0,n.jsx)(N.A,{checkedChildren:"Public",unCheckedChildren:"Private",onChange:ec("is_public")})})]})}),(0,n.jsx)(k.A,{xs:24,lg:20,children:(0,n.jsxs)(S.A,{size:"small",title:(0,n.jsxs)(w.A,{align:"center",gap:8,children:[(0,n.jsx)(g.A,{}),(0,n.jsx)("span",{children:"Event Description"})]}),style:{boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:16},children:[(0,n.jsx)(r.A.Item,{name:"description",label:"Short Description",rules:[{required:!0,message:"Please enter a description"}],children:(0,n.jsx)(et,{rows:3,placeholder:"Enter a brief description of your event",maxLength:200,showCount:!0,onChange:e=>ec("description")(e.target.value)})}),(0,n.jsx)(r.A.Item,{name:"rich_description",label:"Rich Description",children:(0,n.jsx)(ee,{theme:"snow",placeholder:"Add formatted details about your event...",style:{height:150,marginBottom:50},onChange:ec("rich_description")})}),(0,n.jsx)(r.A.Item,{name:"sms",label:"SMS Notification Template",children:(0,n.jsx)(et,{rows:3,placeholder:"Custom SMS message for invitees",maxLength:160,showCount:!0,onChange:e=>ec("sms")(e.target.value)})})]})}),(0,n.jsx)(k.A,{xs:24,lg:20,children:(0,n.jsxs)(S.A,{size:"small",title:(0,n.jsxs)(w.A,{align:"center",gap:8,children:[(0,n.jsx)(p.A,{}),(0,n.jsx)("span",{children:"Hosts & Invitees"})]}),style:{boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[(0,n.jsx)(r.A.Item,{name:"host",label:"Event Host",rules:[{required:!0,message:"Host name is required"}],children:(0,n.jsx)(b.A,{placeholder:"Main host name",onChange:e=>ec("host")(e.target.value)})}),(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsxs)(w.A,{justify:"space-between",align:"center",children:[(0,n.jsx)(en,{strong:!0,children:"Cohosts"}),(0,n.jsx)(C.Ay,{type:"primary",icon:(0,n.jsx)(A.A,{}),onClick:()=>Z(!0),children:"Manage Cohosts"})]}),d&&d.length>0?(0,n.jsx)("div",{style:{marginTop:8},children:d.map((e,t)=>(0,n.jsxs)("div",{style:{marginBottom:4,padding:8,background:"#f5f5f5",borderRadius:4},children:[(0,n.jsx)("strong",{children:e.name})," - ",e.phone_number]},t))}):(0,n.jsx)("div",{style:{color:"#999",fontStyle:"italic",marginTop:8},children:"No cohosts added yet"})]}),(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)(en,{strong:!0,style:{fontSize:16,marginBottom:16,display:"block"},children:"Invitee Sources"}),!em()&&(0,n.jsx)(T.A,{message:"Please add at least one invitee source",description:"You must select groups, upload a CSV file, or manually add invitees to proceed.",type:"warning",showIcon:!0,style:{marginBottom:16}}),(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsxs)(w.A,{justify:"space-between",align:"center",style:{marginBottom:8},children:[(0,n.jsx)(en,{strong:!0,children:"Manual Invitees"}),(0,n.jsx)(C.Ay,{type:"primary",icon:(0,n.jsx)(x.A,{}),onClick:()=>X(!0),children:"Manage Invitees"})]}),_&&_.length>0?(0,n.jsxs)("div",{children:[(0,n.jsxs)(en,{type:"secondary",children:[_.length," invitees added manually"]}),(0,n.jsxs)("div",{style:{marginTop:8,maxHeight:120,overflowY:"auto"},children:[_.slice(0,3).map((e,t)=>(0,n.jsxs)("div",{style:{marginBottom:4,padding:6,background:"#e6f4ff",borderRadius:4,fontSize:12},children:[(0,n.jsx)("strong",{children:e.name})," -"," ",e.phone_number]},t)),_.length>3&&(0,n.jsxs)(en,{type:"secondary",style:{fontSize:12},children:["...and ",_.length-3," more"]})]})]}):(0,n.jsx)(en,{type:"secondary",style:{fontStyle:"italic"},children:"No manual invitees added yet"})]}),(0,n.jsx)(r.A.Item,{name:"csv_ids",label:"CSV of Invitees",valuePropName:"value",style:{width:"100%"},children:(0,n.jsx)(H,{form:t,selectedCsvIds:J,setSelectedCsvIds:G})}),(0,n.jsxs)(E.A,{justify:"space-between",align:"middle",children:[(0,n.jsx)(k.A,{span:18,children:(0,n.jsx)(r.A.Item,{name:"group_ids",label:"Select Groups",children:(0,n.jsx)(F.A,{mode:"multiple",placeholder:"Select groups to invite",loading:eo,style:{width:"100%"},onChange:ec("group_ids"),children:null==es?void 0:es.map(e=>(0,n.jsxs)(F.A.Option,{value:e.id,children:[e.name," (",e.contacts_count," contacts)"]},e.id))})})}),(0,n.jsx)(k.A,{children:(0,n.jsx)(P.default,{hastitle:!1})})]})]}),(0,n.jsx)(r.A.Item,{name:"invitee_validation",rules:[{validator:()=>em()?Promise.resolve():Promise.reject("Please select at least one invitee source (groups, CSV, or manual invitees)")}],style:{marginBottom:0},children:(0,n.jsx)(b.A,{type:"hidden"})}),(0,n.jsxs)("div",{style:{marginTop:16},children:[(0,n.jsx)(r.A.Item,{name:"name_source",label:"Name Source for Invitations",rules:[{required:!0,message:"Please select a name source"}],children:(0,n.jsx)(U.A,{block:!0,value:ea,onChange:e=>eu(e),options:[{label:(0,n.jsxs)("div",{style:{padding:"4px 0"},children:[(0,n.jsx)(y.A,{style:{fontSize:"16px"}}),(0,n.jsx)("div",{children:"Use Contact Names"})]}),value:"contact"},{label:(0,n.jsxs)("div",{style:{padding:"4px 0"},children:[(0,n.jsx)(f.A,{style:{fontSize:"16px"}}),(0,n.jsx)("div",{children:"Use Custom Name"})]}),value:"custom"}]})}),(0,n.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[(0,n.jsx)(r.A.Item,{name:"name_prefix",label:"Name Prefix",style:{marginBottom:"12px"},children:(0,n.jsx)(b.A,{placeholder:"Dear",onChange:e=>ec("name_prefix")(e.target.value)})}),"custom"===ea&&(0,n.jsx)(r.A.Item,{name:"name_text",label:"Custom Name",style:{marginBottom:"12px"},children:(0,n.jsx)(b.A,{placeholder:"Guest",onChange:e=>ec("name_text")(e.target.value)})}),(0,n.jsx)(r.A.Item,{name:"name_postfix",label:"Name Suffix",style:{marginBottom:"0"},children:(0,n.jsx)(b.A,{placeholder:"and Family",onChange:e=>ec("name_postfix")(e.target.value)})})]})]}),(0,n.jsx)(r.A.Item,{name:"type",hidden:!0,children:(0,n.jsx)(b.A,{type:"hidden"})})]})}),(0,n.jsx)(k.A,{xs:24,lg:20,children:(0,n.jsx)(C.Ay,{size:"large",htmlType:"submit",block:!0,type:"primary",className:"mt-4",children:"Next"})})]}),(0,n.jsx)($,{visible:q,onCancel:()=>Z(!1),type:"cohost"}),(0,n.jsx)($,{visible:W,onCancel:()=>X(!1),type:"invitee"})]})},er=function(e){let{form:t}=e,{setEventResources:a,setFullData:l,templateData:o,template:c,uploadedImage:d,youtubeLink:u,cohosts:m,invitees:h,markerState:g,placeName:p,formData:A,updateFormField:x,setCurrent:y}=(0,i.h)(),f=async e=>{var t;Object.keys(e).forEach(t=>{x(t,e[t])});let n=new FormData,{_time:r,_time_to:i,event_date:f,event_date_to:v,event_start_time:j,event_end_time:b,locName:_,csv:w,invitee_validation:C,...E}=e,k="",S="";try{k=(0,s.tj)(A.event_date||"",A.event_start_time)}catch(e){console.error("Error formatting event from date:",e),k=new Date().toISOString()}try{let e=A.event_date_to||A.event_date,t=A.event_end_time||A.event_start_time;S=(0,s.tj)(e||"",t)}catch(e){console.error("Error formatting event to date:",e),S=k||new Date().toISOString()}w&&(null===(t=w[0])||void 0===t?void 0:t.originFileObj)&&n.append("csv_file",w[0].originFileObj,"csv.csv");let I=c||d;I&&n.append("template",I,"file.png"),a(n),l({...E,event_date:k,event_from_date:k,event_to_date:S,event_start_time:A.event_start_time||null,event_end_time:A.event_end_time||null,category_id:(null==o?void 0:o.category_id)||0,template_id:(null==o?void 0:o.id)||0,status:"draft",template_url:"",template_file_id:0,youtube_url:u||"",cohosts:m||[],recipient_contacts:h||[],media_type:u?"youtube":"image",use_contact_names:void 0===e.use_contact_names||e.use_contact_names,name_prefix:e.name_prefix||"",name_text:e.name_text||"Guest",name_postfix:e.name_postfix||"",type:"event",note:e.note||"",csv_ids:e.csv_ids||[],group_ids:e.group_ids||[],location:{name:p||"",latitude:g.lat,longitude:g.lng},is_public:void 0!==e.is_public&&e.is_public,isOwn:!o}),y(3)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.A,{style:{display:"flex",flexDirection:"column",gap:"10px"},size:"middle",layout:"vertical",onFinish:f,form:t,initialValues:{_date:null,type:"event",is_public:!1,use_contact_names:!0,csv_ids:[],group_ids:[],name_source:"contact",...A},children:(0,n.jsx)(el,{form:t})})})}},86917:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(95155),l=a(66766),r=a(98617),i=a(10746);let s=e=>{let{src:t,alt:a,preview:s,fallback:o,style:c,className:d,wrapperStyle:u}=e;return(0,n.jsx)(r.A,{preview:s,src:t,alt:a,style:{...c},wrapperStyle:{...u},className:d,fallback:o?i.a:void 0,placeholder:(0,n.jsx)(l.default,{src:t,alt:a,fill:!0,style:{objectFit:"cover"}})})}},88077:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(95155);a(12115);let l=function(e){let{url:t,width:a=560,height:l=315}=e,r=(e=>{if(e.includes("youtu.be/")){var t;return(null===(t=e.split("youtu.be/")[1])||void 0===t?void 0:t.split(/[?&]/)[0])||""}return new URL(e).searchParams.get("v")||""})(t);return(0,n.jsx)("div",{style:{width:a,maxWidth:"100%"},children:(0,n.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden"},children:(0,n.jsx)("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},width:a,height:l,src:"https://www.youtube.com/embed/".concat(r),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})}},93758:(e,t,a)=>{"use strict";a.d(t,{Ni:()=>i,Wx:()=>l,cj:()=>s,wj:()=>r});var n=a(49561);async function l(){try{return await n.y1.get("group/")}catch(e){throw Error(e)}}async function r(e){console.log("Data in createGroup:",e);try{return await n.y1.post("group/",e)}catch(e){throw Error(e)}}async function i(e){try{return await n.y1.delete("group/".concat(e))}catch(e){throw Error(e)}}async function s(e){let{data:t,id:a}=e;try{return await n.y1.put("group/".concat(a),t)}catch(e){throw Error(e)}}}}]);