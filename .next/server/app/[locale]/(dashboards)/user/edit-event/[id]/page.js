(()=>{var e={};e.id=6022,e.ids=[6022],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},18006:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var i=s(65239),r=s(48088),n=s(88170),a=s.n(n),o=s(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["[locale]",{children:["(dashboards)",{children:["user",{children:["edit-event",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,92918)),"/home/btwaashish/Desktop/enimto-frontend/src/app/[locale]/(dashboards)/user/edit-event/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,88023)),"/home/btwaashish/Desktop/enimto-frontend/src/app/[locale]/(dashboards)/user/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,9735)),"/home/btwaashish/Desktop/enimto-frontend/src/app/[locale]/(dashboards)/user/error.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,10137)),"/home/btwaashish/Desktop/enimto-frontend/src/app/[locale]/(dashboards)/user/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,55371)),"/home/btwaashish/Desktop/enimto-frontend/src/app/[locale]/(dashboards)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,11434)),"/home/btwaashish/Desktop/enimto-frontend/src/app/[locale]/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/home/btwaashish/Desktop/enimto-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,54413)),"/home/btwaashish/Desktop/enimto-frontend/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/btwaashish/Desktop/enimto-frontend/src/app/[locale]/(dashboards)/user/edit-event/[id]/page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/[locale]/(dashboards)/user/edit-event/[id]/page",pathname:"/[locale]/user/edit-event/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28446:(e,t,s)=>{Promise.resolve().then(s.bind(s,84818))},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33174:(e,t,s)=>{Promise.resolve().then(s.bind(s,92918))},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")},80518:(e,t,s)=>{"use strict";s.d(t,{KS:()=>r,qM:()=>a,vR:()=>n});var i=s(43313);async function r({month:e,year:t}){try{return await i.y1.get(`events/recived/?skip=0&limit=100&month=${e}&year=${t}`)}catch(e){throw Error(e)}}async function n(e){try{return await i.y1.get(`events/${e}/`)}catch(e){throw Error(e)}}async function a(e,t){try{return await i.y1.patch(`events/${e}/`,t)}catch(e){throw Error(e)}}},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},84818:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>X});var i=s(60687),r=s(43210),n=s(16189),a=s(8693),o=s(29494),l=s(54050),d=s(74018),c=s(70553),p=s(29220),u=s(77833),x=s(80518),m=s(33871),h=s(54133),v=s(42585),_=s(67501),g=s(73668),y=s(85975),j=s(97103),f=s(34308),b=s(80828);let A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"};var w=s(21898),k=r.forwardRef(function(e,t){return r.createElement(w.default,(0,b.A)({},e,{ref:t,icon:A}))}),q=s(79505),E=s(33983);let P=({form:e,eventData:t})=>(0,i.jsxs)("div",{style:{padding:"16px 0"},children:[(0,i.jsx)("h3",{style:{marginBottom:"24px"},children:"Event Details"}),(0,i.jsx)(E.A,{form:e})]});var B=s(83639),S=s(96340),D=s(95896),C=s(48714);let L=({eventData:e,templates:t,categories:s})=>{let[n,a]=(0,r.useState)("current"),[o,l]=d.Ay.useMessage(),{templateData:c,uploadedImage:p,youtubeLink:x,setTemplateData:h,setUploadedImage:_,setYoutubeLink:y,setMediaType:j,setCurrent:f}=(0,m.h)(),b=[{key:"current",label:"Current Media",children:(0,i.jsx)(v.A,{children:(0,i.jsxs)("div",{style:{textAlign:"center"},children:[(0,i.jsxs)("h4",{children:["Current Media: ",x||e.youtube_url?"YouTube Video":p?"Uploaded Image":c||e.template_url?"Template":"No Media"]}),x||e.youtube_url?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,i.jsx)(B.A,{style:{fontSize:"48px",color:"#ff4d4f",marginBottom:"16px"}}),(0,i.jsx)("p",{children:"YouTube Video"}),(0,i.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:x||e.youtube_url})]}):p?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,i.jsx)("img",{src:URL.createObjectURL(p),alt:"Uploaded media",style:{maxWidth:"200px",maxHeight:"200px",objectFit:"contain"}}),(0,i.jsx)("p",{style:{marginTop:"12px"},children:"Uploaded Image"})]}):c?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,i.jsx)(k,{style:{fontSize:"48px",color:"#1890ff",marginBottom:"16px"}}),(0,i.jsxs)("p",{children:["Template: ",c.title]}),(0,i.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:c.description})]}):e.template_url?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,i.jsx)("img",{src:e.template_url,alt:"Current template",style:{maxWidth:"200px",maxHeight:"200px",objectFit:"contain"}}),(0,i.jsx)("p",{style:{marginTop:"12px"},children:"Current Template"})]}):(0,i.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:[(0,i.jsx)(k,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,i.jsx)("p",{children:"No media selected for this event"})]}),(0,i.jsx)("div",{style:{marginTop:"24px"},children:(0,i.jsx)(u.Ay,{type:"primary",danger:!0,onClick:()=>{h(void 0),_(void 0),y(null),o.success("Current media cleared. You can now select a new template or upload new media."),a("new")},disabled:!c&&!p&&!x&&!e.template_url&&!e.youtube_url,children:"Change Media"})})]})})},{key:"new",label:"Select New Media",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{marginBottom:"24px"},children:(0,i.jsx)(C.A,{})}),(0,i.jsx)(S.A,{templates:t,categories:s})]})},{key:"customize",label:"Customize Template",children:(0,i.jsx)(D.A,{}),disabled:!c}];return(0,i.jsxs)("div",{style:{padding:"16px 0"},children:[l,(0,i.jsx)("h3",{style:{marginBottom:"24px"},children:"Template & Media"}),(0,i.jsx)(g.A,{activeKey:n,onChange:a,items:b})]})};var M=s(86072),T=s(52378),z=s(21015),R=s(5948),F=s(71635),I=s(54314),Y=s(23387),U=s(71103),G=s(81945);let{Title:H,Text:K,Paragraph:V}=M.A,$=({eventData:e})=>{let{fullData:t,template:s,uploadedImage:r,youtubeLink:n,imageSize:a,cohosts:o,invitees:l,formData:d}=(0,m.h)(),c=e=>e?new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"",p={title:d.title||e.title,description:d.description||e.description,rich_description:d.rich_description||e.rich_description,venue:d.venue||e.venue,event_date:d.event_date||e.event_date,event_date_to:d.event_date_to||e.event_to_date,event_start_time:d.event_start_time||e.event_start_time,event_end_time:d.event_end_time||e.event_end_time,sms:d.sms||e.sms,is_public:void 0!==d.is_public?d.is_public:e.is_public},u=s||r||n||e.template_url||e.youtube_url;return(0,i.jsxs)("div",{style:{padding:"16px 0"},children:[(0,i.jsx)(H,{level:3,style:{marginBottom:"24px"},children:"Event Preview"}),(0,i.jsxs)(v.A,{bordered:!0,style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.08)",borderRadius:"8px",overflow:"hidden",maxWidth:"900px",margin:"0 auto"},bodyStyle:{padding:24},children:[(0,i.jsx)(H,{level:2,style:{marginBottom:"16px",color:"#1890ff"},children:p.title}),(0,i.jsx)("div",{style:{marginBottom:"16px"},children:(0,i.jsx)(T.A,{color:p.is_public?"green":"blue",children:p.is_public?"Public Event":"Private Event"})}),u&&(0,i.jsx)("div",{style:{marginBottom:"24px",textAlign:"center"},children:n||e.youtube_url?(0,i.jsxs)("div",{children:[(0,i.jsx)(K,{strong:!0,style:{display:"block",marginBottom:"12px"},children:"Event Video"}),(0,i.jsx)(F.A,{url:n||e.youtube_url||"",width:560,height:315})]}):s?(0,i.jsxs)("div",{children:[(0,i.jsx)(K,{strong:!0,style:{display:"block",marginBottom:"12px"},children:"Event Template"}),(0,i.jsx)(z.A,{src:URL.createObjectURL(s),alt:"Event template",style:{maxWidth:"100%",maxHeight:"400px",objectFit:"contain",border:"1px solid #f0f0f0",borderRadius:"8px"}})]}):r?(0,i.jsxs)("div",{children:[(0,i.jsx)(K,{strong:!0,style:{display:"block",marginBottom:"12px"},children:"Event Image"}),(0,i.jsx)(z.A,{src:URL.createObjectURL(r),alt:"Event image",style:{maxWidth:"100%",maxHeight:"400px",objectFit:"contain",border:"1px solid #f0f0f0",borderRadius:"8px"}})]}):e.template_url?(0,i.jsxs)("div",{children:[(0,i.jsx)(K,{strong:!0,style:{display:"block",marginBottom:"12px"},children:"Event Template"}),(0,i.jsx)(z.A,{src:e.template_url,alt:"Event template",style:{maxWidth:"100%",maxHeight:"400px",objectFit:"contain",border:"1px solid #f0f0f0",borderRadius:"8px"}})]}):null}),(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsxs)(_.A,{align:"center",gap:8,style:{marginBottom:"8px"},children:[(0,i.jsx)(I.A,{style:{color:"#1890ff"}}),(0,i.jsx)(K,{strong:!0,children:"Date & Time:"})]}),(0,i.jsxs)("div",{style:{marginLeft:"24px"},children:[(0,i.jsxs)(K,{children:[c(p.event_date),p.event_start_time&&` at ${(e=>e||"")(p.event_start_time)}`]}),p.event_date_to&&p.event_date_to!==p.event_date&&(0,i.jsxs)(K,{style:{display:"block"},children:["Until: ",c(p.event_date_to),p.event_end_time&&` at ${(e=>e||"")(p.event_end_time)}`]})]})]}),p.venue&&(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsxs)(_.A,{align:"center",gap:8,style:{marginBottom:"8px"},children:[(0,i.jsx)(Y.A,{style:{color:"#1890ff"}}),(0,i.jsx)(K,{strong:!0,children:"Venue:"})]}),(0,i.jsx)(K,{style:{marginLeft:"24px"},children:p.venue})]}),p.description&&(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsx)(K,{strong:!0,style:{display:"block",marginBottom:"8px"},children:"Description:"}),p.rich_description?(0,i.jsx)("div",{style:{marginLeft:"8px"},dangerouslySetInnerHTML:{__html:p.rich_description}}):(0,i.jsx)(V,{style:{marginLeft:"8px"},children:p.description})]}),p.sms&&(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsx)(K,{strong:!0,style:{display:"block",marginBottom:"8px"},children:"SMS Message:"}),(0,i.jsx)("div",{style:{background:"#f6f6f6",padding:"12px",borderRadius:"6px",marginLeft:"8px"},children:(0,i.jsxs)(K,{italic:!0,children:['"',p.sms,'"']})})]}),(0,i.jsx)(R.A,{}),(0,i.jsxs)(_.A,{justify:"space-between",align:"center",children:[(0,i.jsx)("div",{children:(0,i.jsxs)(_.A,{align:"center",gap:8,children:[(0,i.jsx)(U.A,{style:{color:"#1890ff"}}),(0,i.jsx)(K,{strong:!0,children:"Co-hosts:"}),(0,i.jsx)(K,{children:o?.length||0})]})}),(0,i.jsx)("div",{children:(0,i.jsxs)(_.A,{align:"center",gap:8,children:[(0,i.jsx)(G.A,{style:{color:"#1890ff"}}),(0,i.jsx)(K,{strong:!0,children:"Invitees:"}),(0,i.jsx)(K,{children:l?.length||0})]})})]})]})]})},O=({eventData:e,form:t,isLoading:s,onSave:n,onBack:a,templates:o,categories:l})=>{let[d,c]=(0,r.useState)("details"),p=[{key:"details",label:(0,i.jsxs)("span",{children:[(0,i.jsx)(f.A,{}),"Edit Details"]}),children:(0,i.jsx)(P,{form:t,eventData:e})},{key:"template",label:(0,i.jsxs)("span",{children:[(0,i.jsx)(k,{}),"Change Template"]}),children:(0,i.jsx)(L,{eventData:e,templates:o,categories:l})},{key:"preview",label:(0,i.jsxs)("span",{children:[(0,i.jsx)(q.A,{}),"Preview"]}),children:(0,i.jsx)($,{eventData:e})}];return(0,i.jsxs)(v.A,{children:[(0,i.jsxs)(_.A,{justify:"space-between",align:"center",style:{marginBottom:"24px"},children:[(0,i.jsxs)(_.A,{align:"center",gap:16,children:[(0,i.jsx)(u.Ay,{icon:(0,i.jsx)(y.A,{}),onClick:a,type:"text",children:"Back to Events"}),(0,i.jsxs)("h2",{style:{margin:0},children:["Edit Event: ",e.title]})]}),(0,i.jsx)(u.Ay,{type:"primary",icon:(0,i.jsx)(j.A,{}),loading:s,onClick:n,children:"Save Changes"})]}),(0,i.jsx)(g.A,{activeKey:d,onChange:c,items:p,size:"large",style:{minHeight:"500px"}})]})};var W=s(44581),N=s(85668),Q=s.n(N);let X=()=>{let e=(0,n.useParams)(),t=(0,n.useRouter)(),s=(0,a.jE)(),[v,_]=d.Ay.useMessage(),[g]=W.A.useForm(),[y,j]=(0,r.useState)(!1),f=e?.id,{setFullData:b,setFormData:A,setTemplateData:w,setImageSize:k,setUploadedImage:q,setTemplate:E,setYoutubeLink:P,setMediaType:B,setCohosts:S,setInvitees:D,setMarkerState:C,setPlaceName:L,updateFormField:M,fullData:T,formData:z,reset:R}=(0,m.h)(),{data:F,isLoading:I,error:Y,isSuccess:U}=(0,o.I)({queryKey:["event",f],queryFn:()=>(0,x.vR)(f),enabled:!!f,staleTime:0,gcTime:0}),{data:G,isLoading:H}=(0,o.I)({queryKey:["templates"],queryFn:h.jx,staleTime:3e5}),{data:K,isLoading:V}=(0,o.I)({queryKey:["categories"],queryFn:h.cp,staleTime:3e5}),$=(0,l.n)({mutationFn:e=>(0,x.qM)(f,e),onSuccess:()=>{v.success("Event updated successfully!"),s.invalidateQueries({queryKey:["event",f]}),s.invalidateQueries({queryKey:["events"]}),t.push("/user/invitations")},onError:e=>{v.error(`Failed to update event: ${e.message}`)}});(0,r.useEffect)(()=>{if(F&&U){let e={title:F.title||"",description:F.description||"",rich_description:F.rich_description||"",sms:F.sms||"",venue:F.venue||"",is_public:F.is_public||!1,category_id:F.category_id||null,host:F.host||"",note:F.note||"",type:F.type||"event",event_date:F.event_date?Q()(F.event_date).format("YYYY-MM-DD"):void 0,event_date_to:F.event_to_date?Q()(F.event_to_date).format("YYYY-MM-DD"):void 0,event_start_time:F.event_start_time||void 0,event_end_time:F.event_end_time||void 0,csv_ids:F.csv_ids||[],group_ids:F.group_ids||[],name_source:"contact",name_prefix:F.name_prefix||"",name_text:F.name_text||"Guest",name_postfix:F.name_postfix||"",use_contact_names:void 0===F.use_contact_names||F.use_contact_names};if(A(e),F.cohosts&&S(F.cohosts),F.recipient_contacts&&D(F.recipient_contacts),F.location&&(C({lat:F.location.latitude,lng:F.location.longitude}),L(F.location.name)),F.youtube_url&&(P(F.youtube_url),B("youtube")),F.template_id&&G){let e=G.find(e=>e.id===F.template_id);e&&(w(e),k({width:e.width||600,height:e.height||800}))}b(F),g.setFieldsValue(e)}},[F,U,G,g,A,S,D,C,L,P,B,w,k,b]);let N=async()=>{if(F)try{j(!0);let e=await g.validateFields(),t={...F,...e,location:{name:z.locName||F.location?.name||"",latitude:F.location?.latitude||0,longitude:F.location?.longitude||0},event_date:e.event_date?Q()(e.event_date).toISOString():F.event_date,event_to_date:e.event_date_to?Q()(e.event_date_to).toISOString():F.event_to_date,event_from_date:e.event_date?Q()(e.event_date).toISOString():F.event_from_date,event_start_time:e.event_start_time||F.event_start_time,event_end_time:e.event_end_time||F.event_end_time,cohosts:F.cohosts||[],recipient_contacts:F.recipient_contacts||[],template_id:F.template_id||null,template_url:F.template_url||"",youtube_url:F.youtube_url||"",template_file_id:F.template_file_id||null,csv_ids:e.csv_ids||[],group_ids:e.group_ids||[],status:F.status||"draft"};$.mutate(t)}catch(e){v.error("Please fill in all required fields")}finally{j(!1)}},X=()=>{t.push("/user/invitations")};return((0,r.useEffect)(()=>()=>{R()},[R]),I||H||V)?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"100px 0"},children:[(0,i.jsx)(c.A,{size:"large"}),(0,i.jsx)("p",{style:{marginTop:"16px"},children:"Loading event data..."})]}):Y?(0,i.jsx)("div",{style:{padding:"24px"},children:(0,i.jsx)(p.A,{message:"Error",description:`Failed to load event: ${Y.message}`,type:"error",showIcon:!0,action:(0,i.jsx)(u.Ay,{size:"small",onClick:X,children:"Go Back"})})}):F?(0,i.jsxs)(i.Fragment,{children:[_,(0,i.jsx)(O,{eventData:F,form:g,isLoading:y||$.isPending,onSave:N,onBack:X,templates:G||[],categories:K||[]})]}):(0,i.jsx)("div",{style:{padding:"24px"},children:(0,i.jsx)(p.A,{message:"Event Not Found",description:"The requested event could not be found.",type:"warning",showIcon:!0,action:(0,i.jsx)(u.Ay,{size:"small",onClick:X,children:"Go Back"})})})}},88044:e=>{"use strict";e.exports=require("canvas")},92918:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});let i=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/btwaashish/Desktop/enimto-frontend/src/app/[locale]/(dashboards)/user/edit-event/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/btwaashish/Desktop/enimto-frontend/src/app/[locale]/(dashboards)/user/edit-event/[id]/page.tsx","default")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[4447,7427,3566,5849,9368,6966,1032,2585,3213,5457,255,7257,5738,553,8756,4018,1151,9530,9210,4280,4317,1804,3533,3875,7442,6197,9950,1431],()=>s(18006));module.exports=i})();